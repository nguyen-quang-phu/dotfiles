"use strict";var i=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var u=(o,e)=>{for(var r in e)i(o,r,{get:e[r],enumerable:!0})},f=(o,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of p(e))!m.call(o,t)&&t!==r&&i(o,t,{get:()=>e[t],enumerable:!(n=k(e,t))||n.enumerable});return o};var h=o=>f(i({},"__esModule",{value:!0}),o);var g={};u(g,{default:()=>l});module.exports=h(g);var c=require("@raycast/api");async function l(o){if(!o.bookmarkId?.trim())throw new Error("bookmarkId is required");let e=(0,c.getPreferenceValues)(),r=await fetch(`https://api.raindrop.io/rest/v1/raindrop/${o.bookmarkId}`,{headers:{Authorization:`Bearer ${e.token}`}});if(!r.ok)throw new Error(`Failed to load bookmark: ${r.statusText}`);let t=(await r.json()).item,a=t.collection?.$id??-1,d=t.collection?.title??(a===-1?"Unsorted":await w(a,e.token))??"Unknown";return{id:t._id,title:t.title,url:t.link,note:t.note??"",excerpt:t.excerpt??"",html:t.html??"",tags:t.tags??[],collectionId:a,collectionTitle:d,highlights:t.highlights?.map(s=>({text:s.text,note:s.note}))??[],created:t.created,lastUpdate:t.lastUpdate}}async function w(o,e){if(!(o<0))try{let r=await fetch(`https://api.raindrop.io/rest/v1/collection/${o}`,{headers:{Authorization:`Bearer ${e}`}});return r.ok?(await r.json()).item?.title:void 0}catch{return}}
