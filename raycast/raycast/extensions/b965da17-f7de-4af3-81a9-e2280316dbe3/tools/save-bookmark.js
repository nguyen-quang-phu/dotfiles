"use strict";var a=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var f=(e,t)=>{for(var o in t)a(e,o,{get:t[o],enumerable:!0})},g=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of m(t))!d.call(e,n)&&n!==o&&a(e,n,{get:()=>t[n],enumerable:!(r=c(t,n))||r.enumerable});return e};var u=e=>g(a({},"__esModule",{value:!0}),e);var I={};f(I,{confirmation:()=>k,default:()=>l});module.exports=u(I);var i=require("@raycast/api");async function l(e){if(!e.url?.trim())throw new Error("A URL is required to save a bookmark.");let t=(0,i.getPreferenceValues)(),o=h(e.collectionId),r=await fetch("https://api.raindrop.io/rest/v1/raindrops",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.token}`},body:JSON.stringify({items:[{link:e.url.trim(),title:e.title?.trim(),note:e.note?.trim(),collectionId:o,tags:e.tags?.filter(Boolean)??[],pleaseParse:{}}]})});if(!r.ok)throw new Error(`Failed to save bookmark: ${r.statusText}`);let s=(await r.json()).items?.[0];return{id:s?._id,title:s?.title??e.title??e.url,url:s?.link??e.url,collectionId:s?.collection?.$id??o,tags:s?.tags??e.tags??[]}}var k=async e=>{let t=[{name:"URL",value:e.url}];return e.title&&t.push({name:"Title",value:e.title}),e.collectionId!==void 0&&t.push({name:"Collection",value:String(e.collectionId)}),e.tags?.length&&t.push({name:"Tags",value:e.tags.join(", ")}),e.note&&t.push({name:"Note",value:e.note}),{info:t}};function h(e){if(!e)return-1;let t=Number.parseInt(e,10);return Number.isNaN(t)?-1:t}0&&(module.exports={confirmation});
