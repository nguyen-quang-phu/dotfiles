"use strict";var kl=Object.create;var Fr=Object.defineProperty;var Ll=Object.getOwnPropertyDescriptor;var Rl=Object.getOwnPropertyNames;var Ol=Object.getPrototypeOf,$l=Object.prototype.hasOwnProperty;var V=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_l=(e,t)=>{for(var r in t)Fr(e,r,{get:t[r],enumerable:!0})},Ko=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Rl(t))!$l.call(e,o)&&o!==r&&Fr(e,o,{get:()=>t[o],enumerable:!(n=Ll(t,o))||n.enumerable});return e};var ne=(e,t,r)=>(r=e!=null?kl(Ol(e)):{},Ko(t||!e||!e.__esModule?Fr(r,"default",{value:e,enumerable:!0}):r,e)),Fl=e=>Ko(Fr({},"__esModule",{value:!0}),e);var ti=V((Bp,ei)=>{ei.exports=Qo;Qo.sync=Ul;var qo=require("fs");function Nl(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function Jo(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:Nl(t,r)}function Qo(e,t,r){qo.stat(e,function(n,o){r(n,n?!1:Jo(o,e,t))})}function Ul(e,t){return Jo(qo.statSync(e),e,t)}});var si=V((zp,ii)=>{ii.exports=ni;ni.sync=Vl;var ri=require("fs");function ni(e,t,r){ri.stat(e,function(n,o){r(n,n?!1:oi(o,t))})}function Vl(e,t){return oi(ri.statSync(e),t)}function oi(e,t){return e.isFile()&&Ml(e,t)}function Ml(e,t){var r=e.mode,n=e.uid,o=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),f=a|c,x=r&l||r&c&&o===s||r&a&&n===i||r&f&&i===0;return x}});var ci=V((Wp,ai)=>{var Gp=require("fs"),Nr;process.platform==="win32"||global.TESTING_WINDOWS?Nr=ti():Nr=si();ai.exports=In;In.sync=Bl;function In(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){In(e,t||{},function(i,s){i?o(i):n(s)})})}Nr(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function Bl(e,t){try{return Nr.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var hi=V((Hp,mi)=>{var Ht=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",li=require("path"),zl=Ht?";":":",ui=ci(),di=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),fi=(e,t)=>{let r=t.colon||zl,n=e.match(/\//)||Ht&&e.match(/\\/)?[""]:[...Ht?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=Ht?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=Ht?o.split(r):[""];return Ht&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},pi=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:i}=fi(e,t),s=[],a=l=>new Promise((f,x)=>{if(l===n.length)return t.all&&s.length?f(s):x(di(e));let S=n[l],v=/^".*"$/.test(S)?S.slice(1,-1):S,A=li.join(v,e),I=!v&&/^\.[\\\/]/.test(e)?e.slice(0,2)+A:A;f(c(I,l,0))}),c=(l,f,x)=>new Promise((S,v)=>{if(x===o.length)return S(a(f+1));let A=o[x];ui(l+A,{pathExt:i},(I,g)=>{if(!I&&g)if(t.all)s.push(l+A);else return S(l+A);return S(c(l,f,x+1))})});return r?a(0).then(l=>r(null,l),r):a(0)},Gl=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=fi(e,t),i=[];for(let s=0;s<r.length;s++){let a=r[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,l=li.join(c,e),f=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let x=0;x<n.length;x++){let S=f+n[x];try{if(ui.sync(S,{pathExt:o}))if(t.all)i.push(S);else return S}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw di(e)};mi.exports=pi;pi.sync=Gl});var yi=V((Kp,vn)=>{"use strict";var gi=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};vn.exports=gi;vn.exports.default=gi});var Ei=V((jp,Si)=>{"use strict";var wi=require("path"),Wl=hi(),Hl=yi();function bi(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=Wl.sync(e.command,{path:r[Hl({env:r})],pathExt:t?wi.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return s&&(s=wi.resolve(o?e.options.cwd:"",s)),s}function Kl(e){return bi(e)||bi(e,!0)}Si.exports=Kl});var xi=V((Yp,Tn)=>{"use strict";var Cn=/([()\][%!^"`<>&|;, *?])/g;function jl(e){return e=e.replace(Cn,"^$1"),e}function Yl(e,t){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),e=e.replace(/(?=(\\+?)?)\1$/,"$1$1"),e=`"${e}"`,e=e.replace(Cn,"^$1"),t&&(e=e.replace(Cn,"^$1")),e}Tn.exports.command=jl;Tn.exports.argument=Yl});var vi=V((Zp,Ii)=>{"use strict";Ii.exports=/^#!(.*)/});var Ti=V((Xp,Ci)=>{"use strict";var Zl=vi();Ci.exports=(e="")=>{let t=e.match(Zl);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var Pi=V((qp,Ai)=>{"use strict";var An=require("fs"),Xl=Ti();function ql(e){let r=Buffer.alloc(150),n;try{n=An.openSync(e,"r"),An.readSync(n,r,0,150,0),An.closeSync(n)}catch{}return Xl(r.toString())}Ai.exports=ql});var Oi=V((Jp,Ri)=>{"use strict";var Jl=require("path"),ki=Ei(),Li=xi(),Ql=Pi(),eu=process.platform==="win32",tu=/\.(?:com|exe)$/i,ru=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function nu(e){e.file=ki(e);let t=e.file&&Ql(e.file);return t?(e.args.unshift(e.file),e.command=t,ki(e)):e.file}function ou(e){if(!eu)return e;let t=nu(e),r=!tu.test(t);if(e.options.forceShell||r){let n=ru.test(t);e.command=Jl.normalize(e.command),e.command=Li.command(e.command),e.args=e.args.map(i=>Li.argument(i,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function iu(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:ou(n)}Ri.exports=iu});var Fi=V((Qp,_i)=>{"use strict";var Pn=process.platform==="win32";function kn(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function su(e,t){if(!Pn)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let i=$i(o,t);if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function $i(e,t){return Pn&&e===1&&!t.file?kn(t.original,"spawn"):null}function au(e,t){return Pn&&e===1&&!t.file?kn(t.original,"spawnSync"):null}_i.exports={hookChildProcess:su,verifyENOENT:$i,verifyENOENTSync:au,notFoundError:kn}});var Ui=V((em,Kt)=>{"use strict";var Di=require("child_process"),Ln=Oi(),Rn=Fi();function Ni(e,t,r){let n=Ln(e,t,r),o=Di.spawn(n.command,n.args,n.options);return Rn.hookChildProcess(o,n),o}function cu(e,t,r){let n=Ln(e,t,r),o=Di.spawnSync(n.command,n.args,n.options);return o.error=o.error||Rn.verifyENOENTSync(o.status,n),o}Kt.exports=Ni;Kt.exports.spawn=Ni;Kt.exports.sync=cu;Kt.exports._parse=Ln;Kt.exports._enoent=Rn});var qi=V((bm,Br)=>{Br.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Br.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Br.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var rs=V((Sm,Xt)=>{var K=global.process,Ot=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};Ot(K)?(Ji=require("assert"),Yt=qi(),Qi=/^win/i.test(K.platform),fr=require("events"),typeof fr!="function"&&(fr=fr.EventEmitter),K.__signal_exit_emitter__?oe=K.__signal_exit_emitter__:(oe=K.__signal_exit_emitter__=new fr,oe.count=0,oe.emitted={}),oe.infinite||(oe.setMaxListeners(1/0),oe.infinite=!0),Xt.exports=function(e,t){if(!Ot(global.process))return function(){};Ji.equal(typeof e,"function","a callback must be provided for exit handler"),Zt===!1&&Dn();var r="exit";t&&t.alwaysLast&&(r="afterexit");var n=function(){oe.removeListener(r,e),oe.listeners("exit").length===0&&oe.listeners("afterexit").length===0&&zr()};return oe.on(r,e),n},zr=function(){!Zt||!Ot(global.process)||(Zt=!1,Yt.forEach(function(t){try{K.removeListener(t,Gr[t])}catch{}}),K.emit=Wr,K.reallyExit=Nn,oe.count-=1)},Xt.exports.unload=zr,$t=function(t,r,n){oe.emitted[t]||(oe.emitted[t]=!0,oe.emit(t,r,n))},Gr={},Yt.forEach(function(e){Gr[e]=function(){if(Ot(global.process)){var r=K.listeners(e);r.length===oe.count&&(zr(),$t("exit",null,e),$t("afterexit",null,e),Qi&&e==="SIGHUP"&&(e="SIGINT"),K.kill(K.pid,e))}}}),Xt.exports.signals=function(){return Yt},Zt=!1,Dn=function(){Zt||!Ot(global.process)||(Zt=!0,oe.count+=1,Yt=Yt.filter(function(t){try{return K.on(t,Gr[t]),!0}catch{return!1}}),K.emit=ts,K.reallyExit=es)},Xt.exports.load=Dn,Nn=K.reallyExit,es=function(t){Ot(global.process)&&(K.exitCode=t||0,$t("exit",K.exitCode,null),$t("afterexit",K.exitCode,null),Nn.call(K,K.exitCode))},Wr=K.emit,ts=function(t,r){if(t==="exit"&&Ot(global.process)){r!==void 0&&(K.exitCode=r);var n=Wr.apply(this,arguments);return $t("exit",K.exitCode,null),$t("afterexit",K.exitCode,null),n}else return Wr.apply(this,arguments)}):Xt.exports=function(){return function(){}};var Ji,Yt,Qi,fr,oe,zr,$t,Gr,Zt,Dn,Nn,es,Wr,ts});var fs=V((Im,ds)=>{"use strict";var{PassThrough:Ou}=require("stream");ds.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,n=r==="buffer",o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);let i=new Ou({objectMode:o});r&&i.setEncoding(r);let s=0,a=[];return i.on("data",c=>{a.push(c),o?s=a.length:s+=c.length}),i.getBufferedValue=()=>t?a:n?Buffer.concat(a,s):a.join(""),i.getBufferedLength=()=>s,i}});var ps=V((vm,pr)=>{"use strict";var{constants:$u}=require("buffer"),_u=require("stream"),{promisify:Fu}=require("util"),Du=fs(),Nu=Fu(_u.pipeline),Hr=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Un(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,n=Du(t);return await new Promise((o,i)=>{let s=a=>{a&&n.getBufferedLength()<=$u.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),i(a)};(async()=>{try{await Nu(e,n),o()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new Hr)})}),n.getBufferedValue()}pr.exports=Un;pr.exports.buffer=(e,t)=>Un(e,{...t,encoding:"buffer"});pr.exports.array=(e,t)=>Un(e,{...t,array:!0});pr.exports.MaxBufferError=Hr});var hs=V((Cm,ms)=>{"use strict";var{PassThrough:Uu}=require("stream");ms.exports=function(){var e=[],t=new Uu({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=n,t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(r),t;function r(i){return Array.isArray(i)?(i.forEach(r),this):(e.push(i),i.once("end",o.bind(null,i)),i.once("error",t.emit.bind(t,"error")),i.pipe(t,{end:!1}),this)}function n(){return e.length==0}function o(i){e=e.filter(function(s){return s!==i}),!e.length&&t.readable&&t.end()}}});var Us=V((oh,Ns)=>{var Ce=require("fs"),Xu=require("util"),Jt=require("path"),Qn=require("events"),$s=require("zlib"),Ds=require("stream"),m={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSIGFIRST:80,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,MAXFILECOMMENT:65535,ENDL64HDR:20,ENDL64SIG:117853008,ENDL64SIGFIRST:80,ENDL64OFS:8,END64HDR:56,END64SIG:101075792,END64SIGFIRST:80,END64SUB:24,END64TOT:32,END64SIZ:40,END64OFF:48,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FLG_ENTRY_ENC:1,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535},it=function(e){let t,r,n,o,i,s,c=this,l=e.storeEntries!==!1?{}:null,f=e.file,x=e.nameEncoding?new TextDecoder(e.nameEncoding):null;S();function S(){e.fd?(t=e.fd,v()):Ce.open(f,"r",(d,y)=>{if(d)return c.emit("error",d);t=y,v()})}function v(){Ce.fstat(t,(d,y)=>{if(d)return c.emit("error",d);r=y.size,n=e.chunkSize||Math.round(r/1e3),n=Math.max(Math.min(n,Math.min(128*1024,r)),Math.min(1024,r)),I()})}function A(d,y){if(d||!y)return c.emit("error",d||new Error("Archive read error"));let p=o.lastPos,w=p-o.win.position,R=o.win.buffer,k=o.minPos;for(;--p>=k&&--w>=0;)if(R.length-w>=4&&R[w]===o.firstByte&&R.readUInt32LE(w)===o.sig){o.lastBufferPosition=w,o.lastBytesRead=y,o.complete();return}if(p===k)return c.emit("error",new Error("Bad archive"));if(o.lastPos=p+1,o.chunkSize*=2,p<=k)return c.emit("error",new Error("Bad archive"));let H=Math.min(o.chunkSize,p-k);o.win.expandLeft(H,A)}function I(){let d=Math.min(m.ENDHDR+m.MAXFILECOMMENT,r);o={win:new Xr(t),totalReadLength:d,minPos:r-d,lastPos:r,chunkSize:Math.min(1024,n),firstByte:m.ENDSIGFIRST,sig:m.ENDSIG,complete:g},o.win.read(r-o.chunkSize,o.chunkSize,A)}function g(){let d=o.win.buffer,y=o.lastBufferPosition;try{i=new jn,i.read(d.slice(y,y+m.ENDHDR)),i.headerOffset=o.win.position+y,i.commentLength?c.comment=d.slice(y+m.ENDHDR,y+m.ENDHDR+i.commentLength).toString():c.comment=null,c.entriesCount=i.volumeEntries,c.centralDirectory=i,i.volumeEntries===m.EF_ZIP64_OR_16&&i.totalEntries===m.EF_ZIP64_OR_16||i.size===m.EF_ZIP64_OR_32||i.offset===m.EF_ZIP64_OR_32?P():(o={},L())}catch(p){c.emit("error",p)}}function P(){let d=m.ENDL64HDR;o.lastBufferPosition>d?(o.lastBufferPosition-=d,E()):(o={win:o.win,totalReadLength:d,minPos:o.win.position-d,lastPos:o.win.position,chunkSize:o.chunkSize,firstByte:m.ENDL64SIGFIRST,sig:m.ENDL64SIG,complete:E},o.win.read(o.lastPos-o.chunkSize,o.chunkSize,A))}function E(){let d=o.win.buffer,y=new Yn;y.read(d.slice(o.lastBufferPosition,o.lastBufferPosition+m.ENDL64HDR));let p=r-y.headerOffset;o={win:o.win,totalReadLength:p,minPos:y.headerOffset,lastPos:o.lastPos,chunkSize:o.chunkSize,firstByte:m.END64SIGFIRST,sig:m.END64SIG,complete:$},o.win.read(r-o.chunkSize,o.chunkSize,A)}function $(){let d=o.win.buffer,y=new Zn;y.read(d.slice(o.lastBufferPosition,o.lastBufferPosition+m.END64HDR)),c.centralDirectory.volumeEntries=y.volumeEntries,c.centralDirectory.totalEntries=y.totalEntries,c.centralDirectory.size=y.size,c.centralDirectory.offset=y.offset,c.entriesCount=y.volumeEntries,o={},L()}function L(){o={win:new Xr(t),pos:i.offset,chunkSize:n,entriesLeft:i.volumeEntries},o.win.read(o.pos,Math.min(n,r-o.pos),N)}function N(d,y){if(d||!y)return c.emit("error",d||new Error("Entries read error"));let p=o.pos-o.win.position,w=o.entry,R=o.win.buffer,k=R.length;try{for(;o.entriesLeft>0;){w||(w=new Xn,w.readHeader(R,p),w.headerOffset=o.win.position+p,o.entry=w,o.pos+=m.CENHDR,p+=m.CENHDR);let H=w.fnameLen+w.extraLen+w.comLen,j=H+(o.entriesLeft>1?m.CENHDR:0);if(k-p<j){o.win.moveRight(n,N,p),o.move=!0;return}w.read(R,p,x),e.skipEntryNameValidation||w.validateName(),l&&(l[w.name]=w),c.emit("entry",w),o.entry=w=null,o.entriesLeft--,o.pos+=H,p+=H}c.emit("ready")}catch(H){c.emit("error",H)}}function te(){if(!l)throw new Error("storeEntries disabled")}Object.defineProperty(this,"ready",{get(){return!1}}),this.entry=function(d){return te(),l[d]},this.entries=function(){return te(),l},this.stream=function(d,y){return this.openEntry(d,(p,w)=>{if(p)return y(p);let R=me(w),k=new qn(t,R,w.compressedSize);if(w.method!==m.STORED)if(w.method===m.DEFLATED)k=k.pipe($s.createInflateRaw());else return y(new Error("Unknown compression method: "+w.method));ye(w)&&(k=k.pipe(new Jn(k,w.crc,w.size))),y(null,k)},!1)},this.entryDataSync=function(d){let y=null;if(this.openEntry(d,(w,R)=>{y=w,d=R},!0),y)throw y;let p=Buffer.alloc(d.compressedSize);if(new nt(t,p,0,d.compressedSize,me(d),w=>{y=w}).read(!0),y)throw y;if(d.method!==m.STORED)if(d.method===m.DEFLATED||d.method===m.ENHANCED_DEFLATED)p=$s.inflateRawSync(p);else throw new Error("Unknown compression method: "+d.method);if(p.length!==d.size)throw new Error("Invalid size");return ye(d)&&new qr(d.crc,d.size).data(p),p},this.openEntry=function(d,y,p){if(typeof d=="string"&&(te(),d=l[d],!d))return y(new Error("Entry not found"));if(!d.isFile)return y(new Error("Entry is not file"));if(!t)return y(new Error("Archive closed"));let w=Buffer.alloc(m.LOCHDR);new nt(t,w,0,w.length,d.offset,R=>{if(R)return y(R);let k;try{d.readDataHeader(w),d.encrypted&&(k=new Error("Entry encrypted"))}catch(H){k=H}y(k,d)}).read(p)};function me(d){return d.offset+m.LOCHDR+d.fnameLen+d.extraLen}function ye(d){return(d.flags&8)!==8}function Re(d,y,p){c.stream(d,(w,R)=>{if(w)p(w);else{let k,H;R.on("error",j=>{H=j,k&&(R.unpipe(k),k.close(()=>{p(j)}))}),Ce.open(y,"w",(j,we)=>{if(j)return p(j);if(H){Ce.close(t,()=>{p(H)});return}k=Ce.createWriteStream(y,{fd:we}),k.on("finish",()=>{c.emit("extract",d,y),H||p()}),R.pipe(k)})}})}function At(d,y,p){if(!y.length)return p();let w=y.shift();w=Jt.join(d,Jt.join(...w)),Ce.mkdir(w,{recursive:!0},R=>{if(R&&R.code!=="EEXIST")return p(R);At(d,y,p)})}function le(d,y,p,w,R){if(!p.length)return w(null,R);let k=p.shift(),H=Jt.join(d,k.name.replace(y,""));Re(k,H,j=>{if(j)return w(j,R);le(d,y,p,w,R+1)})}this.extract=function(d,y,p){let w=d||"";if(typeof d=="string"&&(d=this.entry(d),d?w=d.name:w.length&&w[w.length-1]!=="/"&&(w+="/")),!d||d.isDirectory){let R=[],k=[],H={};for(let j in l)if(Object.prototype.hasOwnProperty.call(l,j)&&j.lastIndexOf(w,0)===0){let we=j.replace(w,""),Ze=l[j];if(Ze.isFile&&(R.push(Ze),we=Jt.dirname(we)),we&&!H[we]&&we!=="."){H[we]=!0;let u=we.split("/").filter(b=>b);for(u.length&&k.push(u);u.length>1;){u=u.slice(0,u.length-1);let b=u.join("/");if(H[b]||b===".")break;H[b]=!0,k.push(u)}}}k.sort((j,we)=>j.length-we.length),k.length?At(y,k,j=>{j?p(j):le(y,w,R,p,0)}):le(y,w,R,p,0)}else Ce.stat(y,(R,k)=>{k&&k.isDirectory()?Re(d,Jt.join(y,Jt.basename(d.name)),p):Re(d,y,p)})},this.close=function(d){s||!t?(s=!0,d&&d()):(s=!0,Ce.close(t,y=>{t=null,d&&d(y)}))};let re=Qn.EventEmitter.prototype.emit;this.emit=function(...d){if(!s)return re.call(this,...d)}};it.setFs=function(e){Ce=e};it.debugLog=(...e)=>{it.debug&&console.log(...e)};Xu.inherits(it,Qn.EventEmitter);var rt=Symbol("zip");it.async=class extends Qn.EventEmitter{constructor(t){super();let r=new it(t);r.on("entry",n=>this.emit("entry",n)),r.on("extract",(n,o)=>this.emit("extract",n,o)),this[rt]=new Promise((n,o)=>{r.on("ready",()=>{r.removeListener("error",o),n(r)}),r.on("error",o)})}get entriesCount(){return this[rt].then(t=>t.entriesCount)}get comment(){return this[rt].then(t=>t.comment)}async entry(t){return(await this[rt]).entry(t)}async entries(){return(await this[rt]).entries()}async stream(t){let r=await this[rt];return new Promise((n,o)=>{r.stream(t,(i,s)=>{i?o(i):n(s)})})}async entryData(t){let r=await this.stream(t);return new Promise((n,o)=>{let i=[];r.on("data",s=>i.push(s)),r.on("end",()=>{n(Buffer.concat(i))}),r.on("error",s=>{r.removeAllListeners("end"),o(s)})})}async extract(t,r){let n=await this[rt];return new Promise((o,i)=>{n.extract(t,r,(s,a)=>{s?i(s):o(a)})})}async close(){let t=await this[rt];return new Promise((r,n)=>{t.close(o=>{o?n(o):r()})})}};var jn=class{read(t){if(t.length!==m.ENDHDR||t.readUInt32LE(0)!==m.ENDSIG)throw new Error("Invalid central directory");this.volumeEntries=t.readUInt16LE(m.ENDSUB),this.totalEntries=t.readUInt16LE(m.ENDTOT),this.size=t.readUInt32LE(m.ENDSIZ),this.offset=t.readUInt32LE(m.ENDOFF),this.commentLength=t.readUInt16LE(m.ENDCOM)}},Yn=class{read(t){if(t.length!==m.ENDL64HDR||t.readUInt32LE(0)!==m.ENDL64SIG)throw new Error("Invalid zip64 central directory locator");this.headerOffset=ot(t,m.ENDSUB)}},Zn=class{read(t){if(t.length!==m.END64HDR||t.readUInt32LE(0)!==m.END64SIG)throw new Error("Invalid central directory");this.volumeEntries=ot(t,m.END64SUB),this.totalEntries=ot(t,m.END64TOT),this.size=ot(t,m.END64SIZ),this.offset=ot(t,m.END64OFF)}},Xn=class{readHeader(t,r){if(t.length<r+m.CENHDR||t.readUInt32LE(r)!==m.CENSIG)throw new Error("Invalid entry header");this.verMade=t.readUInt16LE(r+m.CENVEM),this.version=t.readUInt16LE(r+m.CENVER),this.flags=t.readUInt16LE(r+m.CENFLG),this.method=t.readUInt16LE(r+m.CENHOW);let n=t.readUInt16LE(r+m.CENTIM),o=t.readUInt16LE(r+m.CENTIM+2);this.time=_s(n,o),this.crc=t.readUInt32LE(r+m.CENCRC),this.compressedSize=t.readUInt32LE(r+m.CENSIZ),this.size=t.readUInt32LE(r+m.CENLEN),this.fnameLen=t.readUInt16LE(r+m.CENNAM),this.extraLen=t.readUInt16LE(r+m.CENEXT),this.comLen=t.readUInt16LE(r+m.CENCOM),this.diskStart=t.readUInt16LE(r+m.CENDSK),this.inattr=t.readUInt16LE(r+m.CENATT),this.attr=t.readUInt32LE(r+m.CENATX),this.offset=t.readUInt32LE(r+m.CENOFF)}readDataHeader(t){if(t.readUInt32LE(0)!==m.LOCSIG)throw new Error("Invalid local header");this.version=t.readUInt16LE(m.LOCVER),this.flags=t.readUInt16LE(m.LOCFLG),this.method=t.readUInt16LE(m.LOCHOW);let r=t.readUInt16LE(m.LOCTIM),n=t.readUInt16LE(m.LOCTIM+2);this.time=_s(r,n),this.crc=t.readUInt32LE(m.LOCCRC)||this.crc;let o=t.readUInt32LE(m.LOCSIZ);o&&o!==m.EF_ZIP64_OR_32&&(this.compressedSize=o);let i=t.readUInt32LE(m.LOCLEN);i&&i!==m.EF_ZIP64_OR_32&&(this.size=i),this.fnameLen=t.readUInt16LE(m.LOCNAM),this.extraLen=t.readUInt16LE(m.LOCEXT)}read(t,r,n){let o=t.slice(r,r+=this.fnameLen);this.name=n?n.decode(new Uint8Array(o)):o.toString("utf8");let i=t[r-1];this.isDirectory=i===47||i===92,this.extraLen&&(this.readExtra(t,r),r+=this.extraLen),this.comment=this.comLen?t.slice(r,r+this.comLen).toString():null}validateName(){if(/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name))throw new Error("Malicious entry: "+this.name)}readExtra(t,r){let n,o,i=r+this.extraLen;for(;r<i;)n=t.readUInt16LE(r),r+=2,o=t.readUInt16LE(r),r+=2,m.ID_ZIP64===n&&this.parseZip64Extra(t,r,o),r+=o}parseZip64Extra(t,r,n){n>=8&&this.size===m.EF_ZIP64_OR_32&&(this.size=ot(t,r),r+=8,n-=8),n>=8&&this.compressedSize===m.EF_ZIP64_OR_32&&(this.compressedSize=ot(t,r),r+=8,n-=8),n>=8&&this.offset===m.EF_ZIP64_OR_32&&(this.offset=ot(t,r),r+=8,n-=8),n>=4&&this.diskStart===m.EF_ZIP64_OR_16&&(this.diskStart=t.readUInt32LE(r))}get encrypted(){return(this.flags&m.FLG_ENTRY_ENC)===m.FLG_ENTRY_ENC}get isFile(){return!this.isDirectory}},nt=class{constructor(t,r,n,o,i,s){this.fd=t,this.buffer=r,this.offset=n,this.length=o,this.position=i,this.callback=s,this.bytesRead=0,this.waiting=!1}read(t){it.debugLog("read",this.position,this.bytesRead,this.length,this.offset),this.waiting=!0;let r;if(t){let n=0;try{n=Ce.readSync(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead)}catch(o){r=o}this.readCallback(t,r,r?n:null)}else Ce.read(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead,this.readCallback.bind(this,t))}readCallback(t,r,n){if(typeof n=="number"&&(this.bytesRead+=n),r||!n||this.bytesRead===this.length)return this.waiting=!1,this.callback(r,this.bytesRead);this.read(t)}},Xr=class{constructor(t){this.position=0,this.buffer=Buffer.alloc(0),this.fd=t,this.fsOp=null}checkOp(){if(this.fsOp&&this.fsOp.waiting)throw new Error("Operation in progress")}read(t,r,n){this.checkOp(),this.buffer.length<r&&(this.buffer=Buffer.alloc(r)),this.position=t,this.fsOp=new nt(this.fd,this.buffer,0,r,this.position,n).read()}expandLeft(t,r){this.checkOp(),this.buffer=Buffer.concat([Buffer.alloc(t),this.buffer]),this.position-=t,this.position<0&&(this.position=0),this.fsOp=new nt(this.fd,this.buffer,0,t,this.position,r).read()}expandRight(t,r){this.checkOp();let n=this.buffer.length;this.buffer=Buffer.concat([this.buffer,Buffer.alloc(t)]),this.fsOp=new nt(this.fd,this.buffer,n,t,this.position+n,r).read()}moveRight(t,r,n){this.checkOp(),n?this.buffer.copy(this.buffer,0,n):n=0,this.position+=n,this.fsOp=new nt(this.fd,this.buffer,this.buffer.length-n,n,this.position+this.buffer.length-n,r).read()}},qn=class extends Ds.Readable{constructor(t,r,n){super(),this.fd=t,this.offset=r,this.length=n,this.pos=0,this.readCallback=this.readCallback.bind(this)}_read(t){let r=Buffer.alloc(Math.min(t,this.length-this.pos));r.length?Ce.read(this.fd,r,0,r.length,this.offset+this.pos,this.readCallback):this.push(null)}readCallback(t,r,n){this.pos+=r,t?(this.emit("error",t),this.push(null)):r?(r!==n.length&&(n=n.slice(0,r)),this.push(n)):this.push(null)}},Jn=class extends Ds.Transform{constructor(t,r,n){super(),this.verify=new qr(r,n),t.on("error",o=>{this.emit("error",o)})}_transform(t,r,n){let o;try{this.verify.data(t)}catch(i){o=i}n(o,t)}},qr=class e{constructor(t,r){this.crc=t,this.size=r,this.state={crc:-1,size:0}}data(t){let r=e.getCrcTable(),n=this.state.crc,o=0,i=t.length;for(;--i>=0;)n=r[(n^t[o++])&255]^n>>>8;if(this.state.crc=n,this.state.size+=t.length,this.state.size>=this.size){let s=Buffer.alloc(4);if(s.writeInt32LE(~this.state.crc&4294967295,0),n=s.readUInt32LE(0),n!==this.crc)throw new Error("Invalid CRC");if(this.state.size!==this.size)throw new Error("Invalid size")}}static getCrcTable(){let t=e.crcTable;if(!t){e.crcTable=t=[];let r=Buffer.alloc(4);for(let n=0;n<256;n++){let o=n;for(let i=8;--i>=0;)(o&1)!==0?o=3988292384^o>>>1:o=o>>>1;o<0&&(r.writeInt32LE(o,0),o=r.readUInt32LE(0)),t[n]=o}}return t}};function _s(e,t){let r=Fs(e,16),n=Fs(t,16),o={h:parseInt(r.slice(0,5).join(""),2),m:parseInt(r.slice(5,11).join(""),2),s:parseInt(r.slice(11,16).join(""),2)*2,Y:parseInt(n.slice(0,7).join(""),2)+1980,M:parseInt(n.slice(7,11).join(""),2),D:parseInt(n.slice(11,16).join(""),2)},i=[o.Y,o.M,o.D].join("-")+" "+[o.h,o.m,o.s].join(":")+" GMT+0";return new Date(i).getTime()}function Fs(e,t){let r=(e>>>0).toString(2);for(;r.length<t;)r="0"+r;return r.split("")}function ot(e,t){return e.readUInt32LE(t+4)*4294967296+e.readUInt32LE(t)}Ns.exports=it});var Mc=V(($S,Vc)=>{Vc.exports={Other:0,CR:1,LF:2,Control:4,Extend:8,ZWJ:16,Regional_Indicator:32,Prepend:64,SpacingMark:128,L:256,V:512,T:1024,LV:2048,LVT:4096,Extended_Pictographic:8192,InCB_Linker:16384,InCB_Consonant:32768,InCB_Extend:65536}});var Bc=V((_S,Pf)=>{Pf.exports={data:"ABAOAAAAAADQjQAAAd4HIfjtnG2oFUUYxx/1nHu29OolvKRSZIIQghSSEFJwwj4YWdzoFcoQyriBHwz8YHDBiSKDLG9YKSEiUX4IFQ0FCaRLoFmUb9mLBqJ+EDOIsAgpjf7b7nCnOTO7M7szu8frPPBjZufleZ6ZeWZm73pwYALRk2ApGAQMvC6UlU2HwUbwDthk0P5DsC2jfifYC0bAQXAE/AhOgXNCu1/A7+ASoAZRD5gMekE/mAFmge1gN9jbSPrOSdPPkM4DX4AvwVFwApwBZ8EFcBH8Bf4GE5pEUXP0uQ/5ac2k/UyktzWT/ncgPYj0rmZip91M6hc1R/U/hPzj4BnwPBgECwT7cb8VKFsZJflVyK9O9cW8gvwb6fM6pO+l+c1It4Lt4Hah/R7k94H94BuhPGZDNMqWlK1gf4rYNovthu1c8x3G8xOYmhKXnUH6c5pf0/h/+8Uo/1Wagz+bev1X0rpGD9GkniS/FjRTvVNRdiO4BcwGc8H8tN3dabqwp1Pv/Sh7WFHOGU4pOz9vws/1qa+PCuXxGHZmjDtQAdL6n1DEgAs7NwnrvCQj5gKBQCAQCAQCgUAgEOgGnsPfrlOE7zlvG3y/WI4+K4W/eYciotVgCGWv8u85SNeDjVHyPXAj8tORbknrtyLdAT5Jnz9Fehnp5zl/S3+F+kPQeRgcAUfBMfAtOB6FulAX6kJdqHNdtwPsAQei+u+sQCAwdjnk+d9TNk0Y/Xd1mUFFmfh+vKHhxycbRnoTaDLR0t582mg3oGg7LJWN4JmmoD1YNSUp24b0NJjWR3QnGAT3TcT7Pzh7HdGt1xNF4xKeFvIiu9D25ER1nczqVMeMSUS7kX8M6bvgMKBeMx2BQCAQGJv8gXuhEd8nLaJ/cB+2cCdPaiW/E2ojvyi9oyOkN6B8Df5mmZbW34x0QLjDZ7eS707i/Rr/ZmRua/R3ZPORv6eV1C2MU/R/MP1O9gCeH2mN9n0K+Wdb+rt7EHUrhPpVreS7GH9mQt1ryL+VoWt9Rl3MEuhdJr2vvI8+H4CPwQuo25XqeLHAe81ewf4I8gckf77G80up3uM5voqcRNuX0e800vMW/XwyBH7rEl9EZiC2n6jQ3masyxzY/EHxnXjeVfptIP797rAAkxjO4KNGZ/trjTJz/33O33rTpXPpVBf+1u4cfLqg8Wuxo9+Dnk/1XzQc/6W03RWhrD+dSzI4x+K/eS914Xnnisvp2MY7OrP2ldAToe86MFnQ0X+VnqU2xOfnrCh5f3Oha0GUpPciXQQGrqY5hK9LBX+nK/aebaweS8+AZSXnIa9/v4MzTh7b2jH6O/rlJdfiZBeMoUFmjBfy4wz7mBCkPgnz7y6Oq4x/l+sWXeO4lKrsdJvUvYZF111MdfmxLm0NpmI7591853Tj+VJVDGaNoZ3TRtahautDRL/qkm6KlW6Wa2EeXI3N5Ry0SX+e26xJ27K9K5iijNJyjvwsnllZ4mKeZbuy72I5F5VvNr6o+hcVbredoVc3/y7vN/keke0ywS6T6tqOfOE2mQKS8rJ/3A8mpHWfZVl7qq0oV0lbQ9m9bOszt+lb5LWsU8TxN8j9+LnOPnL3Pc73tz4X31fy7mVdDObZcnHfdev3VNV86ebRtF1VUsSui7U0OQ/rEvE8Jsp+j1H5Lbfnecrpa+Nf1XEi2mZUz/qIe4b7oJtDXi8/m85bN69HJOXr2i9Z+0PVVuW36n5x6V8Z/Yw640s+t5nQlpGfOPAdX2XPI5d+iP6wDJ8YFdvfRc/bOkR31jKpXHx2eb7J91kd7yaMOseb9w6Vp7PO9YyFUWeMM6pvfC7mhBXoI78z1SnyfDPLvqoyRp1nmNieZeAqRlUxV+Ssz3vvdSWm/paJ87ruuipsyTGmssfI3X4zWSMVTFNOlD1PNjbK+OeKsmI6b/J4mdTWp+TZ8jkfRXXEwgz0lPXZx9z7PruqOhdNYlqMZR2qeHe1N33OQdYYVeWyiG3l/rKeKteS2/UhXDdP885CMaWcPqbzaBJTOt1ViqnPjOqJmSzxcbfWtQ6iMNLPv6tx5om8fxh1niUu/GA5mMalq3lQnQ+25PmtspnlDxdRrwupaw/7WCvb9VLpynrWlbkURp17zrcPjNT7rSopsr9cnX95+861PRN/bM8Y1/YZmd0//Fmnp0oxvRvk5yJ2TNqwArpdiY+Y4Kk8b1nzWGSOGZnFF29nK1ynHAuiraK6XUudPlRh2+ZM1d3xJnp9S9H3Op2OKu4Xn7qrfn9gVO+Za3oe6vrq7vWq3z24Py6Fkf59Qjd2VzZ0dnXC62x89iGi7xwuumebc8ZUZFum81BlvKoka+19+cLIPGZU7fizT3GlP29+xfEwKa864+oUk3OCkXp9maJtFeLaJqNisctTG9HFRh13XZaoxmd6T7sWRuZz5Ssus3zgIseI2F7WVbWYzFsVsWZzT5veHWVE1qWaj7w4cyWma6TyMW8cTJP37bvchqQ6Gx+YAlkfL/exPqIt0b5r4brz5lPVzqfo9GfZLRrTNmMx1cfIz5z5Pkd9ntfyvilCnv6y/tr2q+ouM/WhbPyX2UNFdPqSqs6pLLuucWXLZAw24/UlOt9dzqELn1z5Zrtv8uz6EF82ZlaEK2FU7vtpXcIsydJRhbCa+e8/D60bUcbXTMMzfRK24nKssvgYr+x71lh8iO/1tBl/LPGlIseAT6q2J8m/"}});var zc=V((FS,kf)=>{kf.exports={data:"AAACAAAAAACAOAAAAbYBSf7t2S1IBEEYBuDVDZ7FYrQMNsFiu3hgEYOI0SCXRIUrB8JhEZtgs5gEg1GMFk02m82oGI02m+9xezCOczv/uwv3fvAwc/PzfXOzcdqzWdaBDdiGPdiHdjE+DS3RNDuCfsn8idQ/g3OH3BdwKf0e96/gumTfYcncLdzBPTzAo+RZ+f0Cr/AG7/AJX4738x1wtz9FO5PX/50n6UXMNdfg/0lERERERERERERERETpdedHBvDRql4nq0cXtW9af98qdRby0Vvp8K4W0V+C5Xw0t4J2bfjeBp3cnEu1brnnCTYNa7eKdz91XP7WO9Lb4GqRb7cY6xbtAdqeVOsY/QGcevw/tb6OT85YhvfKYEx9CMuxKsKnrs+eJtVInVvHJ0eVYVvTZk2siFVLOCjb61PTZX3MdVWEyP7fjzpmMxdzTyq2Ebue6x61nXRGnzndWpf1an7dXmGYE4Y1ptqqKsK1nu26Ju0ty+maV2Rpvk+qnDZjKUIobUiesdAQE/jmCTmHmsskpFZsVYbtmXRcaoSGUPomunW2derQhDPFjtT1Q/eb8vnm990fq35oHVt11bU9m89c7DNI8Qs="}});var Gc=V((DS,Lf)=>{Lf.exports={data:"AAgOAAAAAABQfgAAAWMGnPntmm2IVUUYx+dyb2ezXXtBiSCLsKDIiKIIoYINciGwQHrRL2Ufii0qMsv7QVBuQkXhkmW5gksQRhRFSBslbkllHyy3L2XllkXrB3uhF0tQ0Kj+xzN3d3buzJx5PeesOw/8mDNvz/PMnOc8s/fs6asTcgu4A9wF+mjdV9kEa8FqsE5j/DPgeUX/JvASeBW8Bd4GO8CHYDcz7nPwFRgD4+An8Cf4AxwBx0G9QcjrYBt4p5HN/YDqGEF9F7gW3AC6wU1gCVgK5oDlYA8YBXvBGOgHD4FzwSo6fg24EDwBxsEB8Cu1N4ByI1gA/gbfo+0wyuO0vgW8DK5i+tN5tVOyMmUWrs9k6nNxPY/WL0B5Mb2+HOU14HrwY2Ny/CLUbwa3gzsZPT7ZGECnDvdiPQ+ARyhpWxPlWnr9JLfeAdS/43S8qNiTIdq3FeUb9HolOEj7h9H2LtgJPgHr0TZKx31Jy30C/T+g7aDCbpPiuj/fStrTNfQGioWIHr9z+z8iiAEfdg4zdo7Gex6JRCKRSCQSiUQikYrzL367HmLq8zV+yyYJIbOTzva5aJtH2y9CuYBebwdX4PoYyv107ELUe5PsPWBavzHJ3tMtFuhluTWnPxKJRCKRSCQy/TjQCKt/XX3y/+o6HPJs35XNszPO0WQf+FnQfsnpU+vLUN8MdgNyRtZ2Ncp7wBDYDn4D47MIOes0QpaADeDUWsYe5pql3k3IZd3iPp4H6bjnUI6Cf8B1PYQ0wWCPno5IJBKJnJx83eN2fi7NeYd0jKsvr+A7p3749KzkXd2Ap+9R7qfrflhz/ava45m2I7Rcw+lI3/WtAO+Bx5PsG6+nk+xbv7Q/fWe4gc7ZRPu3oNzK6Hktmfy2r036vc82On44yb4ZHKFzPkL5aZJ9f9hH7Y8y+nbheq9irWOpf0z/L8nUWPmL6TuK6/8Uuhpd6r3sRv8cbszZXZm981HOB5fS/itzdIlYyMzpTa85HYtRv422LTPQ/yjd+/SZudvCr1DcV5Iv6W+HFRXaB988Rte2ugJrHKTPW4vx5akK+MWzvoI++Sb9zvKFriy/m8wbwpxXQL/gDNs5Tb+zTPfiza6sHEa5A3w8jWLgM/j6BePvoOBcM33+v6Hj9zvuQ978lR5ihl/bedM0DvN4vwI+NOvy7/SbCkze51WVRfXaCaJEmdlSm+H4lKLsVE3Kvoe2950tZdcnu5T1rISQKuaHovZNZw26/aKxvn0tS6oUG1WWmbAPvtbGjzPU2WvgV4uoEc7PkQ77MhHoYu1K7YvOVhv7uuJ7/QpdLcKtX2ZPthc1A/tEcK/zbAW+/0rbnqRVAlPuk0gC5b5cv1Q+BbIp8kGnX2VjQmT7bLm/Hfp1RfZ3kAdpGZI3h2iMnZCC47ftj+351WJ06PTLxk6I7OxxWH8rd4RCRHHuKC1DbOaIdJyQAn4vuPpqS8d5HVJUfy+p2lXjihIbuya/L2wowkae3TJEZFfmjywnBshRSl9s9Je1v7z9kL7bPE9Fi+xMlf09Z3Ne2KxNFu8qf2x02ojMD9McrpOLivTX9j6F9l/HfmgbotKnfp9nJCHqffFho0hcxWRNhHTarUI8h94PGx28Pp2xrrZ8SehcFToPhvabvbZ5JkXx4etZd4lZfn0+pIz8oMoRunpsbPgUUZ4NaYu1qcr9vC+2MWsa8yHOPlOxfU7L9Fnkg0t+0dGdZ9O38PGr6nPxwzRWXUX0/JmSN09kU+WPyD8f4jM+ioo7lW1femzuv0iXqi5r8yGq/fBts+gca/M8+orLvOc0RJ7P88c0J/m2L/OFbzfVa5LrXc4WH2NsbJrulcsafa+T99lFVwgpwr7JMy47U3T0FiFF56uQuss4j3gfbOb68sUlB6vOjaLPtrbdkLp9nZmqffcpqnurk4NU+oq8rzIx2Xddv8tel+peydar+htBpIufH0J4O2XFCCu2z0GZayjyDMzLS6Z+yGK1Sjmk7RNbtq91zrXQfumeOb58MdGTtxdlngmyc09nTlmxqfMcmvij67OJXV3R3dOQsZznh6qfkOL80M3BuvtW1B7yY2R+FLG/MsnzVXd+aF9VuUk1xzWudPwy1edzz1x8t9UfyndbHTY2yxTdHOCa92zj3CR+Te6fjzX5Ftf9M/E1VC4yzVehROa77/h09cmXb6Zxm2c3pPjSH9bn/wE="}});var el=V((NS,Qc)=>{var $o=0,jc=-3;function Rr(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Rf(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Rr,this.dtree=new Rr}var Yc=new Rr,Zc=new Rr,_o=new Uint8Array(30),Fo=new Uint16Array(30),Xc=new Uint8Array(30),qc=new Uint16Array(30),Of=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wc=new Rr,Ve=new Uint8Array(320);function Jc(e,t,r,n){var o,i;for(o=0;o<r;++o)e[o]=0;for(o=0;o<30-r;++o)e[o+r]=o/r|0;for(i=n,o=0;o<30;++o)t[o]=i,i+=1<<e[o]}function $f(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}var Hc=new Uint16Array(16);function Ro(e,t,r,n){var o,i;for(o=0;o<16;++o)e.table[o]=0;for(o=0;o<n;++o)e.table[t[r+o]]++;for(e.table[0]=0,i=0,o=0;o<16;++o)Hc[o]=i,i+=e.table[o];for(o=0;o<n;++o)t[r+o]&&(e.trans[Hc[t[r+o]]++]=o)}function _f(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=e.tag&1;return e.tag>>>=1,t}function Me(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function Oo(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,o=0,i=e.tag;do n=2*n+(i&1),i>>>=1,++o,r+=t.table[o],n-=t.table[o];while(n>=0);return e.tag=i,e.bitcount-=o,t.trans[r+n]}function Ff(e,t,r){var n,o,i,s,a,c;for(n=Me(e,5,257),o=Me(e,5,1),i=Me(e,4,4),s=0;s<19;++s)Ve[s]=0;for(s=0;s<i;++s){var l=Me(e,3,0);Ve[Of[s]]=l}for(Ro(Wc,Ve,0,19),a=0;a<n+o;){var f=Oo(e,Wc);switch(f){case 16:var x=Ve[a-1];for(c=Me(e,2,3);c;--c)Ve[a++]=x;break;case 17:for(c=Me(e,3,3);c;--c)Ve[a++]=0;break;case 18:for(c=Me(e,7,11);c;--c)Ve[a++]=0;break;default:Ve[a++]=f;break}}Ro(t,Ve,0,n),Ro(r,Ve,n,o)}function Kc(e,t,r){for(;;){var n=Oo(e,t);if(n===256)return $o;if(n<256)e.dest[e.destLen++]=n;else{var o,i,s,a;for(n-=257,o=Me(e,_o[n],Fo[n]),i=Oo(e,r),s=e.destLen-Me(e,Xc[i],qc[i]),a=s;a<s+o;++a)e.dest[e.destLen++]=e.dest[a]}}}function Df(e){for(var t,r,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!==(~r&65535))return jc;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,$o}function Nf(e,t){var r=new Rf(e,t),n,o,i;do{switch(n=_f(r),o=Me(r,2,0),o){case 0:i=Df(r);break;case 1:i=Kc(r,Yc,Zc);break;case 2:Ff(r,r.ltree,r.dtree),i=Kc(r,r.ltree,r.dtree);break;default:i=jc}if(i!==$o)throw new Error("Data error")}while(!n);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}$f(Yc,Zc);Jc(_o,Fo,4,3);Jc(Xc,qc,2,1);_o[28]=0;Fo[28]=258;Qc.exports=Nf});var nl=V((US,rl)=>{var Uf=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,tl=(e,t,r)=>{let n=e[t];e[t]=e[r],e[r]=n},Vf=e=>{let t=e.length;for(let r=0;r<t;r+=4)tl(e,r,r+3),tl(e,r+1,r+2)},Mf=e=>{Uf&&Vf(e)};rl.exports={swap32LE:Mf}});var al=V((VS,sl)=>{var ol=el(),{swap32LE:Bf}=nl(),Uo=11,Bt=5,zf=Uo-Bt,Gf=65536>>Uo,Wf=1<<zf,Hf=Wf-1,wn=2,Kf=1<<Bt,Do=Kf-1,il=65536>>Bt,jf=1024>>Bt,Yf=il+jf,Zf=Yf,Xf=32,qf=Zf+Xf,Jf=1<<wn,No=class{constructor(t){let r=typeof t.readUInt32BE=="function"&&typeof t.slice=="function";if(r||t instanceof Uint8Array){let n;if(r)this.highStart=t.readUInt32LE(0),this.errorValue=t.readUInt32LE(4),n=t.readUInt32LE(8),t=t.slice(12);else{let o=new DataView(t.buffer);this.highStart=o.getUint32(0,!0),this.errorValue=o.getUint32(4,!0),n=o.getUint32(8,!0),t=t.subarray(12)}t=ol(t,new Uint8Array(n)),t=ol(t,new Uint8Array(n)),Bf(t),this.data=new Uint32Array(t.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=t)}get(t){let r;return t<0||t>1114111?this.errorValue:t<55296||t>56319&&t<=65535?(r=(this.data[t>>Bt]<<wn)+(t&Do),this.data[r]):t<=65535?(r=(this.data[il+(t-55296>>Bt)]<<wn)+(t&Do),this.data[r]):t<this.highStart?(r=this.data[qf-Gf+(t>>Uo)],r=this.data[r+(t>>Bt&Hf)],r=(r<<wn)+(t&Do),this.data[r]):this.data[this.data.length-Jf]}};sl.exports=No});var cl=V((Vo,Mo)=>{(function(e,t){typeof Vo=="object"&&typeof Mo<"u"?Mo.exports=t():typeof define=="function"&&define.amd?define(t):(function(){var r=e.Base64,n=t();n.noConflict=function(){return e.Base64=r,n},e.Meteor&&(Base64=n),e.Base64=n})()})(typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Vo,function(){"use strict";var e="3.7.7",t=e,r=typeof Buffer=="function",n=typeof TextDecoder=="function"?new TextDecoder:void 0,o=typeof TextEncoder=="function"?new TextEncoder:void 0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=Array.prototype.slice.call(i),a=(function(u){var b={};return u.forEach(function(se,Ie){return b[se]=Ie}),b})(s),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),f=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(u){return new Uint8Array(Array.prototype.slice.call(u,0))},x=function(u){return u.replace(/=/g,"").replace(/[+\/]/g,function(b){return b=="+"?"-":"_"})},S=function(u){return u.replace(/[^A-Za-z0-9\+\/]/g,"")},v=function(u){for(var b,se,Ie,Pt,ze="",xn=u.length%3,_r=0;_r<u.length;){if((se=u.charCodeAt(_r++))>255||(Ie=u.charCodeAt(_r++))>255||(Pt=u.charCodeAt(_r++))>255)throw new TypeError("invalid character found");b=se<<16|Ie<<8|Pt,ze+=s[b>>18&63]+s[b>>12&63]+s[b>>6&63]+s[b&63]}return xn?ze.slice(0,xn-3)+"===".substring(xn):ze},A=typeof btoa=="function"?function(u){return btoa(u)}:r?function(u){return Buffer.from(u,"binary").toString("base64")}:v,I=r?function(u){return Buffer.from(u).toString("base64")}:function(u){for(var b=4096,se=[],Ie=0,Pt=u.length;Ie<Pt;Ie+=b)se.push(l.apply(null,u.subarray(Ie,Ie+b)));return A(se.join(""))},g=function(u,b){return b===void 0&&(b=!1),b?x(I(u)):I(u)},P=function(u){if(u.length<2){var b=u.charCodeAt(0);return b<128?u:b<2048?l(192|b>>>6)+l(128|b&63):l(224|b>>>12&15)+l(128|b>>>6&63)+l(128|b&63)}else{var b=65536+(u.charCodeAt(0)-55296)*1024+(u.charCodeAt(1)-56320);return l(240|b>>>18&7)+l(128|b>>>12&63)+l(128|b>>>6&63)+l(128|b&63)}},E=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,$=function(u){return u.replace(E,P)},L=r?function(u){return Buffer.from(u,"utf8").toString("base64")}:o?function(u){return I(o.encode(u))}:function(u){return A($(u))},N=function(u,b){return b===void 0&&(b=!1),b?x(L(u)):L(u)},te=function(u){return N(u,!0)},me=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,ye=function(u){switch(u.length){case 4:var b=(7&u.charCodeAt(0))<<18|(63&u.charCodeAt(1))<<12|(63&u.charCodeAt(2))<<6|63&u.charCodeAt(3),se=b-65536;return l((se>>>10)+55296)+l((se&1023)+56320);case 3:return l((15&u.charCodeAt(0))<<12|(63&u.charCodeAt(1))<<6|63&u.charCodeAt(2));default:return l((31&u.charCodeAt(0))<<6|63&u.charCodeAt(1))}},Re=function(u){return u.replace(me,ye)},At=function(u){if(u=u.replace(/\s+/g,""),!c.test(u))throw new TypeError("malformed base64.");u+="==".slice(2-(u.length&3));for(var b,se="",Ie,Pt,ze=0;ze<u.length;)b=a[u.charAt(ze++)]<<18|a[u.charAt(ze++)]<<12|(Ie=a[u.charAt(ze++)])<<6|(Pt=a[u.charAt(ze++)]),se+=Ie===64?l(b>>16&255):Pt===64?l(b>>16&255,b>>8&255):l(b>>16&255,b>>8&255,b&255);return se},le=typeof atob=="function"?function(u){return atob(S(u))}:r?function(u){return Buffer.from(u,"base64").toString("binary")}:At,re=r?function(u){return f(Buffer.from(u,"base64"))}:function(u){return f(le(u).split("").map(function(b){return b.charCodeAt(0)}))},d=function(u){return re(p(u))},y=r?function(u){return Buffer.from(u,"base64").toString("utf8")}:n?function(u){return n.decode(re(u))}:function(u){return Re(le(u))},p=function(u){return S(u.replace(/[-_]/g,function(b){return b=="-"?"+":"/"}))},w=function(u){return y(p(u))},R=function(u){if(typeof u!="string")return!1;var b=u.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(b)||!/[^\s0-9a-zA-Z\-_]/.test(b)},k=function(u){return{value:u,enumerable:!1,writable:!0,configurable:!0}},H=function(){var u=function(b,se){return Object.defineProperty(String.prototype,b,k(se))};u("fromBase64",function(){return w(this)}),u("toBase64",function(b){return N(this,b)}),u("toBase64URI",function(){return N(this,!0)}),u("toBase64URL",function(){return N(this,!0)}),u("toUint8Array",function(){return d(this)})},j=function(){var u=function(b,se){return Object.defineProperty(Uint8Array.prototype,b,k(se))};u("toBase64",function(b){return g(this,b)}),u("toBase64URI",function(){return g(this,!0)}),u("toBase64URL",function(){return g(this,!0)})},we=function(){H(),j()},Ze={version:e,VERSION:t,atob:le,atobPolyfill:At,btoa:A,btoaPolyfill:v,fromBase64:w,toBase64:N,encode:N,encodeURI:te,encodeURL:te,utob:$,btou:Re,decode:w,isValid:R,fromUint8Array:g,toUint8Array:d,extendString:H,extendUint8Array:j,extendBuiltins:we};return Ze.Base64={},Object.keys(Ze).forEach(function(u){return Ze.Base64[u]=Ze[u]}),Ze})});var ul=V((MS,ll)=>{var T=Mc(),Qf=Bc().data,ep=zc().data,tp=Gc().data,Bo=al(),zo=cl().Base64,rp=new Bo(zo.toUint8Array(Qf)),np=new Bo(zo.toUint8Array(ep)),op=new Bo(zo.toUint8Array(tp));function F(e,t){return(e&t)!==0}function ip(e,t,r){let n=t.length;for(let o=r;o+1<n;o++){let i=t[o+0],s=t[o+1];switch(e.gb9c){case 0:F(i,T.InCB_Consonant)&&(e.gb9c=1);break;case 1:F(i,T.InCB_Extend)?e.gb9c=1:F(i,T.InCB_Linker)?e.gb9c=2:e.gb9c=F(i,T.InCB_Consonant)?1:0;break;case 2:F(i,T.InCB_Extend|T.InCB_Linker)?e.gb9c=2:e.gb9c=F(i,T.InCB_Consonant)?1:0;break}switch(e.gb11){case 0:F(i,T.Extended_Pictographic)&&(e.gb11=1);break;case 1:F(i,T.Extend)?e.gb11=1:F(i,T.ZWJ)?e.gb11=2:e.gb11=F(i,T.Extended_Pictographic)?1:0;break;case 2:e.gb11=F(i,T.Extended_Pictographic)?1:0;break}switch(e.gb12){case 0:F(i,T.Regional_Indicator)?e.gb12=1:e.gb12=-1;break;case 1:F(i,T.Regional_Indicator)?e.gb12=0:e.gb12=-1;break}switch(e.gb13){case 0:F(i,T.Regional_Indicator)||(e.gb13=1);break;case 1:F(i,T.Regional_Indicator)?e.gb13=2:e.gb13=1;break;case 2:e.gb13=1;break}if(!(F(i,T.CR)&&F(s,T.LF))){if(F(i,T.Control|T.CR|T.LF)||F(s,T.Control|T.CR|T.LF))return o+1-r;if(!(F(i,T.L)&&F(s,T.L|T.V|T.LV|T.LVT))&&!(F(i,T.LV|T.V)&&F(s,T.V|T.T))&&!(F(i,T.LVT|T.T)&&F(s,T.T))&&!F(s,T.Extend|T.ZWJ)&&!F(s,T.SpacingMark)&&!F(i,T.Prepend)&&!(F(s,T.InCB_Consonant)&&e.gb9c===2)&&!(F(s,T.Extended_Pictographic)&&e.gb11===2)&&!(F(s,T.Regional_Indicator)&&e.gb12===1)&&!(F(s,T.Regional_Indicator)&&e.gb13===2))return o+1-r}}return n-r}ll.exports=function(t){let r=[],n=[0],o=[];for(let s=0;s<t.length;){let a=t.codePointAt(s);o.push(rp.get(a)|np.get(a)|op.get(a)),s+=a>65535?2:1,n.push(s)}let i={gb9c:0,gb11:0,gb12:0,gb13:0};for(let s=0;s<o.length;){let a=ip(i,o,s),c=n[s],l=n[s+a];r.push(t.slice(c,l)),s+=a}return r}});var $p={};_l($p,{default:()=>Op});module.exports=Fl($p);var Be=require("@raycast/api");var sr=require("@raycast/api"),Qa=require("react");var Pe=require("@raycast/api");var Ta=require("@raycast/api");var Dr=require("react"),jo=(0,Dr.createContext)(null),O=()=>{let e=(0,Dr.useContext)(jo);if(e==null)throw new Error("useSelectVaultItem must be used within a VaultItemContext.Provider");return e},Yo=jo;var nr=require("@raycast/api");var Xe=require("@raycast/api"),kt=require("react/jsx-runtime"),Dl=e=>{let{description:t,onConfirm:r}=e;function n(o){r(o.password)}return(0,kt.jsxs)(Xe.Form,{navigationTitle:"Confirmation Required",actions:(0,kt.jsx)(Xe.ActionPanel,{children:(0,kt.jsx)(Xe.Action.SubmitForm,{title:"Confirm",onSubmit:n})}),children:[(0,kt.jsx)(Xe.Form.Description,{title:"Confirmation Required for",text:t}),(0,kt.jsx)(Xe.Form.PasswordField,{autoFocus:!0,id:"password",title:"Master Password"})]})},Zo=Dl;var rr=require("@raycast/api"),ut=require("react");var _=require("@raycast/api"),Sr=require("react");var Gt=require("@raycast/api");var Oe={VISA:"Visa",MASTERCARD:"Mastercard",AMEX:"Amex",DISCOVER:"Discover",DINERS_CLUB:"Diners Club",JCB:"JCB",MAESTRO:"Maestro",UNION_PAY:"UnionPay",RU_PAY:"RuPay",OTHER:"Other"};var Xo="https://bitwarden.com",ur="HIDDEN-VALUE",M={PASSWORD_OPTIONS:"bw-generate-password-options",PASSWORD_ONE_TIME_WARNING:"bw-generate-password-warning-accepted",SESSION_TOKEN:"sessionToken",REPROMPT_HASH:"sessionRepromptHash",SERVER_URL:"cliServer",LAST_ACTIVITY_TIME:"lastActivityTime",VAULT_LOCK_REASON:"vaultLockReason",VAULT_FAVORITE_ORDER:"vaultFavoriteOrder",VAULT_LAST_STATUS:"lastVaultStatus"},Lt={TIMEOUT:"Vault timed out due to inactivity",MANUAL:"Manually locked by the user",SYSTEM_LOCK:"Screen was locked",SYSTEM_SLEEP:"System went to sleep",CLI_UPDATED:"Bitwarden has been updated. Please login again."},Wt=["1","2","3","4","5","6","7","8","9","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","+","-",".",","],Rt={ALL:"all",NO_FOLDER:"no-folder"},be={IV:"iv",VAULT:"vault",CURRENT_FOLDER_ID:"currentFolderId",SEND_TYPE_FILTER:"sendTypeFilter",CLI_VERSION:"cliVersion"},ve={1:Gt.Icon.Globe,3:Gt.Icon.CreditCard,4:Gt.Icon.Person,2:Gt.Icon.Document,5:Gt.Icon.Key};var Dt=require("react");var X=require("@raycast/api");var vs=require("node:buffer"),Cs=ne(require("node:path"),1),Wn=ne(require("node:child_process"),1),mr=ne(require("node:process"),1),Ts=ne(Ui(),1);function On(e){let t=typeof e=="string"?`
`:10,r=typeof e=="string"?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}var dr=ne(require("node:process"),1),jt=ne(require("node:path"),1),Vi=ne(require("node:url"),1);function Ur(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}function lu(e={}){let{cwd:t=dr.default.cwd(),path:r=dr.default.env[Ur()],execPath:n=dr.default.execPath}=e,o,i=t instanceof URL?Vi.default.fileURLToPath(t):t,s=jt.default.resolve(i),a=[];for(;o!==s;)a.push(jt.default.join(s,"node_modules/.bin")),o=s,s=jt.default.resolve(s,"..");return a.push(jt.default.resolve(i,n,"..")),[...a,r].join(jt.default.delimiter)}function Mi({env:e=dr.default.env,...t}={}){e={...e};let r=Ur({env:e});return t.path=e[r],e[r]=lu(t),e}var uu=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let o=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!du(o,i)&&n||Object.defineProperty(e,r,i)},du=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},fu=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},pu=(e,t)=>`/* Wrapped ${e}*/
${t}`,mu=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),hu=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),gu=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,o=pu.bind(null,n,t.toString());Object.defineProperty(o,"name",hu),Object.defineProperty(e,"toString",{...mu,value:o})};function $n(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let o of Reflect.ownKeys(t))uu(e,t,o,r);return fu(e,t),gu(e,t,n),e}var Vr=new WeakMap,Bi=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,o=e.displayName||e.name||"<anonymous>",i=function(...s){if(Vr.set(i,++n),n===1)r=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${o}\` can only be called once`);return r};return $n(i,e),Vr.set(i,n),i};Bi.callCount=e=>{if(!Vr.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Vr.get(e)};var zi=Bi;var Yi=require("node:os");var Gi=function(){let e=Hi-Wi+1;return Array.from({length:e},yu)},yu=function(e,t){return{name:`SIGRT${t+1}`,number:Wi+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Wi=34,Hi=64;var ji=require("node:os");var Ki=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var _n=function(){let e=Gi();return[...Ki,...e].map(wu)},wu=function({name:e,number:t,description:r,action:n,forced:o=!1,standard:i}){let{signals:{[e]:s}}=ji.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:n,forced:o,standard:i}};var bu=function(){let e=_n();return Object.fromEntries(e.map(Su))},Su=function({name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}){return[e,{name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}]},Zi=bu(),Eu=function(){let e=_n(),t=65,r=Array.from({length:t},(n,o)=>xu(o,e));return Object.assign({},...r)},xu=function(e,t){let r=Iu(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},Iu=function(e,t){let r=t.find(({name:n})=>Yi.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},mm=Eu();var vu=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:o,exitCode:i,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${o})`:i!==void 0?`failed with exit code ${i}`:"failed",Fn=({stdout:e,stderr:t,all:r,error:n,signal:o,exitCode:i,command:s,escapedCommand:a,timedOut:c,isCanceled:l,killed:f,parsed:{options:{timeout:x}}})=>{i=i===null?void 0:i,o=o===null?void 0:o;let S=o===void 0?void 0:Zi[o].description,v=n&&n.code,I=`Command ${vu({timedOut:c,timeout:x,errorCode:v,signal:o,signalDescription:S,exitCode:i,isCanceled:l})}: ${s}`,g=Object.prototype.toString.call(n)==="[object Error]",P=g?`${I}
${n.message}`:I,E=[P,t,e].filter(Boolean).join(`
`);return g?(n.originalMessage=n.message,n.message=E):n=new Error(E),n.shortMessage=P,n.command=s,n.escapedCommand=a,n.exitCode=i,n.signal=o,n.signalDescription=S,n.stdout=e,n.stderr=t,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=l,n.killed=f&&!c,n};var Mr=["stdin","stdout","stderr"],Cu=e=>Mr.some(t=>e[t]!==void 0),Xi=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return Mr.map(n=>e[n]);if(Cu(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Mr.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,Mr.length);return Array.from({length:r},(n,o)=>t[o])};var ns=ne(require("node:os"),1),os=ne(rs(),1),Tu=1e3*5,is=(e,t="SIGTERM",r={})=>{let n=e(t);return Au(e,t,r,n),n},Au=(e,t,r,n)=>{if(!Pu(t,r,n))return;let o=Lu(r),i=setTimeout(()=>{e("SIGKILL")},o);i.unref&&i.unref()},Pu=(e,{forceKillAfterTimeout:t},r)=>ku(e)&&t!==!1&&r,ku=e=>e===ns.default.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Lu=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Tu;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},ss=(e,t)=>{e.kill()&&(t.isCanceled=!0)},Ru=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},as=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let o,i=new Promise((a,c)=>{o=setTimeout(()=>{Ru(e,r,c)},t)}),s=n.finally(()=>{clearTimeout(o)});return Promise.race([i,s])},cs=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},ls=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;let o=(0,os.default)(()=>{e.kill()});return n.finally(()=>{o()})};function us(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}var Bn=ne(ps(),1),gs=ne(hs(),1),ys=(e,t)=>{t!==void 0&&(us(t)?t.pipe(e.stdin):e.stdin.end(t))},ws=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=(0,gs.default)();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},Vn=async(e,t)=>{if(!(!e||t===void 0)){e.destroy();try{return await t}catch(r){return r.bufferedData}}},Mn=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t?(0,Bn.default)(e,{encoding:t,maxBuffer:n}):Bn.default.buffer(e,{maxBuffer:n})},bs=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:i},s)=>{let a=Mn(e,{encoding:n,buffer:o,maxBuffer:i}),c=Mn(t,{encoding:n,buffer:o,maxBuffer:i}),l=Mn(r,{encoding:n,buffer:o,maxBuffer:i*2});try{return await Promise.all([s,a,c,l])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},Vn(e,a),Vn(t,c),Vn(r,l)])}};var Vu=(async()=>{})().constructor.prototype,Mu=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Vu,e)]),zn=(e,t)=>{for(let[r,n]of Mu){let o=typeof t=="function"?(...i)=>Reflect.apply(n.value,t(),i):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}return e},Ss=e=>new Promise((t,r)=>{e.on("exit",(n,o)=>{t({exitCode:n,signal:o})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})});var Es=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Bu=/^[\w.-]+$/,zu=/"/g,Gu=e=>typeof e!="string"||Bu.test(e)?e:`"${e.replace(zu,'\\"')}"`,xs=(e,t)=>Es(e,t).join(" "),Is=(e,t)=>Es(e,t).map(r=>Gu(r)).join(" ");var Wu=1e3*1e3*100,Hu=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:o})=>{let i=t?{...mr.default.env,...e}:e;return r?Mi({env:i,cwd:n,execPath:o}):i},Ku=(e,t,r={})=>{let n=Ts.default._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:Wu,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||mr.default.cwd(),execPath:mr.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=Hu(r),r.stdio=Xi(r),mr.default.platform==="win32"&&Cs.default.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},Gn=(e,t,r)=>typeof t!="string"&&!vs.Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?On(t):t;function As(e,t,r){let n=Ku(e,t,r),o=xs(e,t),i=Is(e,t);cs(n.options);let s;try{s=Wn.default.spawn(n.file,n.args,n.options)}catch(v){let A=new Wn.default.ChildProcess,I=Promise.reject(Fn({error:v,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return zn(A,I)}let a=Ss(s),c=as(s,n.options,a),l=ls(s,n.options,c),f={isCanceled:!1};s.kill=is.bind(null,s.kill.bind(s)),s.cancel=ss.bind(null,s,f);let S=zi(async()=>{let[{error:v,exitCode:A,signal:I,timedOut:g},P,E,$]=await bs(s,n.options,l),L=Gn(n.options,P),N=Gn(n.options,E),te=Gn(n.options,$);if(v||A!==0||I!==null){let me=Fn({error:v,exitCode:A,signal:I,stdout:L,stderr:N,all:te,command:o,escapedCommand:i,parsed:n,timedOut:g,isCanceled:f.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:s.killed});if(!n.options.reject)return me;throw me}return{command:o,escapedCommand:i,exitCode:0,stdout:L,stderr:N,all:te,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return ys(s,n.options.input),s.all=ws(s,n.options),zn(s,S)}var Ee=require("fs");var ju=require("@raycast/api"),ks=require("crypto");var Ps="foobarbazzybaz";function Ls(e){return Object.entries(e).flatMap(([t,r])=>{switch(typeof r){case"boolean":return r?[`--${t}`]:[];case"string":return[`--${t}`,r];default:return[]}})}function Hn(e){return new Promise((t,r)=>{(0,ks.pbkdf2)(e,Ps,1e5,64,"sha512",(n,o)=>{if(n!=null){r(n);return}t(o.toString("hex"))})})}var hr=require("@raycast/api");var Yu={IMMEDIATELY:"0",ONE_MINUTE:"60000",FIVE_MINUTES:"300000",FIFTEEN_MINUTES:"900000",THIRTY_MINUTES:"1800000",ONE_HOUR:"3600000",FOUR_HOURS:"14400000",EIGHT_HOURS:"28800000",ONE_DAY:"86400000",NEVER:"-1",SYSTEM_LOCK:"-2",SYSTEM_SLEEP:"-3"},fe=Object.entries(Yu).reduce((e,[t,r])=>(e[t]=parseInt(r),e),{});var Rs={[fe.IMMEDIATELY]:"Immediately",[fe.ONE_MINUTE]:"1 Minute",[fe.FIVE_MINUTES]:"5 Minutes",[fe.FIFTEEN_MINUTES]:"15 Minutes",[fe.THIRTY_MINUTES]:"30 Minutes",[fe.ONE_HOUR]:"1 Hour",[fe.FOUR_HOURS]:"4 Hours",[fe.EIGHT_HOURS]:"8 Hours",[fe.ONE_DAY]:"1 Day"},qe={cardholderName:"Cardholder name",brand:"Brand",number:"Number",expMonth:"Expiration month",expYear:"Expiration year",code:"Security code (CVV)"},Je={title:"Title",firstName:"First name",middleName:"Middle name",lastName:"Last name",username:"Username",company:"Company",ssn:"Social Security number",passportNumber:"Passport number",licenseNumber:"License number",email:"Email",phone:"Phone",address1:"Address 1",address2:"Address 2",address3:"Address 3",city:"City / Town",state:"State / Province",postalCode:"Zip / Postal code",country:"Country"},Qe={1:"Login",3:"Card",4:"Identity",2:"Secure Note",5:"SSH Key"};function Kr(){let{serverUrl:e}=(0,hr.getPreferenceValues)();return!e||e==="bitwarden.com"||e==="https://bitwarden.com"?void 0:e}var Zu={search:"transientCopySearch","generate-password":"transientCopyGeneratePassword","generate-password-quick":"transientCopyGeneratePasswordQuick"};function q(e){let t=Zu[hr.environment.commandName],r=(0,hr.getPreferenceValues)()[t];return r==="never"?!1:r==="always"?!0:r==="passwords"?e==="password":!0}function Os(e){return Rs[e]}var $e=class extends Error{constructor(t,r){super(t),this.stack=r}},qt=class extends $e{constructor(t,r){super(t,r)}};var et=class extends qt{constructor(t,r){super(t??"Bitwarden CLI not found",r),this.name="InstalledCLINotFoundError",this.stack=r}},_t=class extends $e{constructor(t,r){super(t??"Failed to load vault items",r),this.name="FailedToLoadVaultItemsError"}},jr=class extends qt{constructor(t,r){super(t??"Vault is locked",r),this.name="VaultIsLockedError"}},gr=class extends $e{constructor(t,r){super(t??"Not logged in",r),this.name="NotLoggedInError"}},Ft=class extends qt{constructor(t,r){super(t??"Failed do download Bitwarden CLI",r),this.name="EnsureCliBinError"}},Yr=class extends $e{constructor(t,r){super(t??"Premium status is required to use this feature",r),this.name="PremiumFeatureError"}},yr=class extends $e{constructor(t,r){super(t??"This Send has a is protected by a password",r),this.name="SendNeedsPasswordError"}},wr=class extends $e{constructor(t,r){super(t??"The password you entered is invalid",r),this.name="SendInvalidPasswordError"}};function tt(e,t){try{return e()}catch{return t}}function Kn(e){if(e instanceof qt)return e.message}var Zr=e=>{if(e){if(typeof e=="string")return e;if(e instanceof Error){let{message:t,name:r}=e;return e.stack?e.stack:`${r}: ${t}`}return String(e)}};var at=require("path"),ct=require("fs/promises");var Ge=require("fs"),Jr=require("fs/promises"),Vs=require("path"),Ms=ne(Us());function Qr(e){return new Promise((t,r)=>{let n=setInterval(()=>{if(!(0,Ge.existsSync)(e))return;(0,Ge.statSync)(e).isFile()&&(clearInterval(n),t())},300);setTimeout(()=>{clearInterval(n),r(new Error(`File ${e} not found.`))},5e3)})}async function Bs(e,t){let r=new Ms.default.async({file:e});(0,Ge.existsSync)(t)||(0,Ge.mkdirSync)(t,{recursive:!0}),await r.extract(null,t),await r.close()}async function zs(e,t){let r=!1;try{let n=await(0,Jr.readdir)(t);for await(let o of n)o.startsWith(e)&&await tt(async()=>{await(0,Jr.unlink)((0,Vs.join)(t,o)),r=!0})}catch{return!1}return r}function Gs(...e){for(let t of e)tt(()=>(0,Ge.unlinkSync)(t))}var er=require("fs"),ro=ne(require("http")),en=ne(require("https"));var eo=require("@raycast/api");var Ws=require("@raycast/api"),qu={logs:new Map,set:(e,t)=>{Qt.logs.set(new Date,{message:e,error:t})},clear:()=>Qt.logs.clear(),toString:()=>{let e="";return Qt.logs.forEach((t,r)=>{e.length>0&&(e+=`

`),e+=`[${r.toISOString()}] ${t.message}`,t.error&&(e+=`: ${Zr(t.error)}`)}),e}},Qt=Object.freeze(qu),h=(e,t,r)=>{let{captureToRaycast:n=!1}=r??{},o=Array.isArray(e)?e.filter(Boolean).join(" "):e||"Captured exception";Qt.set(o,t),eo.environment.isDevelopment?console.error(o,t):n&&(0,Ws.captureException)(t)},Hs=(...e)=>{eo.environment.isDevelopment&&console.debug(...e)};var Ks=require("fs"),js=require("crypto");function to(e){try{return(0,js.createHash)("sha256").update((0,Ks.readFileSync)(e)).digest("hex")}catch{return null}}function no(e,t,r){let{onProgress:n,sha256:o}=r??{};return new Promise((i,s)=>{let a=new URL(e),c=a.protocol==="https:"?en.default:ro.default,l=new(c===en.default?en.default:ro.default).Agent({keepAlive:!1}),f=0,x=c.get(a.href,{agent:l},S=>{if(S.statusCode&&S.statusCode>=300&&S.statusCode<400){x.destroy(),S.destroy();let E=S.headers.location;if(!E){s(new Error("Redirect response without location header"));return}if(++f>=10){s(new Error("Too many redirects"));return}no(E,t,r).then(i).catch(s);return}if(S.statusCode!==200){s(new Error(`Response status ${S.statusCode}: ${S.statusMessage}`));return}let v=parseInt(S.headers["content-length"]||"0",10);if(v===0){s(new Error("Invalid file size"));return}let A=(0,er.createWriteStream)(t,{autoClose:!0}),I=0,g=()=>{x.destroy(),S.destroy(),A.close()},P=E=>{g(),s(E)};S.on("data",E=>{I+=E.length;let $=Math.floor(I/v*100);n?.($)}),A.on("finish",async()=>{try{await Qr(t),o&&await Ju(t,o),i()}catch(E){s(E)}finally{g()}}),A.on("error",E=>{h(`File stream error while downloading ${e}`,E),(0,er.unlink)(t,()=>P(E))}),S.on("error",E=>{h(`Response error while downloading ${e}`,E),(0,er.unlink)(t,()=>P(E))}),x.on("error",E=>{h(`Request error while downloading ${e}`,E),(0,er.unlink)(t,()=>P(E))}),S.pipe(A)})})}function Ju(e,t){return new Promise((r,n)=>{let o=to(e);if(!o)return n(new Error(`Could not generate hash for file ${e}.`));if(o===t)return r();let i=setInterval(()=>{to(e)===t&&(clearInterval(i),clearTimeout(s),r())},1e3),s=setTimeout(()=>{clearInterval(i),n(new Error(`Hash did not match, expected ${t.substring(0,7)}, got ${o.substring(0,7)}.`))},5e3)})}function Ys(e,t){return{...e,...t,file:t.file?{...e.file,...t.file}:e.file,text:t.text?{...e.text,...t.text}:e.text}}var Zs=require("@raycast/api"),pe=new Zs.Cache({namespace:"bw-cache"});var Y=process.platform==="darwin"?"macos":"windows";var{supportPath:st}=X.environment,Qu="5",tn=(()=>{let e=(0,at.join)(st,`bw-bin-download-error-${Qu}.log`);return{logError:t=>tt(()=>(0,Ee.writeFileSync)(e,t?.message??"Unexpected error")),clearError:()=>tt(()=>(0,Ee.unlinkSync)(e)),hasError:()=>tt(()=>(0,Ee.existsSync)(e),!1)}})(),Se={version:"2025.11.0",get sha256(){return Y==="windows"?"0484bae6306762881678097406d6bf00a58e291720dbc7d62f044e5f4d8286ed":process.arch==="arm64"?"59eac955be7b15bfc21c81101a194a9fbba32f48a61154b4f4b6e007efab6fd6":"213108a65eeb7294ffcd7303f8fe5308dc2af970735aefeb4d23fc9753a2ac01"},downloadPage:"https://github.com/bitwarden/clients/releases",path:{get downloadedBin(){return(0,at.join)(st,Se.binFilenameVersioned)},get installedBin(){return Y==="windows"?"C:\\ProgramData\\chocolatey\\bin\\bw.exe":process.arch==="arm64"?"/opt/homebrew/bin/bw":"/usr/local/bin/bw"},get bin(){return tn.hasError()?this.installedBin:this.downloadedBin}},get binFilename(){return Y==="windows"?"bw.exe":"bw"},get binFilenameVersioned(){let e=`bw-${this.version}`;return Y==="windows"?`${e}.exe`:`${e}`},get downloadUrl(){let e="";return Y==="macos"&&(e=process.arch==="arm64"?"-arm64":""),`${this.downloadPage}/download/cli-v${this.version}/bw-${Y}${e}-${this.version}.zip`}},rn=class{constructor(t){this.actionListeners=new Map;this.preferences=(0,X.getPreferenceValues)();this.wasCliUpdated=!1;this.showToast=async t=>{if(this.toastInstance){let r={message:this.toastInstance.message,title:this.toastInstance.title,primaryAction:this.toastInstance.primaryAction,secondaryAction:this.toastInstance.secondaryAction};return t.style&&(this.toastInstance.style=t.style),this.toastInstance.message=t.message,this.toastInstance.title=t.title,this.toastInstance.primaryAction=t.primaryAction,this.toastInstance.secondaryAction=t.secondaryAction,await this.toastInstance.show(),Object.assign(this.toastInstance,{restore:async()=>{await this.showToast(r)}})}else{let r=await(0,X.showToast)(t);return Object.assign(r,{restore:()=>r.hide()})}};let{cliPath:r,clientId:n,clientSecret:o,serverCertsPath:i}=this.preferences,s=Kr();this.toastInstance=t,this.cliPath=r||Se.path.bin,this.env={BITWARDENCLI_APPDATA_DIR:st,BW_CLIENTSECRET:o.trim(),BW_CLIENTID:n.trim(),PATH:(0,at.dirname)(process.execPath),...s&&i?{NODE_EXTRA_CA_CERTS:i}:{}},this.initPromise=(async()=>{await this.ensureCliBinary(),this.retrieveAndCacheCliVersion(),await this.checkServerUrl(s)})()}async ensureCliBinary(){if(this.checkCliBinIsReady(this.cliPath))return;if(this.cliPath===this.preferences.cliPath||this.cliPath===Se.path.installedBin)throw new et(`Bitwarden CLI not found at ${this.cliPath}`);tn.hasError()&&tn.clearError();let t=await zs("bw-",st),r=await this.showToast({title:`${t?"Updating":"Initializing"} Bitwarden CLI`,style:X.Toast.Style.Animated,primaryAction:{title:"Open Download Page",onAction:()=>(0,X.open)(Se.downloadPage)}}),o=(0,at.join)(st,"bw.zip");try{try{r.message="Downloading...",await no(Se.downloadUrl,o,{onProgress:i=>r.message=`Downloading ${i}%`,sha256:Se.sha256})}catch(i){throw r.title="Failed to download Bitwarden CLI",i}try{r.message="Extracting...",await Bs(o,st);let i=(0,at.join)(st,Se.binFilename);await(0,ct.rename)(i,this.cliPath).catch(()=>null),await Qr(this.cliPath),await(0,ct.chmod)(this.cliPath,"755"),await(0,ct.rm)(o,{force:!0}),pe.set(be.CLI_VERSION,Se.version),this.wasCliUpdated=!0;let s=(0,at.join)(st,"data.json");await tt(()=>(0,ct.unlink)(s))}catch(i){throw r.title="Failed to extract Bitwarden CLI",i}await r.hide()}catch(i){throw r.message=i instanceof Ft?i.message:"Please try again",r.style=X.Toast.Style.Failure,Gs(o,this.cliPath),X.environment.isDevelopment||tn.logError(i),i instanceof Error?new Ft(i.message,i.stack):i}finally{await r.restore()}}async retrieveAndCacheCliVersion(){try{let{error:t,result:r}=await this.getVersion();t||pe.set(be.CLI_VERSION,r)}catch(t){h("Failed to retrieve and cache cli version",t,{captureToRaycast:!0})}}checkCliBinIsReady(t){try{return(0,Ee.existsSync)(this.cliPath)?((0,Ee.accessSync)(t,Ee.constants.X_OK),!0):!1}catch{return(0,Ee.chmodSync)(t,"755"),!0}}setSessionToken(t){this.env={...this.env,BW_SESSION:t}}clearSessionToken(){delete this.env.BW_SESSION}withSession(t){return this.tempSessionToken=t,this}async initialize(){return await this.initPromise,this}async checkServerUrl(t){let r=await X.LocalStorage.getItem(M.SERVER_URL);if(!t||r===t)return;let n=await this.showToast({style:X.Toast.Style.Animated,title:"Switching server...",message:"Bitwarden server preference changed"});try{try{await this.logout()}catch{}await this.exec(["config","server",t||Xo],{resetVaultTimeout:!1}),await X.LocalStorage.setItem(M.SERVER_URL,t),n.style=X.Toast.Style.Success,n.title="Success",n.message="Bitwarden server changed"}catch(o){n.style=X.Toast.Style.Failure,n.title="Failed to switch server",o instanceof Error?n.message=o.message:n.message="Unknown error occurred"}finally{await n.restore()}}async exec(t,r){let{abortController:n,input:o="",resetVaultTimeout:i,env:s}=r??{},a=this.env;this.tempSessionToken&&(a={...a,BW_SESSION:this.tempSessionToken},this.tempSessionToken=void 0),s&&(a={...a,...s});let c=await As(this.cliPath,t,{input:o,env:a,signal:n?.signal});if(this.isPromptWaitingForMasterPassword(c))throw await this.lock(),new jr;return i&&await X.LocalStorage.setItem(M.LAST_ACTIVITY_TIME,new Date().toISOString()),c}async getVersion(){try{let{stdout:t}=await this.exec(["--version"],{resetVaultTimeout:!1});return{result:t}}catch(t){h("Failed to get cli version",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async login(){try{return await this.exec(["login","--apikey"],{resetVaultTimeout:!0}),await this.saveLastVaultStatus("login","unlocked"),await this.callActionListeners("login"),{result:void 0}}catch(t){h("Failed to login",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async logout(t){let{reason:r,immediate:n=!1}=t??{};try{return n&&await this.handlePostLogout(r),await this.exec(["logout"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("logout","unauthenticated"),n||await this.handlePostLogout(r),{result:void 0}}catch(o){h("Failed to logout",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async lock(t){let{reason:r,checkVaultStatus:n=!1,immediate:o=!1}=t??{};try{if(o&&await this.callActionListeners("lock",r),n){let{error:i,result:s}=await this.status();if(i)throw i;if(s.status==="unauthenticated")return{error:new gr("Not logged in")}}return await this.exec(["lock"],{resetVaultTimeout:!1}),this.clearSessionToken(),await this.saveLastVaultStatus("lock","locked"),o||await this.callActionListeners("lock",r),{result:void 0}}catch(i){h("Failed to lock vault",i);let{error:s}=await this.handleCommonErrors(i);if(!s)throw i;return{error:s}}}async unlock(t){try{this.clearSessionToken();let n=(await this.exec(["unlock","--passwordenv","BW_PASSWORD","--raw"],{resetVaultTimeout:!0,env:{BW_PASSWORD:t}})).stdout;if(!n.trim())throw new Error("Invalid session token");return this.setSessionToken(n),await this.saveLastVaultStatus("unlock","unlocked"),await this.callActionListeners("unlock",t,n),{result:n}}catch(r){h("Failed to unlock vault",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async sync(){try{return await this.exec(["sync"],{resetVaultTimeout:!0}),{result:void 0}}catch(t){h("Failed to sync vault",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async getItem(t){try{let{stdout:r}=await this.exec(["get","item",t],{resetVaultTimeout:!0});return{result:JSON.parse(r)}}catch(r){h("Failed to get item",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async listItems(){try{let{stdout:t}=await this.exec(["list","items"],{resetVaultTimeout:!0});return{result:JSON.parse(t).filter(n=>!!n.name)}}catch(t){h("Failed to list items",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createLoginItem(t){try{let{error:r,result:n}=await this.getTemplate("item");if(r)throw r;let{error:o,result:i}=await this.getTemplate("item.login");if(o)throw o;n.name=t.name,n.type=1,n.folderId=t.folderId||null,n.login=i,n.notes=null,i.username=t.username||null,i.password=t.password,i.totp=null,i.fido2Credentials=void 0,t.uri&&(i.uris=[{match:null,uri:t.uri}]);let{result:s,error:a}=await this.encode(JSON.stringify(n));if(a)throw a;let{stdout:c}=await this.exec(["create","item",s],{resetVaultTimeout:!0});return{result:JSON.parse(c)}}catch(r){h("Failed to create login item",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async listFolders(){try{let{stdout:t}=await this.exec(["list","folders"],{resetVaultTimeout:!0});return{result:JSON.parse(t)}}catch(t){h("Failed to list folder",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createFolder(t){try{let{error:r,result:n}=await this.getTemplate("folder");if(r)throw r;n.name=t;let{result:o,error:i}=await this.encode(JSON.stringify(n));if(i)throw i;return await this.exec(["create","folder",o],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to create folder",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async getTotp(t){try{let{stdout:r}=await this.exec(["get","totp",t],{resetVaultTimeout:!0});return{result:r}}catch(r){h("Failed to get TOTP",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async status(){try{let{stdout:t}=await this.exec(["status"],{resetVaultTimeout:!1});return{result:JSON.parse(t)}}catch(t){h("Failed to get status",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async checkLockStatus(){try{return await this.exec(["unlock","--check"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("checkLockStatus","unlocked"),"unlocked"}catch(t){return h("Failed to check lock status",t),t.stderr==="Vault is locked."?(await this.saveLastVaultStatus("checkLockStatus","locked"),"locked"):(await this.saveLastVaultStatus("checkLockStatus","unauthenticated"),"unauthenticated")}}async getTemplate(t){try{let{stdout:r}=await this.exec(["get","template",t],{resetVaultTimeout:!0});return{result:JSON.parse(r)}}catch(r){h("Failed to get template",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async encode(t){try{let{stdout:r}=await this.exec(["encode"],{input:t,resetVaultTimeout:!1});return{result:r}}catch(r){h("Failed to encode",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async generatePassword(t,r){let n=t?Ls(t):[],{stdout:o}=await this.exec(["generate",...n],{abortController:r,resetVaultTimeout:!1});return o}async listSends(){try{let{stdout:t}=await this.exec(["send","list"],{resetVaultTimeout:!0});return{result:JSON.parse(t)}}catch(t){h("Failed to list sends",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createSend(t){try{let{error:r,result:n}=await this.getTemplate(t.type===0?"send.text":"send.file");if(r)throw r;let o=Ys(n,t),{result:i,error:s}=await this.encode(JSON.stringify(o));if(s)throw s;let{stdout:a}=await this.exec(["send","create",i],{resetVaultTimeout:!0});return{result:JSON.parse(a)}}catch(r){h("Failed to create send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async editSend(t){try{let{result:r,error:n}=await this.encode(JSON.stringify(t));if(n)throw n;let{stdout:o}=await this.exec(["send","edit",r],{resetVaultTimeout:!0});return{result:JSON.parse(o)}}catch(r){h("Failed to delete send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async deleteSend(t){try{return await this.exec(["send","delete",t],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to delete send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async removeSendPassword(t){try{return await this.exec(["send","remove-password",t],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to remove send password",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async receiveSendInfo(t,r){try{let{stdout:n,stderr:o}=await this.exec(["send","receive",t,"--obj"],{resetVaultTimeout:!0,input:r?.password});return!n&&/Invalid password/i.test(o)?{error:new wr}:!n&&/Send password/i.test(o)?{error:new yr}:{result:JSON.parse(n)}}catch(n){let o=n.stderr;if(/Invalid password/gi.test(o))return{error:new wr};if(/Send password/gi.test(o))return{error:new yr};h("Failed to receive send obj",n);let{error:i}=await this.handleCommonErrors(n);if(!i)throw n;return{error:i}}}async receiveSend(t,r){try{let{savePath:n,password:o}=r??{},i=["send","receive",t];n&&i.push("--output",n);let{stdout:s}=await this.exec(i,{resetVaultTimeout:!0,input:o});return{result:s}}catch(n){h("Failed to receive send",n);let{error:o}=await this.handleCommonErrors(n);if(!o)throw n;return{error:o}}}async saveLastVaultStatus(t,r){await X.LocalStorage.setItem(M.VAULT_LAST_STATUS,r)}async getLastSavedVaultStatus(){let t=await X.LocalStorage.getItem(M.VAULT_LAST_STATUS);return t||(await this.status()).result?.status}isPromptWaitingForMasterPassword(t){return!!(t.stderr&&t.stderr.includes("Master password"))}async handlePostLogout(t){this.clearSessionToken(),await this.callActionListeners("logout",t)}async handleCommonErrors(t){let r=t.stderr;return r?/not logged in/i.test(r)?(await this.handlePostLogout(),{error:new gr("Not logged in")}):/Premium status/i.test(r)?{error:new Yr}:{}:{}}setActionListener(t,r){let n=this.actionListeners.get(t);return n&&n.size>0?n.add(r):this.actionListeners.set(t,new Set([r])),this}removeActionListener(t,r){let n=this.actionListeners.get(t);return n&&n.size>0&&n.delete(r),this}async callActionListeners(t,...r){let n=this.actionListeners.get(t);if(n&&n.size>0)for(let o of n)try{await o?.(...r)}catch(i){if(h(`Error calling bitwarden action listener for ${t}`,i),t==="unlock")throw i}}};var Xs=require("@raycast/api"),Js=require("react/jsx-runtime"),qs=()=>(0,Js.jsx)(Xs.Form,{isLoading:!0});var nn=require("react");function ed(e,t){let r=(0,nn.useRef)(!1);(0,nn.useEffect)(()=>{r.current||t!==void 0&&!t||(r.current=!0,e())},[t])}var _e=ed;var on=require("react/jsx-runtime"),Qs=(0,Dt.createContext)(null),ea=({children:e,loadingFallback:t=(0,on.jsx)(qs,{})})=>{let[r,n]=(0,Dt.useState)(),[o,i]=(0,Dt.useState)();_e(()=>{new rn().initialize().then(n).catch(s)});function s(a){if(a instanceof et)i(a);else throw a}return o?(0,on.jsx)(br,{error:o}):r?(0,on.jsx)(Qs.Provider,{value:r,children:e}):t},ue=()=>{let e=(0,Dt.useContext)(Qs);if(e==null)throw new Error("useBitwarden must be used within a BitwardenProvider");return e};function ta(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function ra(e,t){try{let r=e,n;return r?.stderr?n=r.stderr:e instanceof Error?n=`${e.name}: ${e.message}`:ta(e)?n=JSON.stringify(e):n=`${e}`,n?t?.omitSensitiveValue?td(n,t.omitSensitiveValue):n:""}catch{return""}}function td(e,t){return e.replace(new RegExp(t,"i"),"[REDACTED]")}var Fe=require("@raycast/api"),sn=require("react");function rd(){let e=ue(),[t,r]=(0,sn.useState)(null);(0,sn.useEffect)(()=>{e.status().then(({error:s,result:a})=>{s||r(a)}).catch(()=>{})},[]);let n=!!Kr(),o="...",i="...";if(t){let{status:s,userEmail:a,serverUrl:c}=t;o=s=="unauthenticated"?"\u274C Logged out":`\u{1F512} Locked (${a})`,c?i=c||"":(!c&&n||c&&!n)&&(0,Fe.confirmAlert)({icon:Fe.Icon.ExclamationMark,title:"Restart Required",message:"Bitwarden server URL preference has been changed since the extension was opened.",primaryAction:{title:"Close Extension"},dismissAction:{title:"Close Raycast",style:Fe.Alert.ActionStyle.Cancel}}).then(l=>{l?(0,Fe.popToRoot)():(0,Fe.closeMainWindow)()})}return{userMessage:o,serverMessage:i,shouldShowServer:n}}var na=rd;var ln=require("@raycast/api");var B=ne(require("react")),z=require("@raycast/api");var oa=Object.prototype.hasOwnProperty;function an(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&an(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(oa.call(e,r)&&++n&&!oa.call(t,r)||!(r in t)||!an(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var Nt=ne(require("node:fs")),cn=ne(require("node:path"));var aa=require("react/jsx-runtime");function nd(e){let t=(0,B.useRef)(e),r=(0,B.useRef)(0);return an(e,t.current)||(t.current=e,r.current+=1),(0,B.useMemo)(()=>t.current,[r.current])}function Ae(e){let t=(0,B.useRef)(e);return t.current=e,t}function od(e,t){let r=e instanceof Error?e.message:String(e);return(0,z.showToast)({style:z.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??ia(e),secondaryAction:t?.primaryAction?ia(e):void 0})}var ia=e=>{let t=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,Nt.readFileSync)((0,cn.join)(z.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let o=z.environment.isDevelopment||t,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:o?"Copy Logs":"Report Error",onAction(s){s.hide(),o?z.Clipboard.copy(i):(0,z.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function ca(e,t,r){let n=(0,B.useRef)(0),[o,i]=(0,B.useState)({isLoading:!0}),s=Ae(e),a=Ae(r?.abortable),c=Ae(t||[]),l=Ae(r?.onError),f=Ae(r?.onData),x=Ae(r?.onWillExecute),S=Ae(r?.failureToastOptions),v=Ae(o.data),A=(0,B.useRef)(null),I=(0,B.useRef)({page:0}),g=(0,B.useRef)(!1),P=(0,B.useRef)(!0),E=(0,B.useRef)(50),$=(0,B.useCallback)(()=>(a.current&&(a.current.current?.abort(),a.current.current=new AbortController),++n.current),[a]),L=(0,B.useCallback)((...le)=>{let re=$();x.current?.(le),i(p=>({...p,isLoading:!0}));let d=id(s.current)(...le);function y(p){return p.name=="AbortError"||re===n.current&&(l.current?l.current(p):z.environment.launchType!==z.LaunchType.Background&&od(p,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(w){w.hide(),A.current?.(...c.current||[])}},...S.current}),i({error:p,isLoading:!1})),p}return typeof d=="function"?(g.current=!0,d(I.current).then(({data:p,hasMore:w,cursor:R})=>(re===n.current&&(I.current&&(I.current.cursor=R,I.current.lastItem=p?.[p.length-1]),f.current&&f.current(p,I.current),w&&(E.current=p.length),P.current=w,i(k=>I.current.page===0?{data:p,isLoading:!1}:{data:(k.data||[])?.concat(p),isLoading:!1})),p),p=>(P.current=!1,y(p)))):(g.current=!1,d.then(p=>(re===n.current&&(f.current&&f.current(p),i({data:p,isLoading:!1})),p),y))},[f,l,c,s,i,A,x,I,S,$]);A.current=L;let N=(0,B.useCallback)(()=>{I.current={page:0};let le=c.current||[];return L(...le)},[L,c]),te=(0,B.useCallback)(async(le,re)=>{let d;try{if(re?.optimisticUpdate){$(),typeof re?.rollbackOnError!="function"&&re?.rollbackOnError!==!1&&(d=structuredClone(v.current?.value));let y=re.optimisticUpdate;i(p=>({...p,data:y(p.data)}))}return await le}catch(y){if(typeof re?.rollbackOnError=="function"){let p=re.rollbackOnError;i(w=>({...w,data:p(w.data)}))}else re?.optimisticUpdate&&re?.rollbackOnError!==!1&&i(p=>({...p,data:d}));throw y}finally{re?.shouldRevalidateAfter!==!1&&(z.environment.launchType===z.LaunchType.Background||z.environment.commandMode==="menu-bar"?await N():N())}},[N,v,i,$]),me=(0,B.useCallback)(()=>{I.current.page+=1;let le=c.current||[];L(...le)},[I,c,L]);(0,B.useEffect)(()=>{I.current={page:0},r?.execute!==!1?L(...t||[]):$()},[nd([t,r?.execute,L]),a,I]),(0,B.useEffect)(()=>()=>{$()},[$]);let ye=r?.execute!==!1?o.isLoading:!1,Re={...o,isLoading:ye},At=g.current?{pageSize:E.current,hasMore:P.current,onLoadMore:me}:void 0;return{...Re,revalidate:N,mutate:te,pagination:At}}function id(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function sd(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function ad(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}var cd=Symbol("cache without namespace"),sa=new Map;function la(e,t,r){let n=r?.cacheNamespace||cd,o=sa.get(n)||sa.set(n,new z.Cache({namespace:r?.cacheNamespace})).get(n);if(!o)throw new Error("Missing cache");let i=Ae(e),s=Ae(t),a=(0,B.useSyncExternalStore)(o.subscribe,()=>{try{return o.get(i.current)}catch(x){console.error("Could not get Cache data:",x);return}}),c=(0,B.useMemo)(()=>{if(typeof a<"u"){if(a==="undefined")return;try{return JSON.parse(a,ad)}catch(x){return console.warn("The cached data is corrupted",x),s.current}}else return s.current},[a,s]),l=Ae(c),f=(0,B.useCallback)(x=>{let S=typeof x=="function"?x(l.current):x;if(typeof S>"u")o.set(i.current,"undefined");else{let v=JSON.stringify(S,sd);o.set(i.current,v)}return S},[o,i,l]);return[c,f]}function ua(e,t){let{data:r,revalidate:n,isLoading:o}=ca(()=>ln.LocalStorage.getItem(e));return[r??t,{isLoading:o,set:async a=>{await ln.LocalStorage.setItem(e,a),await n()},remove:async()=>{await ln.LocalStorage.removeItem(e),await n()}}]}var J=require("react/jsx-runtime"),ld=({pendingAction:e=Promise.resolve()})=>{let t=ue(),{userMessage:r,serverMessage:n,shouldShowServer:o}=na(),[i,s]=(0,Sr.useState)(!1),[a,c]=(0,Sr.useState)(),[l,f]=(0,Sr.useState)(!1),[x,S]=(0,Sr.useState)(""),[v,{remove:A}]=ua(M.VAULT_LOCK_REASON);async function I(){if(x.length!==0)try{s(!0),c(void 0),await e;let L=await(0,_.showToast)({title:"Validating...",message:"Please wait",style:_.Toast.Style.Animated}),{error:N,result:te}=await t.status();if(N)throw N;if(te.status==="unauthenticated")try{L.title="Logging in...";let{error:ye}=await t.login();if(ye)throw ye}catch(ye){return g(ye,{title:"Failed to log in",fallbackMessage:`Please check your ${o?"Server URL, ":""}API Key and Secret.`})}L.title="Unlocking vault...";let{error:me}=await t.unlock(x);if(me)return g(me,{title:"Failed to unlock vault",fallbackMessage:"Please check your credentials"});L.title="Vault unlocked",L.style=_.Toast.Style.Success,L.message=void 0,await A()}catch(L){await g(L,{title:"Failed to unlock vault",fallbackMessage:"Please check your credentials"})}finally{s(!1)}}async function g(L,N){let{title:te,fallbackMessage:me}=N,{displayableError:ye=me,treatedError:Re}=dd(L,x);c(Re),await(0,_.showToast)({title:te,message:ye,style:_.Toast.Style.Failure,primaryAction:{title:"Copy Error",onAction:P}}),h("Failed to unlock vault",L)}let P=async()=>{a&&(await _.Clipboard.copy(a),await(0,_.showToast)(_.Toast.Style.Success,"Error copied to clipboard"))},E=_.Form.PasswordField,$="password";return l&&(E=_.Form.TextField,$="plainPassword"),(0,J.jsxs)(_.Form,{actions:(0,J.jsxs)(_.ActionPanel,{children:[!i&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(_.Action.SubmitForm,{icon:_.Icon.LockUnlocked,title:"Submit",onSubmit:I}),(0,J.jsx)(_.Action,{icon:l?_.Icon.EyeDisabled:_.Icon.Eye,title:l?"Hide Password":"Show Password",onAction:()=>f(L=>!L),shortcut:{macOS:{key:"e",modifiers:["opt"]},Windows:{key:"e",modifiers:["alt"]}}})]}),a&&(0,J.jsx)(_.Action,{onAction:P,title:"Copy Last Error",icon:_.Icon.Bug,style:_.Action.Style.Destructive}),(0,J.jsx)(Er,{})]}),children:[o&&(0,J.jsx)(_.Form.Description,{title:"Server URL",text:n}),(0,J.jsx)(_.Form.Description,{title:"Vault Status",text:r}),(0,J.jsx)(E,{id:$,title:"Master Password",value:x,onChange:S,ref:L=>L?.focus()}),(0,J.jsx)(_.Form.Description,{title:"",text:`Press ${Y==="macos"?"\u2325":"Alt"}+E to ${l?"hide":"show"} password`}),!!v&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(_.Form.Description,{title:"\u2139\uFE0F",text:v}),(0,J.jsx)(ud,{})]})]})};function ud(){let e=(0,_.getPreferenceValues)().repromptIgnoreDuration,t=Os(e);return t?(0,J.jsx)(_.Form.Description,{title:"",text:`Timeout is set to ${t}, this can be configured in the extension settings`}):null}function dd(e,t){let r=ra(e,{omitSensitiveValue:t}),n;return/Invalid master password/i.test(r)?n="Invalid master password":/Invalid API Key/i.test(r)&&(n="Invalid Client ID or Secret"),{displayableError:n,treatedError:r}}var da=ld;var fa=require("@raycast/api"),pa=require("react/jsx-runtime"),tr=()=>(0,pa.jsx)(fa.List,{searchBarPlaceholder:"Search vault",isLoading:!0});var ma=require("react"),fd={token:void 0,passwordHash:void 0,isLoading:!0,isLocked:!1,isAuthenticated:!1},ha=()=>(0,ma.useReducer)((e,t)=>{switch(t.type){case"loadState":{let{type:r,...n}=t;return{...e,...n}}case"lock":return{...e,token:void 0,passwordHash:void 0,isLoading:!1,isLocked:!0};case"unlock":return{...e,token:t.token,passwordHash:t.passwordHash,isLocked:!1,isAuthenticated:!0};case"logout":return{...e,token:void 0,passwordHash:void 0,isLocked:!0,isAuthenticated:!1,isLoading:!1};case"vaultTimeout":return{...e,isLocked:!0};case"finishLoadingSavedState":{if(!e.token||!e.passwordHash)throw new Error("Missing required fields: token, passwordHash");let r=!!e.token;return{...e,isLoading:!1,isLocked:!r,isAuthenticated:r}}case"failLoadingSavedState":return{...e,isLoading:!1,isLocked:!0};default:return e}},fd);var Te=require("@raycast/api");var ga=require("child_process"),ya=require("util");var pd=(0,ya.promisify)(ga.exec),xr={getSavedSession:()=>Promise.all([Te.LocalStorage.getItem(M.SESSION_TOKEN),Te.LocalStorage.getItem(M.REPROMPT_HASH),Te.LocalStorage.getItem(M.LAST_ACTIVITY_TIME),Te.LocalStorage.getItem(M.VAULT_LAST_STATUS)]),clearSession:async()=>{await Promise.all([Te.LocalStorage.removeItem(M.SESSION_TOKEN),Te.LocalStorage.removeItem(M.REPROMPT_HASH)])},saveSession:async(e,t)=>{await Promise.all([Te.LocalStorage.setItem(M.SESSION_TOKEN,e),Te.LocalStorage.setItem(M.REPROMPT_HASH,t)])},logoutClearSession:async()=>{await Promise.all([Te.LocalStorage.removeItem(M.SESSION_TOKEN),Te.LocalStorage.removeItem(M.REPROMPT_HASH),Te.LocalStorage.removeItem(M.LAST_ACTIVITY_TIME)])}},wa=e=>Ea(e,t=>Sa(t,"handleUnlockResult")),ba=e=>Ea(e,t=>Sa(t,"sleep 0"));function Sa(e,t){return pd(`log show --style syslog --predicate "process == 'loginwindow'" --info --last ${e}h | grep "${t}" | tail -n 1`)}async function Ea(e,t){let r=await xa(t);return r?new Date(r).getTime()>e.getTime():!0}var md=2,hd=5;async function xa(e,t=1,r=0){try{if(r>hd){Hs("Max retry attempts reached to get last screen lock time");return}let{stdout:n,stderr:o}=await e(t),[i,s]=n?.split(" ")??[];if(o||!i||!s)return xa(e,t+md,r+1);let a=new Date(`${i}T${s}`);return!a||a.toString()==="Invalid Date"?void 0:a}catch(n){h("Failed to get last screen lock time",n);return}}var un=require("react/jsx-runtime"),Ia=(0,ut.createContext)(null);function oo(e){let{children:t,loadingFallback:r=(0,un.jsx)(tr,{}),unlock:n}=e,o=ue(),[i,s]=ha(),a=(0,ut.useRef)(Promise.resolve());_e(c,o);async function c(){try{o.setActionListener("lock",f).setActionListener("unlock",l).setActionListener("logout",x);let[g,P,E,$]=await xr.getSavedSession();if(!g||!P)throw new lt;if(s({type:"loadState",token:g,passwordHash:P}),o.setSessionToken(g),o.wasCliUpdated)throw new Ir(Lt.CLI_UPDATED);if($==="locked")throw new lt;if($==="unauthenticated")throw new Ir;if(E){let L=new Date(E),N=+(0,rr.getPreferenceValues)().repromptIgnoreDuration;if(Y==="macos"&&N===fe.SYSTEM_LOCK){if(await wa(L))throw new lt(Lt.SYSTEM_LOCK)}else if(Y==="macos"&&N===fe.SYSTEM_SLEEP){if(await ba(L))throw new lt(Lt.SYSTEM_SLEEP)}else if(N!==fe.NEVER){let te=Date.now()-L.getTime();if(N===fe.IMMEDIATELY||te>=N)throw new lt(Lt.TIMEOUT)}}s({type:"finishLoadingSavedState"})}catch(g){g instanceof lt?a.current=o.lock({reason:g.message,immediate:!0,checkVaultStatus:!0}):g instanceof Ir?a.current=o.logout({reason:g.message,immediate:!0}):(a.current=o.lock({immediate:!0}),s({type:"failLoadingSavedState"}),h("Failed to bootstrap session state",g))}}async function l(g,P){let E=await Hn(g);await xr.saveSession(P,E),await rr.LocalStorage.removeItem(M.VAULT_LOCK_REASON),s({type:"unlock",token:P,passwordHash:E})}async function f(g){await gd(),g&&await rr.LocalStorage.setItem(M.VAULT_LOCK_REASON,g),s({type:"lock"})}async function x(g){await yd(),g&&await rr.LocalStorage.setItem(M.VAULT_LOCK_REASON,g),s({type:"logout"})}async function S(g){return await Hn(g)===i.passwordHash}let v=(0,ut.useMemo)(()=>({token:i.token,isLoading:i.isLoading,isAuthenticated:i.isAuthenticated,isLocked:i.isLocked,active:!i.isLoading&&i.isAuthenticated&&!i.isLocked,confirmMasterPassword:S}),[i,S]);if(i.isLoading)return r;let A=i.isLocked||!i.isAuthenticated,I=i.token?t:null;return(0,un.jsx)(Ia.Provider,{value:v,children:A&&n?(0,un.jsx)(da,{pendingAction:a.current}):I})}async function gd(){await xr.clearSession()}async function yd(){await xr.logoutClearSession(),pe.clear()}function dn(){let e=(0,ut.useContext)(Ia);if(e==null)throw new Error("useSession must be used within a SessionProvider");return e}var lt=class extends Error{constructor(t){super(t)}},Ir=class extends Error{constructor(t){super(t)}};var Ca=require("react/jsx-runtime");function wd(e,t){let{description:r="Performing an action that requires the master password"}=t??{},n=dn(),{push:o,pop:i}=(0,nr.useNavigation)();async function s(a){if(!await n.confirmMasterPassword(a)){await(0,nr.showToast)(nr.Toast.Style.Failure,"Failed to unlock vault","Check your credentials");return}i(),setTimeout(e,1)}return()=>o((0,Ca.jsx)(Zo,{description:r,onConfirm:s}))}var va=wd;var Aa=require("react/jsx-runtime");function bd(e){let{repromptDescription:t,onAction:r,...n}=e,{reprompt:o}=O(),i=va(r,{description:t});return(0,Aa.jsx)(Ta.Action,{...n,onAction:o?i:r})}var W=bd;var ie=require("@raycast/api");var Pa=require("child_process"),ka=require("util");var io=require("fs"),La=require("path");var Ra=require("react/jsx-runtime"),Sd=(0,ka.promisify)(Pa.exec),{supportPath:Ed}=ie.environment,xd=()=>{let{clientId:e,clientSecret:t,fetchFavicons:r,generatePasswordQuickAction:n,repromptIgnoreDuration:o,serverCertsPath:i,serverUrl:s,shouldCacheVaultItems:a,transientCopyGeneratePassword:c,transientCopyGeneratePasswordQuick:l,transientCopySearch:f,windowActionOnCopy:x}=(0,ie.getPreferenceValues)();return{has_clientId:!!e,has_clientSecret:!!t,fetchFavicons:r,generatePasswordQuickAction:n,repromptIgnoreDuration:o,has_serverCertsPath:!!i,has_serverUrl:!!s,shouldCacheVaultItems:a,transientCopyGeneratePassword:c,transientCopyGeneratePasswordQuick:l,transientCopySearch:f,windowActionOnCopy:x}},he="N/A",dt=async(e,t=!0)=>{try{let r=e;Y==="windows"?r=`powershell -Command "${e}"`:r=`PATH="$PATH:${(0,La.dirname)(process.execPath)}" ${e}`;let{stdout:n}=await Sd(r,{env:{BITWARDENCLI_APPDATA_DIR:Ed}}),o=n.trim();return t?o.replace(/\n|\r/g,""):o}catch(r){return h(`Failed to execute command: ${e}`,r),he}},Id=()=>{try{let e=(0,ie.getPreferenceValues)().cliPath;return e?{type:"custom",path:e}:Se.path.bin===Se.path.downloadedBin?{type:"downloaded",path:Se.path.downloadedBin}:{type:"installed",path:Se.path.installedBin}}catch{return{type:he,path:he}}},vd=async()=>{try{let e="/opt/homebrew/bin/brew";if((0,io.existsSync)(e)||(e="/usr/local/bin/brew"),!(0,io.existsSync)(e))return{arch:he,version:he};let t=await dt(`${e} config`,!1);if(t===he)return{arch:he,version:he};let r=/HOMEBREW_PREFIX: (.+)/.exec(t)?.[1]||he,n=/HOMEBREW_VERSION: (.+)/.exec(t)?.[1]||he;return{arch:r!==he?r.includes("/opt/homebrew")?"arm64":"x86_64":he,version:n}}catch{return{arch:he,version:he}}};function Cd(){let e=async()=>{let t=await(0,ie.showToast)(ie.Toast.Style.Animated,"Collecting data...");try{let r=xd(),n=Id(),[o,i,s,a]=await Promise.all([...Y==="macos"?[dt("uname -m"),dt("sw_vers -productVersion"),dt("sw_vers -buildVersion")]:[dt("(Get-CimInstance Win32_OperatingSystem).OSArchitecture"),dt("(Get-CimInstance Win32_OperatingSystem).Caption"),dt("(Get-CimInstance Win32_OperatingSystem).Version")],dt(`${n.path} --version`)]),c={raycast:{version:ie.environment.raycastVersion},system:{arch:o,version:i,buildVersion:s},node:{arch:process.arch,version:process.version},cli:{type:n.type,version:a},preferences:r};if(Y==="macos"){let l=await vd();c.homebrew={arch:l.arch,version:l.version}}await ie.Clipboard.copy(JSON.stringify(c,null,2)),t.style=ie.Toast.Style.Success,t.title="Data copied to clipboard"}catch(r){t.style=ie.Toast.Style.Failure,t.title="Failed to collect bug report data",h("Failed to collect bug report data",r)}};return(0,Ra.jsx)(ie.Action,{title:"Collect Bug Report Data",icon:ie.Icon.Bug,onAction:e})}var vr=Cd;var Oa=require("@raycast/api"),$a=require("react/jsx-runtime"),so="https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...";function Td(){return(0,$a.jsx)(Oa.Action.OpenInBrowser,{title:"Open Bug Report",url:so})}var Cr=Td;var ae=require("@raycast/api");var _a=require("react/jsx-runtime");function Ad(){return(0,_a.jsx)(ae.Action,{onAction:async()=>{let t=Qt.toString();if(t.length===0)return(0,ae.showToast)(ae.Toast.Style.Success,"No errors to copy");await ae.Clipboard.copy(t),await(0,ae.showToast)(ae.Toast.Style.Success,"Errors copied to clipboard"),await(0,ae.confirmAlert)({title:"Be careful with this information",message:"Please be mindful of where you share this error log, as it may contain sensitive information. Always analyze it before sharing.",primaryAction:{title:"Got it",style:ae.Alert.ActionStyle.Default}})},title:"Copy Last Errors",icon:ae.Icon.CopyClipboard,style:ae.Action.Style.Regular})}var ao=Ad;var Na=require("@raycast/api");var Fa=require("react");var Pd=()=>{let e=pe.get(be.CLI_VERSION);return e?parseFloat(e):-1},Da=()=>{let[e,t]=(0,Fa.useState)(Pd);return _e(()=>{pe.subscribe((r,n)=>{n&&r===be.CLI_VERSION&&t(parseFloat(n)||-1)})}),e};var or=require("react/jsx-runtime");function Er(){let e=Da();return(0,or.jsxs)(Na.ActionPanel.Section,{title:`Debugging & Bug Reporting (CLI v${e})`,children:[(0,or.jsx)(ao,{}),(0,or.jsx)(Cr,{}),(0,or.jsx)(vr,{})]})}var Z=require("@raycast/api");var He=require("@raycast/api"),pt=require("react");var We=require("react");var Ba=require("react/jsx-runtime"),lo=(0,We.createContext)(null),kd=({children:e})=>{let t=(0,We.useRef)(new Map),r=i=>{i instanceof _t?t.current.forEach(s=>s(i)):t.current.forEach((s,a)=>{let c=i.find(l=>l.id===a);c&&s(c)})},n=(i,s)=>(t.current.set(i,s),()=>{t.current.delete(i)}),o=(0,We.useMemo)(()=>({listeners:t,publishItems:r,subscribeItem:n}),[]);return(0,Ba.jsx)(lo.Provider,{value:o,children:e})},Ua=()=>{let e=(0,We.useContext)(lo);if(e==null)throw new Error("useVaultItemPublisher must be used within a VaultListenersProvider");return e.publishItems},Va=()=>{let e=(0,We.useContext)(lo);if(e==null)throw new Error("useVaultItemSubscriber must be used within a VaultListenersProvider");return t=>{let r;return new Promise((n,o)=>{let i=e.subscribeItem(t,s=>{try{if(i(),s instanceof _t)throw s;n(s),clearTimeout(r)}catch(a){o(a)}});r=setTimeout(()=>{i(),o(new co)},15e3)})}},co=class extends Error{constructor(){super("Timed out waiting for item"),this.name="SubscriberTimeoutError"}},Ma=kd;var Ya=require("@raycast/api");function za(e){return e.map(t=>({object:t.object,id:t.id,organizationId:t.organizationId,folderId:t.folderId,type:t.type,name:t.name,revisionDate:t.revisionDate,creationDate:t.creationDate,deletedDate:t.deletedDate,favorite:t.favorite,reprompt:t.reprompt,collectionIds:t.collectionIds,secureNote:t.secureNote?{type:t.secureNote.type}:void 0,fields:Ld(t.fields),login:Rd(t.login),identity:Od(t.identity),card:$d(t.card),passwordHistory:_d(t.passwordHistory),notes:D(t.notes),sshKey:Fd(t.sshKey)}))}function Ga(e){return e.map(t=>({object:t.object,id:t.id,name:t.name}))}function Ld(e){return e?.map(t=>({name:t.name,value:D(t.value),type:t.type,linkedId:t.linkedId}))}function Rd(e){if(e)return{username:e.username,uris:e.uris,password:D(e.password),passwordRevisionDate:D(e.passwordRevisionDate),totp:D(e.totp)}}function Od(e){if(e)return{title:D(e.title),firstName:D(e.firstName),middleName:D(e.middleName),lastName:D(e.lastName),address1:D(e.address1),address2:D(e.address2),address3:D(e.address3),city:D(e.city),state:D(e.state),postalCode:D(e.postalCode),country:D(e.country),company:D(e.company),email:D(e.email),phone:D(e.phone),ssn:D(e.ssn),username:D(e.username),passportNumber:D(e.passportNumber),licenseNumber:D(e.licenseNumber)}}function $d(e){if(e)return{brand:e.brand,cardholderName:D(e.cardholderName),number:D(e.number),expMonth:D(e.expMonth),expYear:D(e.expYear),code:D(e.code)}}function _d(e){return e?.map(t=>({password:D(t.password),lastUsedDate:D(t.lastUsedDate)}))}function Fd(e){if(e)return{publicKey:e.publicKey,keyFingerprint:e.keyFingerprint,privateKey:D(e.privateKey)}}function D(e){return e&&ur}var Ha=require("@raycast/api"),ft=require("crypto"),Ka=require("react"),Wa="aes-256-cbc";function ja(){let{clientSecret:e}=(0,Ha.getPreferenceValues)(),t=(0,Ka.useMemo)(()=>Dd(e.trim()),[e]);return{encrypt:o=>{let i=(0,ft.randomBytes)(16),s=(0,ft.createCipheriv)(Wa,t,i),a=Buffer.concat([s.update(o),s.final()]);return{iv:i.toString("hex"),content:a.toString("hex")}},decrypt:(o,i)=>{let s=(0,ft.createDecipheriv)(Wa,t,Buffer.from(i,"hex"));return Buffer.concat([s.update(Buffer.from(o,"hex")),s.final()]).toString()}}}function Dd(e){return Buffer.from((0,ft.createHash)("sha256").update(e).digest("base64").slice(0,32))}function Nd(){let{encrypt:e,decrypt:t}=ja(),r=(0,Ya.getPreferenceValues)().shouldCacheVaultItems;return _e(()=>{pe.isEmpty||pe.clear()},!r),{getCachedVault:()=>{try{if(!r)throw new Ut;let i=pe.get(be.IV),s=pe.get(be.VAULT);if(!i||!s)throw new Ut;let a=t(s,i);return JSON.parse(a)}catch(i){return i instanceof Ut||h("Failed to decrypt cached vault",i),{items:[],folders:[]}}},cacheVault:(i,s)=>{try{if(!r)throw new Ut;let a=JSON.stringify({items:za(i),folders:Ga(s)}),c=e(a);pe.set(be.VAULT,c.content),pe.set(be.IV,c.iv)}catch(a){a instanceof Ut||h("Failed to cache vault",a)}}}}var Ut=class extends Error{},Za=Nd;var Ja=require("react/jsx-runtime"),Xa=(0,pt.createContext)(null);function Ud(){return{items:[],folders:[],isLoading:!0}}var{syncOnLaunch:Vd}=(0,He.getPreferenceValues)();function qa(e){let{children:t}=e,r=dn(),n=ue(),o=Ua(),{getCachedVault:i,cacheVault:s}=Za(),[a,c]=la(be.CURRENT_FOLDER_ID,null),[l,f]=(0,pt.useReducer)((g,P)=>({...g,...P}),{...Ud(),...i()});_e(()=>{Vd?S({isInitial:!0}):x()},r.active&&r.token);async function x(){try{f({isLoading:!0});let g=[],P=[];try{let[E,$]=await Promise.all([n.listItems(),n.listFolders()]);if(E.error)throw E.error;if($.error)throw $.error;g=E.result,P=$.result,g.sort(Bd)}catch(E){throw o(new _t),E}f({items:g,folders:P}),o(g),s(g,P)}catch(g){await(0,He.showToast)(He.Toast.Style.Failure,"Failed to load vault items",Kn(g)),h("Failed to load vault items",g)}finally{f({isLoading:!1})}}async function S(g){let{isInitial:P=!1}=g??{},E=await(0,He.showToast)({title:"Syncing vault...",message:P?"Background task":void 0,style:He.Toast.Style.Animated});try{await n.sync(),await x(),await E.hide()}catch($){await n.logout(),E.style=He.Toast.Style.Failure,E.title="Failed to sync vault",E.message=Kn($)}}function v(g){c(typeof g=="string"?g:g?.id)}function A(g){let P=typeof g=="function"?g(l):g;f(P),s(P.items,P.folders)}let I=(0,pt.useMemo)(()=>({...l,items:Md(l.items,a),isEmpty:l.items.length==0,isLoading:l.isLoading||r.isLoading,currentFolderId:a,syncItems:S,loadItems:x,setCurrentFolder:v,updateState:A}),[l,r.isLoading,a,S,x,v,A]);return(0,Ja.jsx)(Xa.Provider,{value:I,children:t})}function Md(e,t){return!t||t===Rt.ALL?e:t===Rt.NO_FOLDER?e.filter(r=>r.folderId===null):e.filter(r=>r.folderId===t)}function Bd(e,t){return e.favorite&&t.favorite?0:e.favorite?-1:1}var mt=()=>{let e=(0,pt.useContext)(Xa);if(e==null)throw new Error("useVault must be used within a VaultProvider");return e};var ir=require("react/jsx-runtime");function Tr(){let e=mt(),t=ue(),r=async()=>{let o=await(0,Z.showToast)({title:"Locking vault...",message:"Please wait",style:Z.Toast.Style.Animated});try{await t.lock({reason:Lt.MANUAL}),o.style=Z.Toast.Style.Success,o.title="Vault Locked",o.message=void 0}catch{o.style=Z.Toast.Style.Failure,o.title="Failed to lock vault",o.message=void 0}},n=async()=>{let o=await(0,Z.showToast)({title:"Logging out...",message:"Please wait",style:Z.Toast.Style.Animated});try{await t.logout(),o.style=Z.Toast.Style.Success,o.title="Logged Out",o.message=void 0}catch{o.style=Z.Toast.Style.Failure,o.title="Failed to logout",o.message=void 0}};return(0,ir.jsxs)(Z.ActionPanel.Section,{title:"Vault Actions",children:[(0,ir.jsx)(Z.Action,{title:"Sync Vault",shortcut:{macOS:{key:"r",modifiers:["opt"]},Windows:{key:"r",modifiers:["alt"]}},icon:Z.Icon.ArrowClockwise,onAction:e.syncItems}),(0,ir.jsx)(Z.Action,{icon:{source:"sf_symbols_lock.svg",tintColor:Z.Color.PrimaryText},title:"Lock Vault",shortcut:{macOS:{key:"l",modifiers:["opt","shift"]},Windows:{key:"l",modifiers:["alt","shift"]}},onAction:r}),(0,ir.jsx)(Z.Action,{style:Z.Action.Style.Destructive,title:"Logout",icon:Z.Icon.Logout,onAction:n})]})}var ht=require("react/jsx-runtime"),zd=`

`,uo="https://bitwarden.com/help/cli/#download-and-install",Gd=e=>`\`\`\`
${e}
\`\`\``,Wd=({error:e})=>{let t=Zr(e),r=(0,Pe.getPreferenceValues)().cliPath,n=e instanceof Ft,o=r||e instanceof et,i=[];if(o&&!n?i.push("# \u26A0\uFE0F Bitwarden CLI not found"):i.push("# \u{1F4A5} Whoops! Something went wrong"),n)i.push(`We couldn't download the [Bitwarden CLI](${uo}), you can always install it on your machine.`);else if(o){let s=r?` (${r})`:"";i.push(`We couldn't find the [Bitwarden CLI](${uo}) installed on your machine${s}.`)}else i.push(`The \`${Pe.environment.commandName}\` command crashed when we were not expecting it to.`);if(i.push("> Please read the `Setup` section in the [extension's description](https://www.raycast.com/jomifepe/bitwarden) to ensure that everything is properly configured."),i.push(`**Try restarting the command. If the issue persists, consider [reporting a bug on GitHub](${so}) to help us fix it.**`),t){let s=/incompatible architecture/gi.test(t);i.push(">## Technical details \u{1F913}",s&&`\u26A0\uFE0F We suspect that your Bitwarden CLI was installed using a version of NodeJS that's incompatible with your system architecture (e.g. x64 NodeJS on a M1/Apple Silicon Mac). Please make sure your have the correct versions of your software installed (e.g., ${Y==="macos"?"Homebrew, ":""}NodeJS, and Bitwarden CLI).`,Gd(t))}return(0,ht.jsx)(Pe.Detail,{markdown:i.filter(Boolean).join(zd),actions:(0,ht.jsxs)(Pe.ActionPanel,{children:[(0,ht.jsxs)(Pe.ActionPanel.Section,{title:"Bug Report",children:[(0,ht.jsx)(Cr,{}),(0,ht.jsx)(vr,{})]}),o&&(0,ht.jsx)(Pe.Action.OpenInBrowser,{title:"Open Installation Guide",url:uo})]})})},br=Wd;var fo=require("react/jsx-runtime"),Ar=class extends Qa.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}async componentDidCatch(t,r){t instanceof $e?(this.setState(n=>({...n,hasError:!0,error:t.message})),await(0,sr.showToast)(sr.Toast.Style.Failure,t.message)):(sr.environment.isDevelopment&&this.setState(n=>({...n,hasError:!0,error:t.message})),console.error("Error:",t,r))}render(){try{return this.state.hasError?(0,fo.jsx)(br,{error:this.state.error}):this.props.children}catch{return(0,fo.jsx)(br,{})}}};var Al=require("@raycast/api");var ee=require("@raycast/api");var ec=require("react"),fn=require("react/jsx-runtime"),Hd=e=>{let t=ec.Children.toArray(e.children);return e.reverse&&t.reverse(),(0,fn.jsx)(fn.Fragment,{children:t})},tc=Hd;var gt=require("@raycast/api");var pn=require("@raycast/api");function Kd(){let e=ue(),t=Va();async function r(o){let i=await e.getItem(o);if(i.error)throw i.error;return i.result}async function n(o,i=(a=>a),s){let a=i(o);if(!jd(a))return a;let c=s?await(0,pn.showToast)(pn.Toast.Style.Animated,s):void 0,l=i(await Promise.race([t(o.id),r(o.id)]));return await c?.hide(),l}return n}function jd(e){try{return typeof e=="object"?JSON.stringify(e).includes(ur):typeof e=="string"?e===ur:!1}catch{return!1}}var U=Kd;var ke=require("@raycast/api");var Vt=(e,t=!1)=>{let r=e.charAt(0).toUpperCase(),n=t?e.slice(1).toLowerCase():e.slice(1);return r+n};async function Q(e,t){let r=(0,ke.getPreferenceValues)().windowActionOnCopy,n=Vt(e,!0);r==="keepOpen"?await(0,ke.showToast)({title:n,message:t,style:ke.Toast.Style.Success}):r==="closeAndPopToRoot"?(await(0,ke.showHUD)(n),await(0,ke.popToRoot)()):await(0,ke.showHUD)(n)}var rc=require("react/jsx-runtime");function Yd(){let e=O(),t=U();if(!e.login?.password)return null;let r=async()=>{try{let n=await t(e,o=>o.login?.password,"Getting password...");n&&(await gt.Clipboard.copy(n,{transient:q("password")}),await Q("Copied password to clipboard"))}catch(n){await(0,gt.showToast)(gt.Toast.Style.Failure,"Failed to get password"),h("Failed to copy password",n)}};return(0,rc.jsx)(W,{title:"Copy Password",icon:gt.Icon.Key,onAction:r,repromptDescription:`Copying the password of <${e.name}>`})}var po=Yd;var yt=require("@raycast/api");var nc=require("@raycast/api"),mn=require("react");function Mt(){let[e,t]=(0,mn.useState)(void 0);return(0,mn.useEffect)(()=>{(0,nc.getFrontmostApplication)().then(r=>t(r.name)).catch(()=>t(void 0))},[]),e}var oc=require("react/jsx-runtime");function Zd(){let e=O(),t=U(),r=Xd();if(!e.login?.password)return null;let n=async()=>{try{let o=await t(e,i=>i.login?.password,"Getting password...");o&&await yt.Clipboard.paste(o)}catch(o){await(0,yt.showToast)(yt.Toast.Style.Failure,"Failed to get password"),h("Failed to paste password",o)}};return(0,oc.jsx)(W,{title:r,icon:yt.Icon.Window,onAction:n,repromptDescription:`Pasting the password of <${e.name}>`})}function Xd(){let e=Mt();return e?`Paste Password into ${e}`:"Paste Password"}var mo=Zd;var Ke=require("@raycast/api");var ic=require("react/jsx-runtime");function qd(){let e=ue(),t=O(),r=U();if(!t.login?.totp)return null;let n=async()=>{let o=await(0,Ke.showToast)(Ke.Toast.Style.Animated,"Getting TOTP code...");try{let i=await r(t,c=>c.id),{error:s,result:a}=await e.getTotp(i);if(s)throw s;await o?.hide(),await Ke.Clipboard.copy(a,{transient:q("other")}),await Q("Copied code to clipboard")}catch(i){o.message="Failed to get TOTP",o.style=Ke.Toast.Style.Failure,h("Failed to copy TOTP",i)}};return(0,ic.jsx)(W,{title:"Copy TOTP",icon:Ke.Icon.Clipboard,onAction:n,shortcut:{macOS:{key:"t",modifiers:["opt"]},Windows:{key:"t",modifiers:["alt"]}},repromptDescription:`Copying the TOTP of <${t.name}>`})}var ho=qd;var je=require("@raycast/api");var sc=require("react/jsx-runtime");function Jd(){let e=ue(),t=O(),r=U(),n=Mt();if(!t.login?.totp)return null;let o=async()=>{let i=await(0,je.showToast)(je.Toast.Style.Animated,"Getting TOTP code...");try{let s=await r(t,l=>l.id),{error:a,result:c}=await e.getTotp(s);if(a)throw a;await i?.hide(),await je.Clipboard.paste(c)}catch(s){i.message="Failed to get TOTP",i.style=je.Toast.Style.Failure,h("Failed to paste TOTP",s)}};return(0,sc.jsx)(W,{title:n?`Paste TOTP into ${n}`:"Paste TOTP",icon:je.Icon.Window,onAction:o,shortcut:{macOS:{key:"t",modifiers:["opt","shift"]},Windows:{key:"t",modifiers:["alt","shift"]}},repromptDescription:`Pasting the TOTP of <${t.name}>`})}var go=Jd;var De=require("@raycast/api");var ac=require("react/jsx-runtime");function Qd(){let e=O(),t=U();if(!e.login?.username)return null;let r=async()=>{try{let n=await t(e,o=>o.login?.username,"Getting username...");n&&(await De.Clipboard.copy(n,{transient:q("other")}),await Q("Copied username to clipboard"))}catch(n){await(0,De.showToast)(De.Toast.Style.Failure,"Failed to get username"),h("Failed to copy username",n)}};return(0,ac.jsx)(De.Action,{title:"Copy Username",icon:De.Icon.Person,onAction:r,shortcut:{macOS:{key:"u",modifiers:["opt"]},Windows:{key:"u",modifiers:["alt"]}}})}var yo=Qd;var wt=require("@raycast/api");var cc=require("react/jsx-runtime");function ef(){let e=O(),t=U(),r=Mt();if(!e.login?.username)return null;let n=async()=>{try{let o=await t(e,i=>i.login?.username,"Getting username...");o&&await wt.Clipboard.paste(o)}catch(o){await(0,wt.showToast)(wt.Toast.Style.Failure,"Failed to get username"),h("Failed to paste username",o)}};return(0,cc.jsx)(W,{title:r?`Paste Username into ${r}`:"Paste Username",icon:wt.Icon.Window,onAction:n,repromptDescription:`Pasting the username of <${e.name}>`,shortcut:{macOS:{key:"u",modifiers:["cmd","opt"]},Windows:{key:"u",modifiers:["ctrl","alt"]}}})}var wo=ef;var Ne=require("@raycast/api");var uc=require("react/jsx-runtime");function tf(){let e=O(),t=U();return lc(e)?(0,uc.jsx)(Ne.Action,{title:"Open in Browser",onAction:async()=>{try{let n=await t(e,lc,"Getting URL...");n&&await(0,Ne.open)(n)}catch(n){await(0,Ne.showToast)(Ne.Toast.Style.Failure,"Failed to get URL"),h("Failed to open URL in browser",n)}},icon:Ne.Icon.Globe,shortcut:{macOS:{key:"o",modifiers:["opt"]},Windows:{key:"o",modifiers:["alt"]}}}):null}function lc(e){return e.login?.uris?.[0]?.uri}var bo=tf;var St=require("@raycast/api");var rf={1:"01 - January",2:"02 - February",3:"03 - March",4:"04 - April",5:"05 - May",6:"06 - June",7:"07 - July",8:"08 - August",9:"09 - September",10:"10 - October",11:"11 - November",12:"12 - December"},nf={expMonth:e=>rf[e]??e},fc=(e,t)=>nf[e]?.(t)??t;function pc(e,t){return`# \u{1F4B3} ${e}
&nbsp;
| ${Y==="macos"?"\u2325":"Alt"}	**Field** | **Value** |
| --- | --- |
${Object.entries(t).map(([r,n],o)=>{if(!n)return null;let i=qe[r],s=Wt[o];return`| ${s?`${s}.`:"&nbsp;"}	**${i}** | ${fc(r,n)} |`}).filter(Boolean).join(`
`)}
`}function mc(e){return Object.entries(e).map(([t,r])=>r?`${qe[t]}: ${fc(t,r)}`:null).filter(Boolean).join(`
`)}var dc=Object.keys(qe);function hn([e],[t]){let r=dc.indexOf(Array.isArray(e)?e[0]:e),n=dc.indexOf(Array.isArray(t)?t[0]:t);return r-n}var Ye="https://vault.bitwarden.com/images",of={[Oe.VISA]:`${Ye}/visa-light.png`,[Oe.MASTERCARD]:`${Ye}/mastercard-light.png`,[Oe.AMEX]:`${Ye}/amex-light.png`,[Oe.DISCOVER]:`${Ye}/discover-light.png`,[Oe.DINERS_CLUB]:`${Ye}/diners_club-light.png`,[Oe.JCB]:`${Ye}/jcb-light.png`,[Oe.MAESTRO]:`${Ye}/maestro-light.png`,[Oe.UNION_PAY]:`${Ye}/union_pay-light.png`,[Oe.RU_PAY]:`${Ye}/ru_pay-light.png`};function hc(e){return of[e]}var ge=require("@raycast/api");var gc=require("react");var bt=require("react/jsx-runtime");function sf(e){let{itemName:t,details:r,sorter:n,label:o,getMarkdown:i,getCopyValue:s,titleMap:a}=e,c=Vt(o,!0),l=v=>async()=>{await ge.Clipboard.copy(v,{transient:q("other")}),await Q("Copied details to clipboard")},{sortedDetails:f,sortedDetailsEntries:x}=(0,gc.useMemo)(()=>{if(!n)return{sortedDetails:r,sortedDetailsEntries:Object.entries(r)};let v=Object.entries(r).sort(n);return{sortedDetails:Object.fromEntries(v),sortedDetailsEntries:v}},[r]),S=async()=>{await ge.Clipboard.copy(s(f),{transient:q("other")}),await Q(`Copied ${o} details to clipboard`)};return(0,bt.jsx)(ge.Detail,{markdown:i(t,f),actions:(0,bt.jsxs)(ge.ActionPanel,{children:[(0,bt.jsx)(ge.ActionPanel.Section,{children:(0,bt.jsx)(ge.Action,{title:`Copy ${c} Details`,onAction:S})}),(0,bt.jsx)(ge.ActionPanel.Section,{title:`${c} Fields`,children:x.map(([v,A],I)=>{if(!A)return null;let g=Wt[I];return(0,bt.jsx)(ge.Action,{title:`Copy ${af(v,a)}`,icon:ge.Icon.Clipboard,onAction:l(A),shortcut:g?{macOS:{key:g,modifiers:["opt"]},Windows:{key:g,modifiers:["alt"]}}:void 0},`${I}-${v}`)})})]})})}function af(e,t){return t?typeof t=="function"?t(e):t[e]:Vt(e,!0)}var gn=sf;var So=require("react/jsx-runtime");function cf(){let{push:e}=(0,St.useNavigation)(),t=O(),r=U();if(!t.card)return null;let n=async()=>{try{let o=await r(t,i=>i.card,"Getting card details...");o&&e((0,So.jsx)(gn,{label:"Card",details:o,itemName:t.name,titleMap:qe,sorter:hn,getMarkdown:pc,getCopyValue:mc}))}catch(o){await(0,St.showToast)(St.Toast.Style.Failure,"Failed to get card details"),h("Failed to show card details",o)}};return(0,So.jsx)(W,{title:"Show Card",icon:St.Icon.Eye,onAction:n,repromptDescription:`Showing the card details of <${t.name}>`})}var Eo=cf;var Et=require("@raycast/api");function wc(e,t){return`# \u{1FAAA} ${e}
&nbsp;
| ${Y==="macos"?"\u2325":"Alt"}	**Field** | **Value** |
| --- | --- |
${Object.entries(t).map(([r,n],o)=>{if(!n)return null;let i=Je[r],s=Wt[o];return`| ${s?`${s}.`:"&nbsp;"}	**${i}** | ${n} |`}).filter(Boolean).join(`
`)}
`}function bc(e){return Object.entries(e).map(([t,r])=>r?`${Je[t]}: ${r}`:null).filter(Boolean).join(`
`)}var yc=Object.keys(Je);function yn([e],[t]){let r=yc.indexOf(Array.isArray(e)?e[0]:e),n=yc.indexOf(Array.isArray(t)?t[0]:t);return r-n}var xo=require("react/jsx-runtime");function lf(){let{push:e}=(0,Et.useNavigation)(),t=O(),r=U();if(!t.identity)return null;let n=async()=>{try{let o=await r(t,i=>i.identity,"Getting identity details...");o&&e((0,xo.jsx)(gn,{label:"Identity",details:o,itemName:t.name,titleMap:Je,sorter:yn,getMarkdown:wc,getCopyValue:bc}))}catch(o){await(0,Et.showToast)(Et.Toast.Style.Failure,"Failed to get identity details"),h("Failed to show identity details",o)}};return(0,xo.jsx)(W,{title:"Show Identity",icon:Et.Icon.Eye,onAction:n,repromptDescription:`Showing the identity details of <${t.name}>`})}var Io=lf;var ce=require("@raycast/api");var ar=require("react/jsx-runtime");function uf(){let{push:e}=(0,ce.useNavigation)(),t=O(),r=U();if(!t.notes)return null;let n=async()=>{try{let o=await r(t,i=>i.notes,"Getting notes...");o&&e((0,ar.jsx)(df,{itemName:t.name,notes:o}))}catch(o){await(0,ce.showToast)(ce.Toast.Style.Failure,"Failed to get notes"),h("Failed to show notes",o)}};return(0,ar.jsx)(W,{title:"Show Notes",icon:ce.Icon.Eye,onAction:n,repromptDescription:`Showing the notes of <${t.name}>`,shortcut:{macOS:{key:"n",modifiers:["opt"]},Windows:{key:"n",modifiers:["alt"]}}})}function df({itemName:e,notes:t}){let r=async()=>{await ce.Clipboard.copy(t,{transient:q("other")}),await Q("Copied notes to clipboard")};return(0,ar.jsx)(ce.Detail,{markdown:ff(e,t),actions:(0,ar.jsx)(ce.ActionPanel,{children:(0,ar.jsx)(ce.Action,{title:"Copy Notes",onAction:r,icon:ce.Icon.Clipboard})})})}function ff(e,t){return`# \u{1F4C4} ${e}
&nbsp;
\`\`\`
${t}
\`\`\`
`}var cr=uf;var xt=require("@raycast/api");var Pr=require("react/jsx-runtime");function pf({selector:e,sorter:t,labelMapper:r}){let n=O(),o=U(),i=mf(n,e,t);if(!i)return null;let s=(a,c)=>async()=>{try{let l=await o(n,f=>e(f)?.[a],`Getting ${a}...`);if(typeof l!="string")throw new Error(`Value of ${a} is not a string`);l&&(await xt.Clipboard.copy(l,{transient:q("other")}),await Q(`Copied ${c} to clipboard`))}catch(l){await(0,xt.showToast)(xt.Toast.Style.Failure,`Failed to copy ${a}`),h(`Failed to copy ${a}`,l)}};return(0,Pr.jsx)(Pr.Fragment,{children:i.map(([a,c],l)=>{if(!c||typeof c!="string")return null;let f=r?.(a)??Vt(a);return(0,Pr.jsx)(W,{title:`Copy ${f}`,icon:xt.Icon.Clipboard,onAction:s(a,f),repromptDescription:`Copying the ${f} of <${n.name}>`},`${l}-${a}`)})})}function mf(e,t,r){let n=t(e);if(n==null)return null;let o=Object.entries(n);return r&&o.sort(r),o}var It=pf;var Sc=require("react/jsx-runtime");function hf(){return(0,Sc.jsx)(It,{selector:e=>e.identity,sorter:yn,labelMapper:e=>Je[e]})}var vo=hf;var Ec=require("react/jsx-runtime");function gf(){return(0,Ec.jsx)(It,{selector:e=>e.card,sorter:hn,labelMapper:e=>qe[e]})}var Co=gf;var xc=require("react/jsx-runtime");function yf(){return(0,xc.jsx)(It,{selector:t=>t.login?.uris?.reduce((r,n,o)=>(n.uri&&(r[`URI ${o+1}`]=n.uri),r),{})??{}})}var To=yf;var kr=require("@raycast/api");var wf=require("react/jsx-runtime");var Ic=require("react/jsx-runtime");function bf(){return(0,Ic.jsx)(It,{selector:t=>Object.fromEntries(t.fields?.map(r=>[r.name,r.value])||[])})}var Ao=bf;var vt=require("@raycast/api");var vc=require("react/jsx-runtime");function Sf(){let e=O(),t=U();if(!e.sshKey?.publicKey)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.publicKey,"Getting public key...");n&&(await vt.Clipboard.copy(n,{transient:q("other")}),await Q("Copied public key to clipboard"))}catch(n){await(0,vt.showToast)(vt.Toast.Style.Failure,"Failed to get public key"),h("Failed to copy public key",n)}};return(0,vc.jsx)(W,{title:"Copy Public Key",icon:vt.Icon.Key,onAction:r,repromptDescription:`Copying the public key of <${e.name}>`})}var Po=Sf;var xe=require("@raycast/api");var Lo=require("@raycast/api"),Le=require("react");var Cc=require("react");function Tc(e,t){(0,Cc.useEffect)(()=>{e()},t)}var ko=require("react/jsx-runtime"),Ac=(0,Le.createContext)({});function Pc({children:e}){let{items:t}=mt(),[r,n]=(0,Le.useState)();Tc(async()=>{let s=await Ef();n(s??[])},[]),(0,Le.useEffect)(()=>{if(!r)return;let s=t.flatMap(a=>a.favorite?r.some(c=>c===a.id)?[]:[a.id]:[]);s.length!==0&&n(Array.from(new Set(s)))},[t,!!r]),(0,Le.useEffect)(()=>{r&&xf(r)},[r]);let o=s=>{n((a=[])=>r?.includes(s.id)?a.filter(c=>c!==s.id):[s.id,...a])},i=({id:s},a)=>{if(!r)return;let c=r.indexOf(s);if(c===-1)return;let l=c+(a==="up"?-1:1);if(l>=0&&l<r.length){let f=r.slice(0);f.splice(c,1),f.splice(l,0,s),n(f)}};return r?(0,ko.jsx)(Ac.Provider,{value:{favoriteOrder:r,setFavoriteOrder:n,toggleFavorite:o,moveFavorite:i},children:e}):(0,ko.jsx)(tr,{})}var Lr=()=>{let e=(0,Le.useContext)(Ac);if(!e)throw new Error("useFavoritesContext must be used within a FavoritesProvider");return e};async function Ef(){try{let e=await Lo.LocalStorage.getItem(M.VAULT_FAVORITE_ORDER);return e?JSON.parse(e):void 0}catch(e){h("Failed to get favorite order from local storage",e);return}}async function xf(e){try{await Lo.LocalStorage.setItem(M.VAULT_FAVORITE_ORDER,JSON.stringify(e))}catch(t){h("Failed to persist favorite order to local storage",t)}}function kc(e){let{favoriteOrder:t}=Lr();return(0,Le.useMemo)(()=>{let r=e.reduce((n,o)=>{let i=t.indexOf(o.id);return o.favorite||i!==-1?n.favoriteItems.push({...o,listOrder:i??Number.MAX_SAFE_INTEGER}):n.nonFavoriteItems.push(o),n},{favoriteItems:[],nonFavoriteItems:[]});return r.favoriteItems.sort((n,o)=>n.listOrder-o.listOrder),r},[e,t])}var Ue=require("react/jsx-runtime");function If(){let e=O(),{favoriteOrder:t,toggleFavorite:r,moveFavorite:n}=Lr(),o=e.favorite,i=t.includes(e.id),s=async()=>{try{await r(e)}catch(c){await(0,xe.showToast)(xe.Toast.Style.Failure,"Failed to toggle favorite \u2639\uFE0F"),h("Failed to toggle favorite",c)}},a=c=>()=>n(e,c);return(0,Ue.jsxs)(Ue.Fragment,{children:[!o&&(0,Ue.jsx)(xe.Action,{title:i?"Remove Favorite":"Mark As Favorite",onAction:s,icon:i?xe.Icon.StarDisabled:xe.Icon.Star,shortcut:{macOS:{key:"f",modifiers:["opt"]},Windows:{key:"f",modifiers:["alt"]}}}),(o||i)&&(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsx)(xe.Action,{title:"Move Favorite Up",onAction:a("up"),icon:xe.Icon.ArrowUpCircleFilled,shortcut:{macOS:{key:"arrowUp",modifiers:["opt","shift"]},Windows:{key:"arrowUp",modifiers:["alt","shift"]}}}),(0,Ue.jsx)(xe.Action,{title:"Move Favorite Down",onAction:a("down"),icon:xe.Icon.ArrowDownCircleFilled,shortcut:{macOS:{key:"arrowDown",modifiers:["opt","shift"]},Windows:{key:"arrowDown",modifiers:["alt","shift"]}}})]})]})}var Lc=If;var Ct=require("@raycast/api");var Oc=require("react/jsx-runtime");function vf(){let e=O(),t=U();if(!e.sshKey?.keyFingerprint)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.keyFingerprint,"Getting key fingerprint...");n&&(await Ct.Clipboard.copy(n,{transient:q("other")}),await Q("Copied key fingerprint to clipboard"))}catch(n){await(0,Ct.showToast)(Ct.Toast.Style.Failure,"Failed to get key fingerprint"),h("Failed to copy key fingerprint",n)}};return(0,Oc.jsx)(W,{title:"Copy Key Fingerprint",icon:Ct.Icon.Key,onAction:r,repromptDescription:`Copying the key fingerprint of <${e.name}>`})}var Rc=vf;var Tt=require("@raycast/api");var _c=require("react/jsx-runtime");function Cf(){let e=O(),t=U();if(!e.sshKey?.privateKey)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.privateKey,"Getting private key...");n&&(await Tt.Clipboard.copy(n,{transient:q("other")}),await Q("Copied private key to clipboard"))}catch(n){await(0,Tt.showToast)(Tt.Toast.Style.Failure,"Failed to get private key"),h("Failed to copy private key",n)}};return(0,_c.jsx)(W,{title:"Copy Private Key",icon:Tt.Icon.Key,onAction:r,repromptDescription:`Copying the private key of <${e.name}>`})}var $c=Cf;var C=require("react/jsx-runtime"),{primaryAction:Tf}=(0,ee.getPreferenceValues)(),Af=()=>{let{type:e,id:t}=O();return(0,C.jsxs)(ee.ActionPanel,{children:[e===1&&(0,C.jsxs)(ee.ActionPanel.Section,{children:[(0,C.jsxs)(tc,{reverse:Tf==="paste",children:[(0,C.jsx)(po,{}),(0,C.jsx)(mo,{})]}),(0,C.jsx)(ho,{}),(0,C.jsx)(go,{}),(0,C.jsx)(yo,{}),(0,C.jsx)(wo,{}),(0,C.jsx)(bo,{}),(0,C.jsx)(To,{}),(0,C.jsx)(cr,{})]}),e===3&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(Eo,{})}),(0,C.jsx)(ee.ActionPanel.Section,{title:"Card Fields",children:(0,C.jsx)(Co,{})}),(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(cr,{})})]}),e===4&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(Io,{})}),(0,C.jsx)(ee.ActionPanel.Section,{title:"Identity Fields",children:(0,C.jsx)(vo,{})}),(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(cr,{})})]}),e===2&&(0,C.jsx)(ee.ActionPanel.Section,{children:(0,C.jsx)(cr,{})}),e===5&&(0,C.jsxs)(ee.ActionPanel.Section,{children:[(0,C.jsx)(Po,{}),(0,C.jsx)(Rc,{}),(0,C.jsx)($c,{})]}),(0,C.jsx)(ee.ActionPanel.Section,{title:"Custom Fields",children:(0,C.jsx)(Ao,{})}),(0,C.jsx)(ee.ActionPanel.Section,{title:"Item Actions",children:(0,C.jsx)(Lc,{})}),(0,C.jsx)(Tr,{}),(0,C.jsx)(Er,{}),ee.environment.isDevelopment&&(0,C.jsx)(ee.ActionPanel.Section,{title:"Development",children:(0,C.jsx)(ee.Action.CopyToClipboard,{title:"Copy item UUID",content:t})})]})},Fc=Af;var de=require("@raycast/api"),Nc=require("react");var Dc={1:{icon:{source:ve[1],tintColor:de.Color.Blue},tooltip:Qe[1]},3:{icon:{source:ve[3],tintColor:de.Color.Green},tooltip:Qe[3]},4:{icon:{source:ve[4],tintColor:de.Color.Orange},tooltip:Qe[4]},2:{icon:{source:ve[2],tintColor:de.Color.PrimaryText},tooltip:Qe[2]},5:{icon:{source:ve[5],tintColor:de.Color.SecondaryText},tooltip:Qe[5]}};function Uc(e,t){let{favoriteOrder:r}=Lr();return(0,Nc.useMemo)(()=>{try{let n=[];if(t?.id&&n.push({icon:{source:de.Icon.Folder,tintColor:de.Color.SecondaryText},tag:{value:t.name,color:de.Color.SecondaryText},tooltip:`${t.name} Folder`}),e.favorite?n.push({icon:{source:de.Icon.Star,tintColor:de.Color.Blue},tooltip:"Bitwarden Favorite"}):r.includes(e.id)&&n.push({icon:{source:de.Icon.Star,tintColor:de.Color.Yellow},tooltip:"Favorite"}),e.reprompt===1&&n.push({icon:{source:de.Icon.Lock,tintColor:de.Color.SecondaryText},tooltip:"Master password re-prompt"}),!Dc[e.type])throw new Error(`No accessory defined for item ${e.name} with type ${e.type}`);return n.push(Dc[e.type]),n}catch(n){return h("Failed to get item accessories",n),[]}},[r,e.favorite,e.reprompt,e.type,t?.id,t?.name])}var Sn=require("@raycast/api"),Cl=require("react");var El=require("@raycast/api");var ml=ne(ul(),1),sp=e=>e.normalize("NFKD").split(""),dl=/^\s+$/,fl=/^[`~!@#$%^&*()\-=_+{}[\]\|\\;':",./<>?]+$/,Go={insertOrder:"insertOrder",bestMatch:"bestMatch"},ap={keySelector:e=>e,threshold:.6,ignoreCase:!0,ignoreSymbols:!0,normalizeWhitespace:!0,returnMatchData:!1,useDamerau:!0,useSellers:!0,useSeparatedUnicode:!1,sortBy:Go.bestMatch},cp=()=>{},lp=e=>e instanceof Array?e:[e];function hl(e,t){let r=t.ignoreCase?e.toLocaleLowerCase():e,n=[],o=[],i=!0,s=0,a=t.useSeparatedUnicode?sp(r):(0,ml.default)(r);for(let c of a)dl.lastIndex=0,fl.lastIndex=0,t.normalizeWhitespace&&dl.test(c)?i||(n.push(" "),o.push(s),i=!0):t.ignoreSymbols&&fl.test(c)||(t.useSeparatedUnicode?n.push(c):n.push(c.normalize()),o.push(s),i=!1),s+=c.length;for(o.push(e.length);n[n.length-1]===" ";)n.pop(),o.pop();return{original:e,normal:n,map:o}}function up(e,t){return{index:t[e.start],length:t[e.end+1]-t[e.start]}}function gl(e,t){if(t===0)return{index:0,length:0};let r=t;for(let n=e.length-2;n>0&&r>1;n--){let o=e[n];r=o[r]<o[r-1]?r:r-1}return{start:r-1,end:t-1}}function dp(){return{start:0,end:0}}var fp=()=>!0,pp=(e,t)=>e<t;function mp(e,t){let r=new Array(e);for(let n=0;n<e;n++)r[n]=new Array(t),r[n][0]=n;for(let n=0;n<t;n++)r[0][n]=n;return r}function hp(e,t){let r=new Array(e);r[0]=new Array(t).fill(0);for(let n=1;n<e;n++)r[n]=new Array(t),r[n][0]=n;return r}function yl(e,t,r,n,o){let i=r[n],s=r[n+1],a=e[n]===t[o]?0:1,c,l=s[o]+1;(c=i[o+1]+1)<l&&(l=c),(c=i[o]+a)<l&&(l=c),s[o+1]=l}function wl(e,t,r,n){for(let o=0;o<e.length;o++)yl(e,t,r,o,n)}function gp(e,t,r,n){if(n===0){wl(e,t,r,n);return}e.length>0&&yl(e,t,r,0,n);for(let o=1;o<e.length;o++){let i=r[o-1],s=r[o],a=r[o+1],c=e[o]===t[n]?0:1,l,f=a[n]+1;(l=s[n+1]+1)<f&&(f=l),(l=s[n]+c)<f&&(f=l),e[o]===t[n-1]&&e[o-1]===t[n]&&(l=i[n-1]+c)<f&&(f=l),a[n+1]=f}}function yp(e,t,r){let n=e;for(let o=0;o<t.length;o++){let i=t[o];n.children[i]==null&&(n.children[i]={children:{},candidates:[],depth:0}),n.depth=Math.max(n.depth,t.length-o),n=n.children[i]}n.candidates.push(r)}function pl(e,t,r,n){for(let o of r){let i=lp(n.keySelector(o)).map((s,a)=>({index:t,keyIndex:a,item:o,normalized:hl(s,n)}));t++;for(let s of i)yp(e,s.normalized.normal,s)}}function wp(e,t){let r=t.score-e.score;if(r!==0)return r;let n=e.match.start-t.match.start;if(n!==0)return n;let o=e.keyIndex-t.keyIndex;if(o!==0)return o;let i=e.lengthDiff-t.lengthDiff;return i!==0?i:bl(e,t)}function bl(e,t){return e.index-t.index}function bp(e){switch(e){case Go.bestMatch:return wp;case Go.insertOrder:return bl;default:throw new Error(`unknown sortBy method ${e}`)}}function Sl(e,t,r,n,o,i,s){let a={item:r.item,normalized:r.normalized,score:n,match:o,index:r.index,keyIndex:r.keyIndex,lengthDiff:i};t[r.index]==null?(t[r.index]=e.length,e.push(a)):s(a,e[t[r.index]])<0&&(e[t[r.index]]=a)}var Sp=Math.max,Ep=e=>e;function xp(e,t,r,n,o){let i=t+o,s=Math.min(r.length,t+e.depth+1),a=Math.ceil((i+s)/2);return 1-(a-s)/a>=n}function Ip(e,t,r,n,o,i){return 1-Math.min(o,i-(e.depth+1))/r.length>=n}function vp(e,t,r,n,o,i,s){let a=[];for(let l in e.children){let f=e.children[l];a.push([f,1,l,0,t.length])}let c=new Array(e.depth);for(;a.length!==0;){let[l,f,x,S,v]=a.pop();c[f-1]=x,r.score(t,c,n,f-1);let A=f,I=n[n.length-1][A],g=S,P=v;if(r.shouldUpdateScore(I,v)&&(g=A,P=I),l.candidates.length>0){let E=r.getLength(t.length,f),$=1-P/E;if($>=s.threshold){let L=gl(n,g),N=Math.abs(f-t.length);for(let te of l.candidates)Sl(o,i,te,$,L,N,r.compareItems)}}for(let E in l.children){let $=l.children[E];r.shouldContinue($,f,t,s.threshold,P,I)&&a.push([$,f+1,E,g,P])}}}function Cp(e,t,r){let n=r.useSellers?hp:mp,o={score:r.useDamerau?gp:wl,getLength:r.useSellers?Ep:Sp,shouldUpdateScore:r.useSellers?pp:fp,shouldContinue:r.useSellers?Ip:xp,walkBack:r.useSellers?gl:dp,compareItems:bp(r.sortBy)},i={},s=[],a=n(e.length+1,t.depth+1);if(r.threshold<=0||e.length===0)for(let l of t.candidates)Sl(s,i,l,0,{index:0,length:0},e.length,o.compareItems);vp(t,e,o,a,s,i,r);let c=s.sort(o.compareItems);if(r.returnMatchData){let l=r.useSellers?up:cp;return c.map(f=>({item:f.item,original:f.normalized.original,key:f.normalized.normal.join(""),score:f.score,match:l(f.match,f.normalized.map)}))}return c.map(l=>l.item)}var bn=class{constructor(t,r){this.options=Object.assign({},ap,r),this.trie={children:{},candidates:[],depth:0},pl(this.trie,0,t,this.options),this.count=t.length}add(...t){pl(this.trie,this.count,t,this.options),this.count+=t.length}search(t,r){return r=Object.assign({},this.options,r),Cp(hl(t,this.options).normal,this.trie,r)}};var Or=require("react"),xl=require("url");function Il(e){try{return`https://icons.bitwarden.net/${new xl.URL(e).hostname}/icon.png`}catch{return El.Icon.Globe}}function vl(e){let[t,r]=(0,Or.useState)(""),n=(0,Or.useMemo)(()=>new bn(e,{ignoreSymbols:!1,threshold:.7,keySelector:i=>{let{login:s,card:a}=i;return[i.name,Qe[i.type],s?.username,s?.uris?.map(({uri:c})=>c),a?.brand,a?.number].flat().filter(c=>!!c)}}),[e]),o=(0,Or.useMemo)(()=>t?n.search(t):e,[n,t]);return{setSearchText:r,filteredItems:o}}var{fetchFavicons:Tp}=(0,Sn.getPreferenceValues)(),Ap={1:e=>{let t=e.login?.uris?.[0]?.uri;return Tp&&t?Il(t):ve[1]},3:e=>{let{brand:t}=e.card??{};if(t){let r=hc(t);if(r)return r}return ve[3]},4:()=>ve[4],2:()=>ve[2],5:()=>ve[5]};function Tl(e){return(0,Cl.useMemo)(()=>{let t=Ap[e.type]?.(e);return t||Sn.Icon.QuestionMark},[e.type,e.card?.brand,e.login?.uris?.[0]?.uri])}var En=require("react/jsx-runtime"),Pp=({item:e,folder:t})=>{let r=Tl(e),n=Uc(e,t);return(0,En.jsx)(Yo.Provider,{value:e,children:(0,En.jsx)(Al.List.Item,{id:e.id,title:e.name,accessories:n,icon:r,subtitle:e.login?.username||void 0,actions:(0,En.jsx)(Fc,{})})})},Pl=Pp;var zt=require("@raycast/api");var $r=require("react/jsx-runtime");function Wo(){let{folders:e,currentFolderId:t,setCurrentFolder:r}=mt();return e.length===0?null:(0,$r.jsxs)(zt.List.Dropdown,{tooltip:"Select a folder",placeholder:"Search folders",defaultValue:t??Rt.ALL,onChange:r,throttle:!0,children:[(0,$r.jsx)(zt.List.Dropdown.Item,{value:Rt.ALL,title:"All",icon:zt.Icon.Folder}),e.map(n=>{let o=n.id||Rt.NO_FOLDER;return(0,$r.jsx)(zt.List.Dropdown.Item,{value:o,title:n.name,icon:zt.Icon.Folder},o)})]})}var G=require("react/jsx-runtime"),kp=()=>(0,G.jsx)(Ar,{children:(0,G.jsx)(ea,{loadingFallback:(0,G.jsx)(tr,{}),children:(0,G.jsx)(oo,{unlock:!0,children:(0,G.jsx)(Ma,{children:(0,G.jsx)(qa,{children:(0,G.jsx)(Pc,{children:(0,G.jsx)(Lp,{})})})})})})});function Lp(){let{items:e,folders:t,isLoading:r,isEmpty:n}=mt(),{setSearchText:o,filteredItems:i}=vl(e),{favoriteItems:s,nonFavoriteItems:a}=kc(i);return(0,G.jsxs)(Be.List,{searchBarPlaceholder:"Search vault",filtering:!1,isLoading:r,searchBarAccessory:(0,G.jsx)(Wo,{}),onSearchTextChange:o,children:[s.length>0?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Be.List.Section,{title:"Favorites",children:(0,G.jsx)(Ho,{items:s,folders:t})}),(0,G.jsx)(Be.List.Section,{title:"Other Items",children:(0,G.jsx)(Ho,{items:a,folders:t})})]}):(0,G.jsx)(Ho,{items:a,folders:t}),r?(0,G.jsx)(Be.List.EmptyView,{icon:Be.Icon.ArrowClockwise,title:"Loading...",description:"Please wait."}):(0,G.jsx)(Be.List.EmptyView,{icon:{source:"bitwarden-64.png"},title:n?"Vault empty.":"No matching items found.",description:n?"Hit the sync button to sync your vault or try logging in again.":"Hit the sync button to sync your vault.",actions:!r&&(0,G.jsx)(Be.ActionPanel,{children:(0,G.jsx)(Tr,{})})})]})}function Ho({items:e,folders:t}){return(0,G.jsx)(G.Fragment,{children:e.map(r=>(0,G.jsx)(Pl,{item:r,folder:Rp(t,r)},r.id))})}function Rp(e,t){return e.find(r=>r.id===t.folderId)}var Op=kp;
/*! Bundled license information:

node-stream-zip/node_stream_zip.js:
  (**
   * @license node-stream-zip | (c) 2020 Antelle | https://github.com/antelle/node-stream-zip/blob/master/LICENSE
   * Portions copyright https://github.com/cthackers/adm-zip | https://raw.githubusercontent.com/cthackers/adm-zip/master/LICENSE
   *)
*/
