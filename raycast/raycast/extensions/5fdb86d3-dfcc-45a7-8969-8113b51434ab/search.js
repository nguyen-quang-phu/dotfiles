"use strict";var Ll=Object.create;var Fr=Object.defineProperty;var Rl=Object.getOwnPropertyDescriptor;var $l=Object.getOwnPropertyNames;var Ol=Object.getPrototypeOf,_l=Object.prototype.hasOwnProperty;var V=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Fl=(e,t)=>{for(var r in t)Fr(e,r,{get:t[r],enumerable:!0})},Wo=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of $l(t))!_l.call(e,o)&&o!==r&&Fr(e,o,{get:()=>t[o],enumerable:!(n=Rl(t,o))||n.enumerable});return e};var ne=(e,t,r)=>(r=e!=null?Ll(Ol(e)):{},Wo(t||!e||!e.__esModule?Fr(r,"default",{value:e,enumerable:!0}):r,e)),Nl=e=>Wo(Fr({},"__esModule",{value:!0}),e);var Qo=V((Vp,Jo)=>{Jo.exports=qo;qo.sync=Vl;var Zo=require("fs");function Ul(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function Xo(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:Ul(t,r)}function qo(e,t,r){Zo.stat(e,function(n,o){r(n,n?!1:Xo(o,e,t))})}function Vl(e,t){return Xo(Zo.statSync(e),e,t)}});var oi=V((Mp,ni)=>{ni.exports=ti;ti.sync=Ml;var ei=require("fs");function ti(e,t,r){ei.stat(e,function(n,o){r(n,n?!1:ri(o,t))})}function Ml(e,t){return ri(ei.statSync(e),t)}function ri(e,t){return e.isFile()&&Bl(e,t)}function Bl(e,t){var r=e.mode,n=e.uid,o=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),f=a|c,b=r&l||r&c&&o===s||r&a&&n===i||r&f&&i===0;return b}});var si=V((zp,ii)=>{var Bp=require("fs"),Dr;process.platform==="win32"||global.TESTING_WINDOWS?Dr=Qo():Dr=oi();ii.exports=xn;xn.sync=zl;function xn(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){xn(e,t||{},function(i,s){i?o(i):n(s)})})}Dr(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function zl(e,t){try{return Dr.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var pi=V((Gp,fi)=>{var Wt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ai=require("path"),Gl=Wt?";":":",ci=si(),li=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),ui=(e,t)=>{let r=t.colon||Gl,n=e.match(/\//)||Wt&&e.match(/\\/)?[""]:[...Wt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=Wt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=Wt?o.split(r):[""];return Wt&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},di=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:i}=ui(e,t),s=[],a=l=>new Promise((f,b)=>{if(l===n.length)return t.all&&s.length?f(s):b(li(e));let C=n[l],x=/^".*"$/.test(C)?C.slice(1,-1):C,A=ai.join(x,e),I=!x&&/^\.[\\\/]/.test(e)?e.slice(0,2)+A:A;f(c(I,l,0))}),c=(l,f,b)=>new Promise((C,x)=>{if(b===o.length)return C(a(f+1));let A=o[b];ci(l+A,{pathExt:i},(I,g)=>{if(!I&&g)if(t.all)s.push(l+A);else return C(l+A);return C(c(l,f,b+1))})});return r?a(0).then(l=>r(null,l),r):a(0)},Wl=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=ui(e,t),i=[];for(let s=0;s<r.length;s++){let a=r[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,l=ai.join(c,e),f=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let b=0;b<n.length;b++){let C=f+n[b];try{if(ci.sync(C,{pathExt:o}))if(t.all)i.push(C);else return C}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw li(e)};fi.exports=di;di.sync=Wl});var hi=V((Wp,In)=>{"use strict";var mi=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};In.exports=mi;In.exports.default=mi});var bi=V((Hp,wi)=>{"use strict";var gi=require("path"),Hl=pi(),Kl=hi();function yi(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=Hl.sync(e.command,{path:r[Kl({env:r})],pathExt:t?gi.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return s&&(s=gi.resolve(o?e.options.cwd:"",s)),s}function jl(e){return yi(e)||yi(e,!0)}wi.exports=jl});var Si=V((Kp,Cn)=>{"use strict";var vn=/([()\][%!^"`<>&|;, *?])/g;function Yl(e){return e=e.replace(vn,"^$1"),e}function Zl(e,t){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),e=e.replace(/(?=(\\+?)?)\1$/,"$1$1"),e=`"${e}"`,e=e.replace(vn,"^$1"),t&&(e=e.replace(vn,"^$1")),e}Cn.exports.command=Yl;Cn.exports.argument=Zl});var xi=V((jp,Ei)=>{"use strict";Ei.exports=/^#!(.*)/});var vi=V((Yp,Ii)=>{"use strict";var Xl=xi();Ii.exports=(e="")=>{let t=e.match(Xl);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var Ti=V((Zp,Ci)=>{"use strict";var Tn=require("fs"),ql=vi();function Jl(e){let r=Buffer.alloc(150),n;try{n=Tn.openSync(e,"r"),Tn.readSync(n,r,0,150,0),Tn.closeSync(n)}catch{}return ql(r.toString())}Ci.exports=Jl});var Li=V((Xp,ki)=>{"use strict";var Ql=require("path"),Ai=bi(),Pi=Si(),eu=Ti(),tu=process.platform==="win32",ru=/\.(?:com|exe)$/i,nu=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function ou(e){e.file=Ai(e);let t=e.file&&eu(e.file);return t?(e.args.unshift(e.file),e.command=t,Ai(e)):e.file}function iu(e){if(!tu)return e;let t=ou(e),r=!ru.test(t);if(e.options.forceShell||r){let n=nu.test(t);e.command=Ql.normalize(e.command),e.command=Pi.command(e.command),e.args=e.args.map(i=>Pi.argument(i,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function su(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:iu(n)}ki.exports=su});var Oi=V((qp,$i)=>{"use strict";var An=process.platform==="win32";function Pn(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function au(e,t){if(!An)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let i=Ri(o,t);if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function Ri(e,t){return An&&e===1&&!t.file?Pn(t.original,"spawn"):null}function cu(e,t){return An&&e===1&&!t.file?Pn(t.original,"spawnSync"):null}$i.exports={hookChildProcess:au,verifyENOENT:Ri,verifyENOENTSync:cu,notFoundError:Pn}});var Ni=V((Jp,Ht)=>{"use strict";var _i=require("child_process"),kn=Li(),Ln=Oi();function Fi(e,t,r){let n=kn(e,t,r),o=_i.spawn(n.command,n.args,n.options);return Ln.hookChildProcess(o,n),o}function lu(e,t,r){let n=kn(e,t,r),o=_i.spawnSync(n.command,n.args,n.options);return o.error=o.error||Ln.verifyENOENTSync(o.status,n),o}Ht.exports=Fi;Ht.exports.spawn=Fi;Ht.exports.sync=lu;Ht.exports._parse=kn;Ht.exports._enoent=Ln});var Zi=V((ym,Br)=>{Br.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Br.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Br.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var es=V((wm,Zt)=>{var K=global.process,Pt=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};Pt(K)?(Xi=require("assert"),jt=Zi(),qi=/^win/i.test(K.platform),fr=require("events"),typeof fr!="function"&&(fr=fr.EventEmitter),K.__signal_exit_emitter__?oe=K.__signal_exit_emitter__:(oe=K.__signal_exit_emitter__=new fr,oe.count=0,oe.emitted={}),oe.infinite||(oe.setMaxListeners(1/0),oe.infinite=!0),Zt.exports=function(e,t){if(!Pt(global.process))return function(){};Xi.equal(typeof e,"function","a callback must be provided for exit handler"),Yt===!1&&Fn();var r="exit";t&&t.alwaysLast&&(r="afterexit");var n=function(){oe.removeListener(r,e),oe.listeners("exit").length===0&&oe.listeners("afterexit").length===0&&zr()};return oe.on(r,e),n},zr=function(){!Yt||!Pt(global.process)||(Yt=!1,jt.forEach(function(t){try{K.removeListener(t,Gr[t])}catch{}}),K.emit=Wr,K.reallyExit=Nn,oe.count-=1)},Zt.exports.unload=zr,kt=function(t,r,n){oe.emitted[t]||(oe.emitted[t]=!0,oe.emit(t,r,n))},Gr={},jt.forEach(function(e){Gr[e]=function(){if(Pt(global.process)){var r=K.listeners(e);r.length===oe.count&&(zr(),kt("exit",null,e),kt("afterexit",null,e),qi&&e==="SIGHUP"&&(e="SIGINT"),K.kill(K.pid,e))}}}),Zt.exports.signals=function(){return jt},Yt=!1,Fn=function(){Yt||!Pt(global.process)||(Yt=!0,oe.count+=1,jt=jt.filter(function(t){try{return K.on(t,Gr[t]),!0}catch{return!1}}),K.emit=Qi,K.reallyExit=Ji)},Zt.exports.load=Fn,Nn=K.reallyExit,Ji=function(t){Pt(global.process)&&(K.exitCode=t||0,kt("exit",K.exitCode,null),kt("afterexit",K.exitCode,null),Nn.call(K,K.exitCode))},Wr=K.emit,Qi=function(t,r){if(t==="exit"&&Pt(global.process)){r!==void 0&&(K.exitCode=r);var n=Wr.apply(this,arguments);return kt("exit",K.exitCode,null),kt("afterexit",K.exitCode,null),n}else return Wr.apply(this,arguments)}):Zt.exports=function(){return function(){}};var Xi,jt,qi,fr,oe,zr,kt,Gr,Yt,Fn,Nn,Ji,Wr,Qi});var us=V((Em,ls)=>{"use strict";var{PassThrough:Ou}=require("stream");ls.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,n=r==="buffer",o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);let i=new Ou({objectMode:o});r&&i.setEncoding(r);let s=0,a=[];return i.on("data",c=>{a.push(c),o?s=a.length:s+=c.length}),i.getBufferedValue=()=>t?a:n?Buffer.concat(a,s):a.join(""),i.getBufferedLength=()=>s,i}});var ds=V((xm,pr)=>{"use strict";var{constants:_u}=require("buffer"),Fu=require("stream"),{promisify:Nu}=require("util"),Du=us(),Uu=Nu(Fu.pipeline),Hr=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Dn(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,n=Du(t);return await new Promise((o,i)=>{let s=a=>{a&&n.getBufferedLength()<=_u.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),i(a)};(async()=>{try{await Uu(e,n),o()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new Hr)})}),n.getBufferedValue()}pr.exports=Dn;pr.exports.buffer=(e,t)=>Dn(e,{...t,encoding:"buffer"});pr.exports.array=(e,t)=>Dn(e,{...t,array:!0});pr.exports.MaxBufferError=Hr});var ps=V((Im,fs)=>{"use strict";var{PassThrough:Vu}=require("stream");fs.exports=function(){var e=[],t=new Vu({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=n,t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(r),t;function r(i){return Array.isArray(i)?(i.forEach(r),this):(e.push(i),i.once("end",o.bind(null,i)),i.once("error",t.emit.bind(t,"error")),i.pipe(t,{end:!1}),this)}function n(){return e.length==0}function o(i){e=e.filter(function(s){return s!==i}),!e.length&&t.readable&&t.end()}}});var Ns=V((rh,Fs)=>{var Ie=require("fs"),qu=require("util"),qt=require("path"),Jn=require("events"),Rs=require("zlib"),_s=require("stream"),m={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSIGFIRST:80,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,MAXFILECOMMENT:65535,ENDL64HDR:20,ENDL64SIG:117853008,ENDL64SIGFIRST:80,ENDL64OFS:8,END64HDR:56,END64SIG:101075792,END64SIGFIRST:80,END64SUB:24,END64TOT:32,END64SIZ:40,END64OFF:48,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FLG_ENTRY_ENC:1,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535},ot=function(e){let t,r,n,o,i,s,c=this,l=e.storeEntries!==!1?{}:null,f=e.file,b=e.nameEncoding?new TextDecoder(e.nameEncoding):null;C();function C(){e.fd?(t=e.fd,x()):Ie.open(f,"r",(d,y)=>{if(d)return c.emit("error",d);t=y,x()})}function x(){Ie.fstat(t,(d,y)=>{if(d)return c.emit("error",d);r=y.size,n=e.chunkSize||Math.round(r/1e3),n=Math.max(Math.min(n,Math.min(128*1024,r)),Math.min(1024,r)),I()})}function A(d,y){if(d||!y)return c.emit("error",d||new Error("Archive read error"));let p=o.lastPos,w=p-o.win.position,R=o.win.buffer,P=o.minPos;for(;--p>=P&&--w>=0;)if(R.length-w>=4&&R[w]===o.firstByte&&R.readUInt32LE(w)===o.sig){o.lastBufferPosition=w,o.lastBytesRead=y,o.complete();return}if(p===P)return c.emit("error",new Error("Bad archive"));if(o.lastPos=p+1,o.chunkSize*=2,p<=P)return c.emit("error",new Error("Bad archive"));let H=Math.min(o.chunkSize,p-P);o.win.expandLeft(H,A)}function I(){let d=Math.min(m.ENDHDR+m.MAXFILECOMMENT,r);o={win:new Xr(t),totalReadLength:d,minPos:r-d,lastPos:r,chunkSize:Math.min(1024,n),firstByte:m.ENDSIGFIRST,sig:m.ENDSIG,complete:g},o.win.read(r-o.chunkSize,o.chunkSize,A)}function g(){let d=o.win.buffer,y=o.lastBufferPosition;try{i=new Kn,i.read(d.slice(y,y+m.ENDHDR)),i.headerOffset=o.win.position+y,i.commentLength?c.comment=d.slice(y+m.ENDHDR,y+m.ENDHDR+i.commentLength).toString():c.comment=null,c.entriesCount=i.volumeEntries,c.centralDirectory=i,i.volumeEntries===m.EF_ZIP64_OR_16&&i.totalEntries===m.EF_ZIP64_OR_16||i.size===m.EF_ZIP64_OR_32||i.offset===m.EF_ZIP64_OR_32?E():(o={},U())}catch(p){c.emit("error",p)}}function E(){let d=m.ENDL64HDR;o.lastBufferPosition>d?(o.lastBufferPosition-=d,k()):(o={win:o.win,totalReadLength:d,minPos:o.win.position-d,lastPos:o.win.position,chunkSize:o.chunkSize,firstByte:m.ENDL64SIGFIRST,sig:m.ENDL64SIG,complete:k},o.win.read(o.lastPos-o.chunkSize,o.chunkSize,A))}function k(){let d=o.win.buffer,y=new jn;y.read(d.slice(o.lastBufferPosition,o.lastBufferPosition+m.ENDL64HDR));let p=r-y.headerOffset;o={win:o.win,totalReadLength:p,minPos:y.headerOffset,lastPos:o.lastPos,chunkSize:o.chunkSize,firstByte:m.END64SIGFIRST,sig:m.END64SIG,complete:L},o.win.read(r-o.chunkSize,o.chunkSize,A)}function L(){let d=o.win.buffer,y=new Yn;y.read(d.slice(o.lastBufferPosition,o.lastBufferPosition+m.END64HDR)),c.centralDirectory.volumeEntries=y.volumeEntries,c.centralDirectory.totalEntries=y.totalEntries,c.centralDirectory.size=y.size,c.centralDirectory.offset=y.offset,c.entriesCount=y.volumeEntries,o={},U()}function U(){o={win:new Xr(t),pos:i.offset,chunkSize:n,entriesLeft:i.volumeEntries},o.win.read(o.pos,Math.min(n,r-o.pos),N)}function N(d,y){if(d||!y)return c.emit("error",d||new Error("Entries read error"));let p=o.pos-o.win.position,w=o.entry,R=o.win.buffer,P=R.length;try{for(;o.entriesLeft>0;){w||(w=new Zn,w.readHeader(R,p),w.headerOffset=o.win.position+p,o.entry=w,o.pos+=m.CENHDR,p+=m.CENHDR);let H=w.fnameLen+w.extraLen+w.comLen,Y=H+(o.entriesLeft>1?m.CENHDR:0);if(P-p<Y){o.win.moveRight(n,N,p),o.move=!0;return}w.read(R,p,b),e.skipEntryNameValidation||w.validateName(),l&&(l[w.name]=w),c.emit("entry",w),o.entry=w=null,o.entriesLeft--,o.pos+=H,p+=H}c.emit("ready")}catch(H){c.emit("error",H)}}function j(){if(!l)throw new Error("storeEntries disabled")}Object.defineProperty(this,"ready",{get(){return!1}}),this.entry=function(d){return j(),l[d]},this.entries=function(){return j(),l},this.stream=function(d,y){return this.openEntry(d,(p,w)=>{if(p)return y(p);let R=Ce(w),P=new Xn(t,R,w.compressedSize);if(w.method!==m.STORED)if(w.method===m.DEFLATED)P=P.pipe(Rs.createInflateRaw());else return y(new Error("Unknown compression method: "+w.method));je(w)&&(P=P.pipe(new qn(P,w.crc,w.size))),y(null,P)},!1)},this.entryDataSync=function(d){let y=null;if(this.openEntry(d,(w,R)=>{y=w,d=R},!0),y)throw y;let p=Buffer.alloc(d.compressedSize);if(new rt(t,p,0,d.compressedSize,Ce(d),w=>{y=w}).read(!0),y)throw y;if(d.method!==m.STORED)if(d.method===m.DEFLATED||d.method===m.ENHANCED_DEFLATED)p=Rs.inflateRawSync(p);else throw new Error("Unknown compression method: "+d.method);if(p.length!==d.size)throw new Error("Invalid size");return je(d)&&new qr(d.crc,d.size).data(p),p},this.openEntry=function(d,y,p){if(typeof d=="string"&&(j(),d=l[d],!d))return y(new Error("Entry not found"));if(!d.isFile)return y(new Error("Entry is not file"));if(!t)return y(new Error("Archive closed"));let w=Buffer.alloc(m.LOCHDR);new rt(t,w,0,w.length,d.offset,R=>{if(R)return y(R);let P;try{d.readDataHeader(w),d.encrypted&&(P=new Error("Entry encrypted"))}catch(H){P=H}y(P,d)}).read(p)};function Ce(d){return d.offset+m.LOCHDR+d.fnameLen+d.extraLen}function je(d){return(d.flags&8)!==8}function Ye(d,y,p){c.stream(d,(w,R)=>{if(w)p(w);else{let P,H;R.on("error",Y=>{H=Y,P&&(R.unpipe(P),P.close(()=>{p(Y)}))}),Ie.open(y,"w",(Y,ge)=>{if(Y)return p(Y);if(H){Ie.close(t,()=>{p(H)});return}P=Ie.createWriteStream(y,{fd:ge}),P.on("finish",()=>{c.emit("extract",d,y),H||p()}),R.pipe(P)})}})}function It(d,y,p){if(!y.length)return p();let w=y.shift();w=qt.join(d,qt.join(...w)),Ie.mkdir(w,{recursive:!0},R=>{if(R&&R.code!=="EEXIST")return p(R);It(d,y,p)})}function le(d,y,p,w,R){if(!p.length)return w(null,R);let P=p.shift(),H=qt.join(d,P.name.replace(y,""));Ye(P,H,Y=>{if(Y)return w(Y,R);le(d,y,p,w,R+1)})}this.extract=function(d,y,p){let w=d||"";if(typeof d=="string"&&(d=this.entry(d),d?w=d.name:w.length&&w[w.length-1]!=="/"&&(w+="/")),!d||d.isDirectory){let R=[],P=[],H={};for(let Y in l)if(Object.prototype.hasOwnProperty.call(l,Y)&&Y.lastIndexOf(w,0)===0){let ge=Y.replace(w,""),Ze=l[Y];if(Ze.isFile&&(R.push(Ze),ge=qt.dirname(ge)),ge&&!H[ge]&&ge!=="."){H[ge]=!0;let u=ge.split("/").filter(S=>S);for(u.length&&P.push(u);u.length>1;){u=u.slice(0,u.length-1);let S=u.join("/");if(H[S]||S===".")break;H[S]=!0,P.push(u)}}}P.sort((Y,ge)=>Y.length-ge.length),P.length?It(y,P,Y=>{Y?p(Y):le(y,w,R,p,0)}):le(y,w,R,p,0)}else Ie.stat(y,(R,P)=>{P&&P.isDirectory()?Ye(d,qt.join(y,qt.basename(d.name)),p):Ye(d,y,p)})},this.close=function(d){s||!t?(s=!0,d&&d()):(s=!0,Ie.close(t,y=>{t=null,d&&d(y)}))};let re=Jn.EventEmitter.prototype.emit;this.emit=function(...d){if(!s)return re.call(this,...d)}};ot.setFs=function(e){Ie=e};ot.debugLog=(...e)=>{ot.debug&&console.log(...e)};qu.inherits(ot,Jn.EventEmitter);var tt=Symbol("zip");ot.async=class extends Jn.EventEmitter{constructor(t){super();let r=new ot(t);r.on("entry",n=>this.emit("entry",n)),r.on("extract",(n,o)=>this.emit("extract",n,o)),this[tt]=new Promise((n,o)=>{r.on("ready",()=>{r.removeListener("error",o),n(r)}),r.on("error",o)})}get entriesCount(){return this[tt].then(t=>t.entriesCount)}get comment(){return this[tt].then(t=>t.comment)}async entry(t){return(await this[tt]).entry(t)}async entries(){return(await this[tt]).entries()}async stream(t){let r=await this[tt];return new Promise((n,o)=>{r.stream(t,(i,s)=>{i?o(i):n(s)})})}async entryData(t){let r=await this.stream(t);return new Promise((n,o)=>{let i=[];r.on("data",s=>i.push(s)),r.on("end",()=>{n(Buffer.concat(i))}),r.on("error",s=>{r.removeAllListeners("end"),o(s)})})}async extract(t,r){let n=await this[tt];return new Promise((o,i)=>{n.extract(t,r,(s,a)=>{s?i(s):o(a)})})}async close(){let t=await this[tt];return new Promise((r,n)=>{t.close(o=>{o?n(o):r()})})}};var Kn=class{read(t){if(t.length!==m.ENDHDR||t.readUInt32LE(0)!==m.ENDSIG)throw new Error("Invalid central directory");this.volumeEntries=t.readUInt16LE(m.ENDSUB),this.totalEntries=t.readUInt16LE(m.ENDTOT),this.size=t.readUInt32LE(m.ENDSIZ),this.offset=t.readUInt32LE(m.ENDOFF),this.commentLength=t.readUInt16LE(m.ENDCOM)}},jn=class{read(t){if(t.length!==m.ENDL64HDR||t.readUInt32LE(0)!==m.ENDL64SIG)throw new Error("Invalid zip64 central directory locator");this.headerOffset=nt(t,m.ENDSUB)}},Yn=class{read(t){if(t.length!==m.END64HDR||t.readUInt32LE(0)!==m.END64SIG)throw new Error("Invalid central directory");this.volumeEntries=nt(t,m.END64SUB),this.totalEntries=nt(t,m.END64TOT),this.size=nt(t,m.END64SIZ),this.offset=nt(t,m.END64OFF)}},Zn=class{readHeader(t,r){if(t.length<r+m.CENHDR||t.readUInt32LE(r)!==m.CENSIG)throw new Error("Invalid entry header");this.verMade=t.readUInt16LE(r+m.CENVEM),this.version=t.readUInt16LE(r+m.CENVER),this.flags=t.readUInt16LE(r+m.CENFLG),this.method=t.readUInt16LE(r+m.CENHOW);let n=t.readUInt16LE(r+m.CENTIM),o=t.readUInt16LE(r+m.CENTIM+2);this.time=$s(n,o),this.crc=t.readUInt32LE(r+m.CENCRC),this.compressedSize=t.readUInt32LE(r+m.CENSIZ),this.size=t.readUInt32LE(r+m.CENLEN),this.fnameLen=t.readUInt16LE(r+m.CENNAM),this.extraLen=t.readUInt16LE(r+m.CENEXT),this.comLen=t.readUInt16LE(r+m.CENCOM),this.diskStart=t.readUInt16LE(r+m.CENDSK),this.inattr=t.readUInt16LE(r+m.CENATT),this.attr=t.readUInt32LE(r+m.CENATX),this.offset=t.readUInt32LE(r+m.CENOFF)}readDataHeader(t){if(t.readUInt32LE(0)!==m.LOCSIG)throw new Error("Invalid local header");this.version=t.readUInt16LE(m.LOCVER),this.flags=t.readUInt16LE(m.LOCFLG),this.method=t.readUInt16LE(m.LOCHOW);let r=t.readUInt16LE(m.LOCTIM),n=t.readUInt16LE(m.LOCTIM+2);this.time=$s(r,n),this.crc=t.readUInt32LE(m.LOCCRC)||this.crc;let o=t.readUInt32LE(m.LOCSIZ);o&&o!==m.EF_ZIP64_OR_32&&(this.compressedSize=o);let i=t.readUInt32LE(m.LOCLEN);i&&i!==m.EF_ZIP64_OR_32&&(this.size=i),this.fnameLen=t.readUInt16LE(m.LOCNAM),this.extraLen=t.readUInt16LE(m.LOCEXT)}read(t,r,n){let o=t.slice(r,r+=this.fnameLen);this.name=n?n.decode(new Uint8Array(o)):o.toString("utf8");let i=t[r-1];this.isDirectory=i===47||i===92,this.extraLen&&(this.readExtra(t,r),r+=this.extraLen),this.comment=this.comLen?t.slice(r,r+this.comLen).toString():null}validateName(){if(/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name))throw new Error("Malicious entry: "+this.name)}readExtra(t,r){let n,o,i=r+this.extraLen;for(;r<i;)n=t.readUInt16LE(r),r+=2,o=t.readUInt16LE(r),r+=2,m.ID_ZIP64===n&&this.parseZip64Extra(t,r,o),r+=o}parseZip64Extra(t,r,n){n>=8&&this.size===m.EF_ZIP64_OR_32&&(this.size=nt(t,r),r+=8,n-=8),n>=8&&this.compressedSize===m.EF_ZIP64_OR_32&&(this.compressedSize=nt(t,r),r+=8,n-=8),n>=8&&this.offset===m.EF_ZIP64_OR_32&&(this.offset=nt(t,r),r+=8,n-=8),n>=4&&this.diskStart===m.EF_ZIP64_OR_16&&(this.diskStart=t.readUInt32LE(r))}get encrypted(){return(this.flags&m.FLG_ENTRY_ENC)===m.FLG_ENTRY_ENC}get isFile(){return!this.isDirectory}},rt=class{constructor(t,r,n,o,i,s){this.fd=t,this.buffer=r,this.offset=n,this.length=o,this.position=i,this.callback=s,this.bytesRead=0,this.waiting=!1}read(t){ot.debugLog("read",this.position,this.bytesRead,this.length,this.offset),this.waiting=!0;let r;if(t){let n=0;try{n=Ie.readSync(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead)}catch(o){r=o}this.readCallback(t,r,r?n:null)}else Ie.read(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead,this.readCallback.bind(this,t))}readCallback(t,r,n){if(typeof n=="number"&&(this.bytesRead+=n),r||!n||this.bytesRead===this.length)return this.waiting=!1,this.callback(r,this.bytesRead);this.read(t)}},Xr=class{constructor(t){this.position=0,this.buffer=Buffer.alloc(0),this.fd=t,this.fsOp=null}checkOp(){if(this.fsOp&&this.fsOp.waiting)throw new Error("Operation in progress")}read(t,r,n){this.checkOp(),this.buffer.length<r&&(this.buffer=Buffer.alloc(r)),this.position=t,this.fsOp=new rt(this.fd,this.buffer,0,r,this.position,n).read()}expandLeft(t,r){this.checkOp(),this.buffer=Buffer.concat([Buffer.alloc(t),this.buffer]),this.position-=t,this.position<0&&(this.position=0),this.fsOp=new rt(this.fd,this.buffer,0,t,this.position,r).read()}expandRight(t,r){this.checkOp();let n=this.buffer.length;this.buffer=Buffer.concat([this.buffer,Buffer.alloc(t)]),this.fsOp=new rt(this.fd,this.buffer,n,t,this.position+n,r).read()}moveRight(t,r,n){this.checkOp(),n?this.buffer.copy(this.buffer,0,n):n=0,this.position+=n,this.fsOp=new rt(this.fd,this.buffer,this.buffer.length-n,n,this.position+this.buffer.length-n,r).read()}},Xn=class extends _s.Readable{constructor(t,r,n){super(),this.fd=t,this.offset=r,this.length=n,this.pos=0,this.readCallback=this.readCallback.bind(this)}_read(t){let r=Buffer.alloc(Math.min(t,this.length-this.pos));r.length?Ie.read(this.fd,r,0,r.length,this.offset+this.pos,this.readCallback):this.push(null)}readCallback(t,r,n){this.pos+=r,t?(this.emit("error",t),this.push(null)):r?(r!==n.length&&(n=n.slice(0,r)),this.push(n)):this.push(null)}},qn=class extends _s.Transform{constructor(t,r,n){super(),this.verify=new qr(r,n),t.on("error",o=>{this.emit("error",o)})}_transform(t,r,n){let o;try{this.verify.data(t)}catch(i){o=i}n(o,t)}},qr=class e{constructor(t,r){this.crc=t,this.size=r,this.state={crc:-1,size:0}}data(t){let r=e.getCrcTable(),n=this.state.crc,o=0,i=t.length;for(;--i>=0;)n=r[(n^t[o++])&255]^n>>>8;if(this.state.crc=n,this.state.size+=t.length,this.state.size>=this.size){let s=Buffer.alloc(4);if(s.writeInt32LE(~this.state.crc&4294967295,0),n=s.readUInt32LE(0),n!==this.crc)throw new Error("Invalid CRC");if(this.state.size!==this.size)throw new Error("Invalid size")}}static getCrcTable(){let t=e.crcTable;if(!t){e.crcTable=t=[];let r=Buffer.alloc(4);for(let n=0;n<256;n++){let o=n;for(let i=8;--i>=0;)(o&1)!==0?o=3988292384^o>>>1:o=o>>>1;o<0&&(r.writeInt32LE(o,0),o=r.readUInt32LE(0)),t[n]=o}}return t}};function $s(e,t){let r=Os(e,16),n=Os(t,16),o={h:parseInt(r.slice(0,5).join(""),2),m:parseInt(r.slice(5,11).join(""),2),s:parseInt(r.slice(11,16).join(""),2)*2,Y:parseInt(n.slice(0,7).join(""),2)+1980,M:parseInt(n.slice(7,11).join(""),2),D:parseInt(n.slice(11,16).join(""),2)},i=[o.Y,o.M,o.D].join("-")+" "+[o.h,o.m,o.s].join(":")+" GMT+0";return new Date(i).getTime()}function Os(e,t){let r=(e>>>0).toString(2);for(;r.length<t;)r="0"+r;return r.split("")}function nt(e,t){return e.readUInt32LE(t+4)*4294967296+e.readUInt32LE(t)}Fs.exports=ot});var Bc=V((RS,Mc)=>{Mc.exports={Other:0,CR:1,LF:2,Control:4,Extend:8,ZWJ:16,Regional_Indicator:32,Prepend:64,SpacingMark:128,L:256,V:512,T:1024,LV:2048,LVT:4096,Extended_Pictographic:8192,InCB_Linker:16384,InCB_Consonant:32768,InCB_Extend:65536}});var zc=V(($S,Tf)=>{Tf.exports={data:"ABAOAAAAAADQjQAAAd4HIfjtnG2oFUUYxx/1nHu29OolvKRSZIIQghSSEFJwwj4YWdzoFcoQyriBHwz8YHDBiSKDLG9YKSEiUX4IFQ0FCaRLoFmUb9mLBqJ+EDOIsAgpjf7b7nCnOTO7M7szu8frPPBjZufleZ6ZeWZm73pwYALRk2ApGAQMvC6UlU2HwUbwDthk0P5DsC2jfifYC0bAQXAE/AhOgXNCu1/A7+ASoAZRD5gMekE/mAFmge1gN9jbSPrOSdPPkM4DX4AvwVFwApwBZ8EFcBH8Bf4GE5pEUXP0uQ/5ac2k/UyktzWT/ncgPYj0rmZip91M6hc1R/U/hPzj4BnwPBgECwT7cb8VKFsZJflVyK9O9cW8gvwb6fM6pO+l+c1It4Lt4Hah/R7k94H94BuhPGZDNMqWlK1gf4rYNovthu1c8x3G8xOYmhKXnUH6c5pf0/h/+8Uo/1Wagz+bev1X0rpGD9GkniS/FjRTvVNRdiO4BcwGc8H8tN3dabqwp1Pv/Sh7WFHOGU4pOz9vws/1qa+PCuXxGHZmjDtQAdL6n1DEgAs7NwnrvCQj5gKBQCAQCAQCgUAgEOgGnsPfrlOE7zlvG3y/WI4+K4W/eYciotVgCGWv8u85SNeDjVHyPXAj8tORbknrtyLdAT5Jnz9Fehnp5zl/S3+F+kPQeRgcAUfBMfAtOB6FulAX6kJdqHNdtwPsAQei+u+sQCAwdjnk+d9TNk0Y/Xd1mUFFmfh+vKHhxycbRnoTaDLR0t582mg3oGg7LJWN4JmmoD1YNSUp24b0NJjWR3QnGAT3TcT7Pzh7HdGt1xNF4xKeFvIiu9D25ER1nczqVMeMSUS7kX8M6bvgMKBeMx2BQCAQGJv8gXuhEd8nLaJ/cB+2cCdPaiW/E2ojvyi9oyOkN6B8Df5mmZbW34x0QLjDZ7eS707i/Rr/ZmRua/R3ZPORv6eV1C2MU/R/MP1O9gCeH2mN9n0K+Wdb+rt7EHUrhPpVreS7GH9mQt1ryL+VoWt9Rl3MEuhdJr2vvI8+H4CPwQuo25XqeLHAe81ewf4I8gckf77G80up3uM5voqcRNuX0e800vMW/XwyBH7rEl9EZiC2n6jQ3masyxzY/EHxnXjeVfptIP797rAAkxjO4KNGZ/trjTJz/33O33rTpXPpVBf+1u4cfLqg8Wuxo9+Dnk/1XzQc/6W03RWhrD+dSzI4x+K/eS914Xnnisvp2MY7OrP2ldAToe86MFnQ0X+VnqU2xOfnrCh5f3Oha0GUpPciXQQGrqY5hK9LBX+nK/aebaweS8+AZSXnIa9/v4MzTh7b2jH6O/rlJdfiZBeMoUFmjBfy4wz7mBCkPgnz7y6Oq4x/l+sWXeO4lKrsdJvUvYZF111MdfmxLm0NpmI7591853Tj+VJVDGaNoZ3TRtahautDRL/qkm6KlW6Wa2EeXI3N5Ry0SX+e26xJ27K9K5iijNJyjvwsnllZ4mKeZbuy72I5F5VvNr6o+hcVbredoVc3/y7vN/keke0ywS6T6tqOfOE2mQKS8rJ/3A8mpHWfZVl7qq0oV0lbQ9m9bOszt+lb5LWsU8TxN8j9+LnOPnL3Pc73tz4X31fy7mVdDObZcnHfdev3VNV86ebRtF1VUsSui7U0OQ/rEvE8Jsp+j1H5Lbfnecrpa+Nf1XEi2mZUz/qIe4b7oJtDXi8/m85bN69HJOXr2i9Z+0PVVuW36n5x6V8Z/Yw640s+t5nQlpGfOPAdX2XPI5d+iP6wDJ8YFdvfRc/bOkR31jKpXHx2eb7J91kd7yaMOseb9w6Vp7PO9YyFUWeMM6pvfC7mhBXoI78z1SnyfDPLvqoyRp1nmNieZeAqRlUxV+Ssz3vvdSWm/paJ87ruuipsyTGmssfI3X4zWSMVTFNOlD1PNjbK+OeKsmI6b/J4mdTWp+TZ8jkfRXXEwgz0lPXZx9z7PruqOhdNYlqMZR2qeHe1N33OQdYYVeWyiG3l/rKeKteS2/UhXDdP885CMaWcPqbzaBJTOt1ViqnPjOqJmSzxcbfWtQ6iMNLPv6tx5om8fxh1niUu/GA5mMalq3lQnQ+25PmtspnlDxdRrwupaw/7WCvb9VLpynrWlbkURp17zrcPjNT7rSopsr9cnX95+861PRN/bM8Y1/YZmd0//Fmnp0oxvRvk5yJ2TNqwArpdiY+Y4Kk8b1nzWGSOGZnFF29nK1ynHAuiraK6XUudPlRh2+ZM1d3xJnp9S9H3Op2OKu4Xn7qrfn9gVO+Za3oe6vrq7vWq3z24Py6Fkf59Qjd2VzZ0dnXC62x89iGi7xwuumebc8ZUZFum81BlvKoka+19+cLIPGZU7fizT3GlP29+xfEwKa864+oUk3OCkXp9maJtFeLaJqNisctTG9HFRh13XZaoxmd6T7sWRuZz5Ssus3zgIseI2F7WVbWYzFsVsWZzT5veHWVE1qWaj7w4cyWma6TyMW8cTJP37bvchqQ6Gx+YAlkfL/exPqIt0b5r4brz5lPVzqfo9GfZLRrTNmMx1cfIz5z5Pkd9ntfyvilCnv6y/tr2q+ouM/WhbPyX2UNFdPqSqs6pLLuucWXLZAw24/UlOt9dzqELn1z5Zrtv8uz6EF82ZlaEK2FU7vtpXcIsydJRhbCa+e8/D60bUcbXTMMzfRK24nKssvgYr+x71lh8iO/1tBl/LPGlIseAT6q2J8m/"}});var Gc=V((OS,Af)=>{Af.exports={data:"AAACAAAAAACAOAAAAbYBSf7t2S1IBEEYBuDVDZ7FYrQMNsFiu3hgEYOI0SCXRIUrB8JhEZtgs5gEg1GMFk02m82oGI02m+9xezCOczv/uwv3fvAwc/PzfXOzcdqzWdaBDdiGPdiHdjE+DS3RNDuCfsn8idQ/g3OH3BdwKf0e96/gumTfYcncLdzBPTzAo+RZ+f0Cr/AG7/AJX4738x1wtz9FO5PX/50n6UXMNdfg/0lERERERERERERERETpdedHBvDRql4nq0cXtW9af98qdRby0Vvp8K4W0V+C5Xw0t4J2bfjeBp3cnEu1brnnCTYNa7eKdz91XP7WO9Lb4GqRb7cY6xbtAdqeVOsY/QGcevw/tb6OT85YhvfKYEx9CMuxKsKnrs+eJtVInVvHJ0eVYVvTZk2siFVLOCjb61PTZX3MdVWEyP7fjzpmMxdzTyq2Ebue6x61nXRGnzndWpf1an7dXmGYE4Y1ptqqKsK1nu26Ju0ty+maV2Rpvk+qnDZjKUIobUiesdAQE/jmCTmHmsskpFZsVYbtmXRcaoSGUPomunW2derQhDPFjtT1Q/eb8vnm990fq35oHVt11bU9m89c7DNI8Qs="}});var Wc=V((_S,Pf)=>{Pf.exports={data:"AAgOAAAAAABQfgAAAWMGnPntmm2IVUUYx+dyb2ezXXtBiSCLsKDIiKIIoYINciGwQHrRL2Ufii0qMsv7QVBuQkXhkmW5gksQRhRFSBslbkllHyy3L2XllkXrB3uhF0tQ0Kj+xzN3d3buzJx5PeesOw/8mDNvz/PMnOc8s/fs6asTcgu4A9wF+mjdV9kEa8FqsE5j/DPgeUX/JvASeBW8Bd4GO8CHYDcz7nPwFRgD4+An8Cf4AxwBx0G9QcjrYBt4p5HN/YDqGEF9F7gW3AC6wU1gCVgK5oDlYA8YBXvBGOgHD4FzwSo6fg24EDwBxsEB8Cu1N4ByI1gA/gbfo+0wyuO0vgW8DK5i+tN5tVOyMmUWrs9k6nNxPY/WL0B5Mb2+HOU14HrwY2Ny/CLUbwa3gzsZPT7ZGECnDvdiPQ+ARyhpWxPlWnr9JLfeAdS/43S8qNiTIdq3FeUb9HolOEj7h9H2LtgJPgHr0TZKx31Jy30C/T+g7aDCbpPiuj/fStrTNfQGioWIHr9z+z8iiAEfdg4zdo7Gex6JRCKRSCQSiUQikYrzL367HmLq8zV+yyYJIbOTzva5aJtH2y9CuYBebwdX4PoYyv107ELUe5PsPWBavzHJ3tMtFuhluTWnPxKJRCKRSCQy/TjQCKt/XX3y/+o6HPJs35XNszPO0WQf+FnQfsnpU+vLUN8MdgNyRtZ2Ncp7wBDYDn4D47MIOes0QpaADeDUWsYe5pql3k3IZd3iPp4H6bjnUI6Cf8B1PYQ0wWCPno5IJBKJnJx83eN2fi7NeYd0jKsvr+A7p3749KzkXd2Ap+9R7qfrflhz/ava45m2I7Rcw+lI3/WtAO+Bx5PsG6+nk+xbv7Q/fWe4gc7ZRPu3oNzK6Hktmfy2r036vc82On44yb4ZHKFzPkL5aZJ9f9hH7Y8y+nbheq9irWOpf0z/L8nUWPmL6TuK6/8Uuhpd6r3sRv8cbszZXZm981HOB5fS/itzdIlYyMzpTa85HYtRv422LTPQ/yjd+/SZudvCr1DcV5Iv6W+HFRXaB988Rte2ugJrHKTPW4vx5akK+MWzvoI++Sb9zvKFriy/m8wbwpxXQL/gDNs5Tb+zTPfiza6sHEa5A3w8jWLgM/j6BePvoOBcM33+v6Hj9zvuQ978lR5ihl/bedM0DvN4vwI+NOvy7/SbCkze51WVRfXaCaJEmdlSm+H4lKLsVE3Kvoe2950tZdcnu5T1rISQKuaHovZNZw26/aKxvn0tS6oUG1WWmbAPvtbGjzPU2WvgV4uoEc7PkQ77MhHoYu1K7YvOVhv7uuJ7/QpdLcKtX2ZPthc1A/tEcK/zbAW+/0rbnqRVAlPuk0gC5b5cv1Q+BbIp8kGnX2VjQmT7bLm/Hfp1RfZ3kAdpGZI3h2iMnZCC47ftj+351WJ06PTLxk6I7OxxWH8rd4RCRHHuKC1DbOaIdJyQAn4vuPpqS8d5HVJUfy+p2lXjihIbuya/L2wowkae3TJEZFfmjywnBshRSl9s9Je1v7z9kL7bPE9Fi+xMlf09Z3Ne2KxNFu8qf2x02ojMD9McrpOLivTX9j6F9l/HfmgbotKnfp9nJCHqffFho0hcxWRNhHTarUI8h94PGx28Pp2xrrZ8SehcFToPhvabvbZ5JkXx4etZd4lZfn0+pIz8oMoRunpsbPgUUZ4NaYu1qcr9vC+2MWsa8yHOPlOxfU7L9Fnkg0t+0dGdZ9O38PGr6nPxwzRWXUX0/JmSN09kU+WPyD8f4jM+ioo7lW1femzuv0iXqi5r8yGq/fBts+gca/M8+orLvOc0RJ7P88c0J/m2L/OFbzfVa5LrXc4WH2NsbJrulcsafa+T99lFVwgpwr7JMy47U3T0FiFF56uQuss4j3gfbOb68sUlB6vOjaLPtrbdkLp9nZmqffcpqnurk4NU+oq8rzIx2Xddv8tel+peydar+htBpIufH0J4O2XFCCu2z0GZayjyDMzLS6Z+yGK1Sjmk7RNbtq91zrXQfumeOb58MdGTtxdlngmyc09nTlmxqfMcmvij67OJXV3R3dOQsZznh6qfkOL80M3BuvtW1B7yY2R+FLG/MsnzVXd+aF9VuUk1xzWudPwy1edzz1x8t9UfyndbHTY2yxTdHOCa92zj3CR+Te6fjzX5Ftf9M/E1VC4yzVehROa77/h09cmXb6Zxm2c3pPjSH9bn/wE="}});var tl=V((FS,el)=>{var Ro=0,Yc=-3;function Rr(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function kf(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new Rr,this.dtree=new Rr}var Zc=new Rr,Xc=new Rr,$o=new Uint8Array(30),Oo=new Uint16Array(30),qc=new Uint8Array(30),Jc=new Uint16Array(30),Lf=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hc=new Rr,De=new Uint8Array(320);function Qc(e,t,r,n){var o,i;for(o=0;o<r;++o)e[o]=0;for(o=0;o<30-r;++o)e[o+r]=o/r|0;for(i=n,o=0;o<30;++o)t[o]=i,i+=1<<e[o]}function Rf(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}var Kc=new Uint16Array(16);function ko(e,t,r,n){var o,i;for(o=0;o<16;++o)e.table[o]=0;for(o=0;o<n;++o)e.table[t[r+o]]++;for(e.table[0]=0,i=0,o=0;o<16;++o)Kc[o]=i,i+=e.table[o];for(o=0;o<n;++o)t[r+o]&&(e.trans[Kc[t[r+o]]++]=o)}function $f(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=e.tag&1;return e.tag>>>=1,t}function Ue(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function Lo(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,o=0,i=e.tag;do n=2*n+(i&1),i>>>=1,++o,r+=t.table[o],n-=t.table[o];while(n>=0);return e.tag=i,e.bitcount-=o,t.trans[r+n]}function Of(e,t,r){var n,o,i,s,a,c;for(n=Ue(e,5,257),o=Ue(e,5,1),i=Ue(e,4,4),s=0;s<19;++s)De[s]=0;for(s=0;s<i;++s){var l=Ue(e,3,0);De[Lf[s]]=l}for(ko(Hc,De,0,19),a=0;a<n+o;){var f=Lo(e,Hc);switch(f){case 16:var b=De[a-1];for(c=Ue(e,2,3);c;--c)De[a++]=b;break;case 17:for(c=Ue(e,3,3);c;--c)De[a++]=0;break;case 18:for(c=Ue(e,7,11);c;--c)De[a++]=0;break;default:De[a++]=f;break}}ko(t,De,0,n),ko(r,De,n,o)}function jc(e,t,r){for(;;){var n=Lo(e,t);if(n===256)return Ro;if(n<256)e.dest[e.destLen++]=n;else{var o,i,s,a;for(n-=257,o=Ue(e,$o[n],Oo[n]),i=Lo(e,r),s=e.destLen-Ue(e,qc[i],Jc[i]),a=s;a<s+o;++a)e.dest[e.destLen++]=e.dest[a]}}}function _f(e){for(var t,r,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!==(~r&65535))return Yc;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,Ro}function Ff(e,t){var r=new kf(e,t),n,o,i;do{switch(n=$f(r),o=Ue(r,2,0),o){case 0:i=_f(r);break;case 1:i=jc(r,Zc,Xc);break;case 2:Of(r,r.ltree,r.dtree),i=jc(r,r.ltree,r.dtree);break;default:i=Yc}if(i!==Ro)throw new Error("Data error")}while(!n);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}Rf(Zc,Xc);Qc($o,Oo,4,3);Qc(qc,Jc,2,1);$o[28]=0;Oo[28]=258;el.exports=Ff});var ol=V((NS,nl)=>{var Nf=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,rl=(e,t,r)=>{let n=e[t];e[t]=e[r],e[r]=n},Df=e=>{let t=e.length;for(let r=0;r<t;r+=4)rl(e,r,r+3),rl(e,r+1,r+2)},Uf=e=>{Nf&&Df(e)};nl.exports={swap32LE:Uf}});var cl=V((DS,al)=>{var il=tl(),{swap32LE:Vf}=ol(),No=11,Mt=5,Mf=No-Mt,Bf=65536>>No,zf=1<<Mf,Gf=zf-1,yn=2,Wf=1<<Mt,_o=Wf-1,sl=65536>>Mt,Hf=1024>>Mt,Kf=sl+Hf,jf=Kf,Yf=32,Zf=jf+Yf,Xf=1<<yn,Fo=class{constructor(t){let r=typeof t.readUInt32BE=="function"&&typeof t.slice=="function";if(r||t instanceof Uint8Array){let n;if(r)this.highStart=t.readUInt32LE(0),this.errorValue=t.readUInt32LE(4),n=t.readUInt32LE(8),t=t.slice(12);else{let o=new DataView(t.buffer);this.highStart=o.getUint32(0,!0),this.errorValue=o.getUint32(4,!0),n=o.getUint32(8,!0),t=t.subarray(12)}t=il(t,new Uint8Array(n)),t=il(t,new Uint8Array(n)),Vf(t),this.data=new Uint32Array(t.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=t)}get(t){let r;return t<0||t>1114111?this.errorValue:t<55296||t>56319&&t<=65535?(r=(this.data[t>>Mt]<<yn)+(t&_o),this.data[r]):t<=65535?(r=(this.data[sl+(t-55296>>Mt)]<<yn)+(t&_o),this.data[r]):t<this.highStart?(r=this.data[Zf-Bf+(t>>No)],r=this.data[r+(t>>Mt&Gf)],r=(r<<yn)+(t&_o),this.data[r]):this.data[this.data.length-Xf]}};al.exports=Fo});var ll=V((Do,Uo)=>{(function(e,t){typeof Do=="object"&&typeof Uo<"u"?Uo.exports=t():typeof define=="function"&&define.amd?define(t):(function(){var r=e.Base64,n=t();n.noConflict=function(){return e.Base64=r,n},e.Meteor&&(Base64=n),e.Base64=n})()})(typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Do,function(){"use strict";var e="3.7.7",t=e,r=typeof Buffer=="function",n=typeof TextDecoder=="function"?new TextDecoder:void 0,o=typeof TextEncoder=="function"?new TextEncoder:void 0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=Array.prototype.slice.call(i),a=(function(u){var S={};return u.forEach(function(se,Ee){return S[se]=Ee}),S})(s),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),f=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(u){return new Uint8Array(Array.prototype.slice.call(u,0))},b=function(u){return u.replace(/=/g,"").replace(/[+\/]/g,function(S){return S=="+"?"-":"_"})},C=function(u){return u.replace(/[^A-Za-z0-9\+\/]/g,"")},x=function(u){for(var S,se,Ee,vt,Me="",En=u.length%3,_r=0;_r<u.length;){if((se=u.charCodeAt(_r++))>255||(Ee=u.charCodeAt(_r++))>255||(vt=u.charCodeAt(_r++))>255)throw new TypeError("invalid character found");S=se<<16|Ee<<8|vt,Me+=s[S>>18&63]+s[S>>12&63]+s[S>>6&63]+s[S&63]}return En?Me.slice(0,En-3)+"===".substring(En):Me},A=typeof btoa=="function"?function(u){return btoa(u)}:r?function(u){return Buffer.from(u,"binary").toString("base64")}:x,I=r?function(u){return Buffer.from(u).toString("base64")}:function(u){for(var S=4096,se=[],Ee=0,vt=u.length;Ee<vt;Ee+=S)se.push(l.apply(null,u.subarray(Ee,Ee+S)));return A(se.join(""))},g=function(u,S){return S===void 0&&(S=!1),S?b(I(u)):I(u)},E=function(u){if(u.length<2){var S=u.charCodeAt(0);return S<128?u:S<2048?l(192|S>>>6)+l(128|S&63):l(224|S>>>12&15)+l(128|S>>>6&63)+l(128|S&63)}else{var S=65536+(u.charCodeAt(0)-55296)*1024+(u.charCodeAt(1)-56320);return l(240|S>>>18&7)+l(128|S>>>12&63)+l(128|S>>>6&63)+l(128|S&63)}},k=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,L=function(u){return u.replace(k,E)},U=r?function(u){return Buffer.from(u,"utf8").toString("base64")}:o?function(u){return I(o.encode(u))}:function(u){return A(L(u))},N=function(u,S){return S===void 0&&(S=!1),S?b(U(u)):U(u)},j=function(u){return N(u,!0)},Ce=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,je=function(u){switch(u.length){case 4:var S=(7&u.charCodeAt(0))<<18|(63&u.charCodeAt(1))<<12|(63&u.charCodeAt(2))<<6|63&u.charCodeAt(3),se=S-65536;return l((se>>>10)+55296)+l((se&1023)+56320);case 3:return l((15&u.charCodeAt(0))<<12|(63&u.charCodeAt(1))<<6|63&u.charCodeAt(2));default:return l((31&u.charCodeAt(0))<<6|63&u.charCodeAt(1))}},Ye=function(u){return u.replace(Ce,je)},It=function(u){if(u=u.replace(/\s+/g,""),!c.test(u))throw new TypeError("malformed base64.");u+="==".slice(2-(u.length&3));for(var S,se="",Ee,vt,Me=0;Me<u.length;)S=a[u.charAt(Me++)]<<18|a[u.charAt(Me++)]<<12|(Ee=a[u.charAt(Me++)])<<6|(vt=a[u.charAt(Me++)]),se+=Ee===64?l(S>>16&255):vt===64?l(S>>16&255,S>>8&255):l(S>>16&255,S>>8&255,S&255);return se},le=typeof atob=="function"?function(u){return atob(C(u))}:r?function(u){return Buffer.from(u,"base64").toString("binary")}:It,re=r?function(u){return f(Buffer.from(u,"base64"))}:function(u){return f(le(u).split("").map(function(S){return S.charCodeAt(0)}))},d=function(u){return re(p(u))},y=r?function(u){return Buffer.from(u,"base64").toString("utf8")}:n?function(u){return n.decode(re(u))}:function(u){return Ye(le(u))},p=function(u){return C(u.replace(/[-_]/g,function(S){return S=="-"?"+":"/"}))},w=function(u){return y(p(u))},R=function(u){if(typeof u!="string")return!1;var S=u.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(S)||!/[^\s0-9a-zA-Z\-_]/.test(S)},P=function(u){return{value:u,enumerable:!1,writable:!0,configurable:!0}},H=function(){var u=function(S,se){return Object.defineProperty(String.prototype,S,P(se))};u("fromBase64",function(){return w(this)}),u("toBase64",function(S){return N(this,S)}),u("toBase64URI",function(){return N(this,!0)}),u("toBase64URL",function(){return N(this,!0)}),u("toUint8Array",function(){return d(this)})},Y=function(){var u=function(S,se){return Object.defineProperty(Uint8Array.prototype,S,P(se))};u("toBase64",function(S){return g(this,S)}),u("toBase64URI",function(){return g(this,!0)}),u("toBase64URL",function(){return g(this,!0)})},ge=function(){H(),Y()},Ze={version:e,VERSION:t,atob:le,atobPolyfill:It,btoa:A,btoaPolyfill:x,fromBase64:w,toBase64:N,encode:N,encodeURI:j,encodeURL:j,utob:L,btou:Ye,decode:w,isValid:R,fromUint8Array:g,toUint8Array:d,extendString:H,extendUint8Array:Y,extendBuiltins:ge};return Ze.Base64={},Object.keys(Ze).forEach(function(u){return Ze.Base64[u]=Ze[u]}),Ze})});var dl=V((US,ul)=>{var T=Bc(),qf=zc().data,Jf=Gc().data,Qf=Wc().data,Vo=cl(),Mo=ll().Base64,ep=new Vo(Mo.toUint8Array(qf)),tp=new Vo(Mo.toUint8Array(Jf)),rp=new Vo(Mo.toUint8Array(Qf));function _(e,t){return(e&t)!==0}function np(e,t,r){let n=t.length;for(let o=r;o+1<n;o++){let i=t[o+0],s=t[o+1];switch(e.gb9c){case 0:_(i,T.InCB_Consonant)&&(e.gb9c=1);break;case 1:_(i,T.InCB_Extend)?e.gb9c=1:_(i,T.InCB_Linker)?e.gb9c=2:e.gb9c=_(i,T.InCB_Consonant)?1:0;break;case 2:_(i,T.InCB_Extend|T.InCB_Linker)?e.gb9c=2:e.gb9c=_(i,T.InCB_Consonant)?1:0;break}switch(e.gb11){case 0:_(i,T.Extended_Pictographic)&&(e.gb11=1);break;case 1:_(i,T.Extend)?e.gb11=1:_(i,T.ZWJ)?e.gb11=2:e.gb11=_(i,T.Extended_Pictographic)?1:0;break;case 2:e.gb11=_(i,T.Extended_Pictographic)?1:0;break}switch(e.gb12){case 0:_(i,T.Regional_Indicator)?e.gb12=1:e.gb12=-1;break;case 1:_(i,T.Regional_Indicator)?e.gb12=0:e.gb12=-1;break}switch(e.gb13){case 0:_(i,T.Regional_Indicator)||(e.gb13=1);break;case 1:_(i,T.Regional_Indicator)?e.gb13=2:e.gb13=1;break;case 2:e.gb13=1;break}if(!(_(i,T.CR)&&_(s,T.LF))){if(_(i,T.Control|T.CR|T.LF)||_(s,T.Control|T.CR|T.LF))return o+1-r;if(!(_(i,T.L)&&_(s,T.L|T.V|T.LV|T.LVT))&&!(_(i,T.LV|T.V)&&_(s,T.V|T.T))&&!(_(i,T.LVT|T.T)&&_(s,T.T))&&!_(s,T.Extend|T.ZWJ)&&!_(s,T.SpacingMark)&&!_(i,T.Prepend)&&!(_(s,T.InCB_Consonant)&&e.gb9c===2)&&!(_(s,T.Extended_Pictographic)&&e.gb11===2)&&!(_(s,T.Regional_Indicator)&&e.gb12===1)&&!(_(s,T.Regional_Indicator)&&e.gb13===2))return o+1-r}}return n-r}ul.exports=function(t){let r=[],n=[0],o=[];for(let s=0;s<t.length;){let a=t.codePointAt(s);o.push(ep.get(a)|tp.get(a)|rp.get(a)),s+=a>65535?2:1,n.push(s)}let i={gb9c:0,gb11:0,gb12:0,gb13:0};for(let s=0;s<o.length;){let a=np(i,o,s),c=n[s],l=n[s+a];r.push(t.slice(c,l)),s+=a}return r}});var Rp={};Fl(Rp,{default:()=>Lp});module.exports=Nl(Rp);var Ve=require("@raycast/api");var sr=require("@raycast/api"),ec=require("react");var Ae=require("@raycast/api");var Aa=require("@raycast/api");var Nr=require("react"),Ho=(0,Nr.createContext)(null),$=()=>{let e=(0,Nr.useContext)(Ho);if(e==null)throw new Error("useSelectVaultItem must be used within a VaultItemContext.Provider");return e},Ko=Ho;var nr=require("@raycast/api");var Xe=require("@raycast/api"),Ct=require("react/jsx-runtime"),Dl=e=>{let{description:t,onConfirm:r}=e;function n(o){r(o.password)}return(0,Ct.jsxs)(Xe.Form,{navigationTitle:"Confirmation Required",actions:(0,Ct.jsx)(Xe.ActionPanel,{children:(0,Ct.jsx)(Xe.Action.SubmitForm,{title:"Confirm",onSubmit:n})}),children:[(0,Ct.jsx)(Xe.Form.Description,{title:"Confirmation Required for",text:t}),(0,Ct.jsx)(Xe.Form.PasswordField,{autoFocus:!0,id:"password",title:"Master Password"})]})},jo=Dl;var rr=require("@raycast/api"),st=require("react");var O=require("@raycast/api"),Sr=require("react");var zt=require("@raycast/api");var Le={VISA:"Visa",MASTERCARD:"Mastercard",AMEX:"Amex",DISCOVER:"Discover",DINERS_CLUB:"Diners Club",JCB:"JCB",MAESTRO:"Maestro",UNION_PAY:"UnionPay",RU_PAY:"RuPay",OTHER:"Other"};var Yo="https://bitwarden.com",ur="HIDDEN-VALUE",M={PASSWORD_OPTIONS:"bw-generate-password-options",PASSWORD_ONE_TIME_WARNING:"bw-generate-password-warning-accepted",SESSION_TOKEN:"sessionToken",REPROMPT_HASH:"sessionRepromptHash",SERVER_URL:"cliServer",LAST_ACTIVITY_TIME:"lastActivityTime",VAULT_LOCK_REASON:"vaultLockReason",VAULT_FAVORITE_ORDER:"vaultFavoriteOrder",VAULT_LAST_STATUS:"lastVaultStatus"},Tt={TIMEOUT:"Vault timed out due to inactivity",MANUAL:"Manually locked by the user",SYSTEM_LOCK:"Screen was locked",SYSTEM_SLEEP:"System went to sleep",CLI_UPDATED:"Bitwarden has been updated. Please login again."},Gt=["1","2","3","4","5","6","7","8","9","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","+","-",".",","],At={ALL:"all",NO_FOLDER:"no-folder"},ye={IV:"iv",VAULT:"vault",CURRENT_FOLDER_ID:"currentFolderId",SEND_TYPE_FILTER:"sendTypeFilter",CLI_VERSION:"cliVersion"},xe={1:zt.Icon.Globe,3:zt.Icon.CreditCard,4:zt.Icon.Person,2:zt.Icon.Document,5:zt.Icon.Key};var Ft=require("react");var X=require("@raycast/api");var xs=require("node:buffer"),Is=ne(require("node:path"),1),Gn=ne(require("node:child_process"),1),mr=ne(require("node:process"),1),vs=ne(Ni(),1);function Rn(e){let t=typeof e=="string"?`
`:10,r=typeof e=="string"?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}var dr=ne(require("node:process"),1),Kt=ne(require("node:path"),1),Di=ne(require("node:url"),1);function Ur(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}function uu(e={}){let{cwd:t=dr.default.cwd(),path:r=dr.default.env[Ur()],execPath:n=dr.default.execPath}=e,o,i=t instanceof URL?Di.default.fileURLToPath(t):t,s=Kt.default.resolve(i),a=[];for(;o!==s;)a.push(Kt.default.join(s,"node_modules/.bin")),o=s,s=Kt.default.resolve(s,"..");return a.push(Kt.default.resolve(i,n,"..")),[...a,r].join(Kt.default.delimiter)}function Ui({env:e=dr.default.env,...t}={}){e={...e};let r=Ur({env:e});return t.path=e[r],e[r]=uu(t),e}var du=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let o=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!fu(o,i)&&n||Object.defineProperty(e,r,i)},fu=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},pu=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},mu=(e,t)=>`/* Wrapped ${e}*/
${t}`,hu=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),gu=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),yu=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,o=mu.bind(null,n,t.toString());Object.defineProperty(o,"name",gu),Object.defineProperty(e,"toString",{...hu,value:o})};function $n(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let o of Reflect.ownKeys(t))du(e,t,o,r);return pu(e,t),yu(e,t,n),e}var Vr=new WeakMap,Vi=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,o=e.displayName||e.name||"<anonymous>",i=function(...s){if(Vr.set(i,++n),n===1)r=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${o}\` can only be called once`);return r};return $n(i,e),Vr.set(i,n),i};Vi.callCount=e=>{if(!Vr.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Vr.get(e)};var Mi=Vi;var Ki=require("node:os");var Bi=function(){let e=Gi-zi+1;return Array.from({length:e},wu)},wu=function(e,t){return{name:`SIGRT${t+1}`,number:zi+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},zi=34,Gi=64;var Hi=require("node:os");var Wi=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var On=function(){let e=Bi();return[...Wi,...e].map(bu)},bu=function({name:e,number:t,description:r,action:n,forced:o=!1,standard:i}){let{signals:{[e]:s}}=Hi.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:n,forced:o,standard:i}};var Su=function(){let e=On();return Object.fromEntries(e.map(Eu))},Eu=function({name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}){return[e,{name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}]},ji=Su(),xu=function(){let e=On(),t=65,r=Array.from({length:t},(n,o)=>Iu(o,e));return Object.assign({},...r)},Iu=function(e,t){let r=vu(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},vu=function(e,t){let r=t.find(({name:n})=>Ki.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},fm=xu();var Cu=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:o,exitCode:i,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${o})`:i!==void 0?`failed with exit code ${i}`:"failed",_n=({stdout:e,stderr:t,all:r,error:n,signal:o,exitCode:i,command:s,escapedCommand:a,timedOut:c,isCanceled:l,killed:f,parsed:{options:{timeout:b}}})=>{i=i===null?void 0:i,o=o===null?void 0:o;let C=o===void 0?void 0:ji[o].description,x=n&&n.code,I=`Command ${Cu({timedOut:c,timeout:b,errorCode:x,signal:o,signalDescription:C,exitCode:i,isCanceled:l})}: ${s}`,g=Object.prototype.toString.call(n)==="[object Error]",E=g?`${I}
${n.message}`:I,k=[E,t,e].filter(Boolean).join(`
`);return g?(n.originalMessage=n.message,n.message=k):n=new Error(k),n.shortMessage=E,n.command=s,n.escapedCommand=a,n.exitCode=i,n.signal=o,n.signalDescription=C,n.stdout=e,n.stderr=t,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=l,n.killed=f&&!c,n};var Mr=["stdin","stdout","stderr"],Tu=e=>Mr.some(t=>e[t]!==void 0),Yi=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return Mr.map(n=>e[n]);if(Tu(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Mr.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let r=Math.max(t.length,Mr.length);return Array.from({length:r},(n,o)=>t[o])};var ts=ne(require("node:os"),1),rs=ne(es(),1),Au=1e3*5,ns=(e,t="SIGTERM",r={})=>{let n=e(t);return Pu(e,t,r,n),n},Pu=(e,t,r,n)=>{if(!ku(t,r,n))return;let o=Ru(r),i=setTimeout(()=>{e("SIGKILL")},o);i.unref&&i.unref()},ku=(e,{forceKillAfterTimeout:t},r)=>Lu(e)&&t!==!1&&r,Lu=e=>e===ts.default.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Ru=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Au;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},os=(e,t)=>{e.kill()&&(t.isCanceled=!0)},$u=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},is=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let o,i=new Promise((a,c)=>{o=setTimeout(()=>{$u(e,r,c)},t)}),s=n.finally(()=>{clearTimeout(o)});return Promise.race([i,s])},ss=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},as=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;let o=(0,rs.default)(()=>{e.kill()});return n.finally(()=>{o()})};function cs(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}var Mn=ne(ds(),1),ms=ne(ps(),1),hs=(e,t)=>{t!==void 0&&(cs(t)?t.pipe(e.stdin):e.stdin.end(t))},gs=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let r=(0,ms.default)();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},Un=async(e,t)=>{if(!(!e||t===void 0)){e.destroy();try{return await t}catch(r){return r.bufferedData}}},Vn=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t?(0,Mn.default)(e,{encoding:t,maxBuffer:n}):Mn.default.buffer(e,{maxBuffer:n})},ys=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:i},s)=>{let a=Vn(e,{encoding:n,buffer:o,maxBuffer:i}),c=Vn(t,{encoding:n,buffer:o,maxBuffer:i}),l=Vn(r,{encoding:n,buffer:o,maxBuffer:i*2});try{return await Promise.all([s,a,c,l])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},Un(e,a),Un(t,c),Un(r,l)])}};var Mu=(async()=>{})().constructor.prototype,Bu=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Mu,e)]),Bn=(e,t)=>{for(let[r,n]of Bu){let o=typeof t=="function"?(...i)=>Reflect.apply(n.value,t(),i):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}return e},ws=e=>new Promise((t,r)=>{e.on("exit",(n,o)=>{t({exitCode:n,signal:o})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})});var bs=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],zu=/^[\w.-]+$/,Gu=/"/g,Wu=e=>typeof e!="string"||zu.test(e)?e:`"${e.replace(Gu,'\\"')}"`,Ss=(e,t)=>bs(e,t).join(" "),Es=(e,t)=>bs(e,t).map(r=>Wu(r)).join(" ");var Hu=1e3*1e3*100,Ku=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:o})=>{let i=t?{...mr.default.env,...e}:e;return r?Ui({env:i,cwd:n,execPath:o}):i},ju=(e,t,r={})=>{let n=vs.default._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:Hu,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||mr.default.cwd(),execPath:mr.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=Ku(r),r.stdio=Yi(r),mr.default.platform==="win32"&&Is.default.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},zn=(e,t,r)=>typeof t!="string"&&!xs.Buffer.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?Rn(t):t;function Cs(e,t,r){let n=ju(e,t,r),o=Ss(e,t),i=Es(e,t);ss(n.options);let s;try{s=Gn.default.spawn(n.file,n.args,n.options)}catch(x){let A=new Gn.default.ChildProcess,I=Promise.reject(_n({error:x,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return Bn(A,I)}let a=ws(s),c=is(s,n.options,a),l=as(s,n.options,c),f={isCanceled:!1};s.kill=ns.bind(null,s.kill.bind(s)),s.cancel=os.bind(null,s,f);let C=Mi(async()=>{let[{error:x,exitCode:A,signal:I,timedOut:g},E,k,L]=await ys(s,n.options,l),U=zn(n.options,E),N=zn(n.options,k),j=zn(n.options,L);if(x||A!==0||I!==null){let Ce=_n({error:x,exitCode:A,signal:I,stdout:U,stderr:N,all:j,command:o,escapedCommand:i,parsed:n,timedOut:g,isCanceled:f.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:s.killed});if(!n.options.reject)return Ce;throw Ce}return{command:o,escapedCommand:i,exitCode:0,stdout:U,stderr:N,all:j,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return hs(s,n.options.input),s.all=gs(s,n.options),Bn(s,C)}var be=require("fs");var Yu=require("@raycast/api"),As=require("crypto");var Ts="foobarbazzybaz";function Ps(e){return Object.entries(e).flatMap(([t,r])=>r?[`--${t}`,r]:[])}function Wn(e){return new Promise((t,r)=>{(0,As.pbkdf2)(e,Ts,1e5,64,"sha512",(n,o)=>{if(n!=null){r(n);return}t(o.toString("hex"))})})}var hr=require("@raycast/api");var Zu={IMMEDIATELY:"0",ONE_MINUTE:"60000",FIVE_MINUTES:"300000",FIFTEEN_MINUTES:"900000",THIRTY_MINUTES:"1800000",ONE_HOUR:"3600000",FOUR_HOURS:"14400000",EIGHT_HOURS:"28800000",ONE_DAY:"86400000",NEVER:"-1",SYSTEM_LOCK:"-2",SYSTEM_SLEEP:"-3"},fe=Object.entries(Zu).reduce((e,[t,r])=>(e[t]=parseInt(r),e),{});var ks={[fe.IMMEDIATELY]:"Immediately",[fe.ONE_MINUTE]:"1 Minute",[fe.FIVE_MINUTES]:"5 Minutes",[fe.FIFTEEN_MINUTES]:"15 Minutes",[fe.THIRTY_MINUTES]:"30 Minutes",[fe.ONE_HOUR]:"1 Hour",[fe.FOUR_HOURS]:"4 Hours",[fe.EIGHT_HOURS]:"8 Hours",[fe.ONE_DAY]:"1 Day"},qe={cardholderName:"Cardholder name",brand:"Brand",number:"Number",expMonth:"Expiration month",expYear:"Expiration year",code:"Security code (CVV)"},Je={title:"Title",firstName:"First name",middleName:"Middle name",lastName:"Last name",username:"Username",company:"Company",ssn:"Social Security number",passportNumber:"Passport number",licenseNumber:"License number",email:"Email",phone:"Phone",address1:"Address 1",address2:"Address 2",address3:"Address 3",city:"City / Town",state:"State / Province",postalCode:"Zip / Postal code",country:"Country"},Qe={1:"Login",3:"Card",4:"Identity",2:"Secure Note",5:"SSH Key"};function Kr(){let{serverUrl:e}=(0,hr.getPreferenceValues)();return!e||e==="bitwarden.com"||e==="https://bitwarden.com"?void 0:e}var Xu={search:"transientCopySearch","generate-password":"transientCopyGeneratePassword","generate-password-quick":"transientCopyGeneratePasswordQuick"};function q(e){let t=Xu[hr.environment.commandName],r=(0,hr.getPreferenceValues)()[t];return r==="never"?!1:r==="always"?!0:r==="passwords"?e==="password":!0}function Ls(e){return ks[e]}var Re=class extends Error{constructor(t,r){super(t),this.stack=r}},Xt=class extends Re{constructor(t,r){super(t,r)}};var et=class extends Xt{constructor(t,r){super(t??"Bitwarden CLI not found",r),this.name="InstalledCLINotFoundError",this.stack=r}},Lt=class extends Re{constructor(t,r){super(t??"Failed to load vault items",r),this.name="FailedToLoadVaultItemsError"}},jr=class extends Xt{constructor(t,r){super(t??"Vault is locked",r),this.name="VaultIsLockedError"}},gr=class extends Re{constructor(t,r){super(t??"Not logged in",r),this.name="NotLoggedInError"}},Rt=class extends Xt{constructor(t,r){super(t??"Failed do download Bitwarden CLI",r),this.name="EnsureCliBinError"}},Yr=class extends Re{constructor(t,r){super(t??"Premium status is required to use this feature",r),this.name="PremiumFeatureError"}},yr=class extends Re{constructor(t,r){super(t??"This Send has a is protected by a password",r),this.name="SendNeedsPasswordError"}},wr=class extends Re{constructor(t,r){super(t??"The password you entered is invalid",r),this.name="SendInvalidPasswordError"}};function $t(e,t){try{return e()}catch{return t}}function Hn(e){if(e instanceof Xt)return e.message}var Zr=e=>{if(e){if(typeof e=="string")return e;if(e instanceof Error){let{message:t,name:r}=e;return e.stack?e.stack:`${r}: ${t}`}return String(e)}};var _t=require("path"),er=require("fs/promises");var Be=require("fs"),Jr=require("fs/promises"),Ds=require("path"),Us=ne(Ns());function Qr(e){return new Promise((t,r)=>{let n=setInterval(()=>{if(!(0,Be.existsSync)(e))return;(0,Be.statSync)(e).isFile()&&(clearInterval(n),t())},300);setTimeout(()=>{clearInterval(n),r(new Error(`File ${e} not found.`))},5e3)})}async function Vs(e,t){let r=new Us.default.async({file:e});(0,Be.existsSync)(t)||(0,Be.mkdirSync)(t,{recursive:!0}),await r.extract(null,t),await r.close()}async function Ms(e,t){let r=!1;try{let n=await(0,Jr.readdir)(t);for await(let o of n)o.startsWith(e)&&await $t(async()=>{await(0,Jr.unlink)((0,Ds.join)(t,o)),r=!0})}catch{return!1}return r}function Bs(...e){for(let t of e)$t(()=>(0,Be.unlinkSync)(t))}var Qt=require("fs"),Ks=ne(require("http")),js=ne(require("https"));var Qn=require("@raycast/api");var zs=require("@raycast/api"),Ju={logs:new Map,set:(e,t)=>{Jt.logs.set(new Date,{message:e,error:t})},clear:()=>Jt.logs.clear(),toString:()=>{let e="";return Jt.logs.forEach((t,r)=>{e.length>0&&(e+=`

`),e+=`[${r.toISOString()}] ${t.message}`,t.error&&(e+=`: ${Zr(t.error)}`)}),e}},Jt=Object.freeze(Ju),h=(e,t,r)=>{let{captureToRaycast:n=!1}=r??{},o=Array.isArray(e)?e.filter(Boolean).join(" "):e||"Captured exception";Jt.set(o,t),Qn.environment.isDevelopment?console.error(o,t):n&&(0,zs.captureException)(t)},Gs=(...e)=>{Qn.environment.isDevelopment&&console.debug(...e)};var Ws=require("fs"),Hs=require("crypto");function eo(e){try{return(0,Hs.createHash)("sha256").update((0,Ws.readFileSync)(e)).digest("hex")}catch{return null}}function to(e,t,r){let{onProgress:n,sha256:o}=r??{};return new Promise((i,s)=>{let a=new URL(e),c=a.protocol==="https:"?js.default:Ks.default,l=0,f=c.get(a.href,b=>{if(b.statusCode&&b.statusCode>=300&&b.statusCode<400){f.destroy(),b.destroy();let E=b.headers.location;if(!E){s(new Error("Redirect response without location header"));return}if(++l>=10){s(new Error("Too many redirects"));return}to(E,t,r).then(i).catch(s);return}if(b.statusCode!==200){s(new Error(`Response status ${b.statusCode}: ${b.statusMessage}`));return}let C=parseInt(b.headers["content-length"]||"0",10);if(C===0){s(new Error("Invalid file size"));return}let x=(0,Qt.createWriteStream)(t,{autoClose:!0}),A=0,I=()=>{f.destroy(),b.destroy(),x.close()},g=E=>{I(),s(E)};b.on("data",E=>{A+=E.length;let k=Math.floor(A/C*100);n?.(k)}),x.on("finish",async()=>{try{await Qr(t),o&&await Qu(t,o),i()}catch(E){s(E)}finally{I()}}),x.on("error",E=>{h(`File stream error while downloading ${e}`,E),(0,Qt.unlink)(t,()=>g(E))}),b.on("error",E=>{h(`Response error while downloading ${e}`,E),(0,Qt.unlink)(t,()=>g(E))}),f.on("error",E=>{h(`Request error while downloading ${e}`,E),(0,Qt.unlink)(t,()=>g(E))}),b.pipe(x)})})}function Qu(e,t){return new Promise((r,n)=>{let o=eo(e);if(!o)return n(new Error(`Could not generate hash for file ${e}.`));if(o===t)return r();let i=setInterval(()=>{eo(e)===t&&(clearInterval(i),r())},1e3);setTimeout(()=>{clearInterval(i),n(new Error(`Hash did not match, expected ${t.substring(0,7)}, got ${o.substring(0,7)}.`))},5e3)})}function Ys(e,t){return{...e,...t,file:t.file?{...e.file,...t.file}:e.file,text:t.text?{...e.text,...t.text}:e.text}}var Zs=require("@raycast/api"),pe=new Zs.Cache({namespace:"bw-cache"});var Z=process.platform==="darwin"?"macos":"windows";var{supportPath:Ot}=X.environment,ed="4",en=(()=>{let e=(0,_t.join)(Ot,`bw-bin-download-error-${ed}.log`);return{logError:t=>$t(()=>(0,be.writeFileSync)(e,t?.message??"Unexpected error")),clearError:()=>$t(()=>(0,be.unlinkSync)(e)),hasError:()=>$t(()=>(0,be.existsSync)(e),!1)}})(),we={version:"2025.2.0",get sha256(){return Z==="windows"?"33a131017ac9c99d721e430a86e929383314d3f91c9f2fbf413d872565654c18":"fade51012a46011c016a2e5aee2f2e534c1ed078e49d1178a69e2889d2812a96"},downloadPage:"https://github.com/bitwarden/clients/releases",path:{get downloadedBin(){return(0,_t.join)(Ot,we.binFilenameVersioned)},get installedBin(){return Z==="windows"?"C:\\ProgramData\\chocolatey\\bin\\bw.exe":process.arch==="arm64"?"/opt/homebrew/bin/bw":"/usr/local/bin/bw"},get bin(){return en.hasError()?this.installedBin:this.downloadedBin}},get binFilename(){return Z==="windows"?"bw.exe":"bw"},get binFilenameVersioned(){let e=`bw-${this.version}`;return Z==="windows"?`${e}.exe`:`${e}`},get downloadUrl(){let e="";return Z==="macos"&&(e=process.arch==="arm64"?"-arm64":""),`${this.downloadPage}/download/cli-v${this.version}/bw-${Z}${e}-${this.version}.zip`}},tn=class{constructor(t){this.actionListeners=new Map;this.preferences=(0,X.getPreferenceValues)();this.wasCliUpdated=!1;this.showToast=async t=>{if(this.toastInstance){let r={message:this.toastInstance.message,title:this.toastInstance.title,primaryAction:this.toastInstance.primaryAction,secondaryAction:this.toastInstance.secondaryAction};return t.style&&(this.toastInstance.style=t.style),this.toastInstance.message=t.message,this.toastInstance.title=t.title,this.toastInstance.primaryAction=t.primaryAction,this.toastInstance.secondaryAction=t.secondaryAction,await this.toastInstance.show(),Object.assign(this.toastInstance,{restore:async()=>{await this.showToast(r)}})}else{let r=await(0,X.showToast)(t);return Object.assign(r,{restore:()=>r.hide()})}};let{cliPath:r,clientId:n,clientSecret:o,serverCertsPath:i}=this.preferences,s=Kr();this.toastInstance=t,this.cliPath=r||we.path.bin,this.env={BITWARDENCLI_APPDATA_DIR:Ot,BW_CLIENTSECRET:o.trim(),BW_CLIENTID:n.trim(),PATH:(0,_t.dirname)(process.execPath),...s&&i?{NODE_EXTRA_CA_CERTS:i}:{}},this.initPromise=(async()=>{await this.ensureCliBinary(),this.retrieveAndCacheCliVersion(),await this.checkServerUrl(s)})()}async ensureCliBinary(){if(this.checkCliBinIsReady(this.cliPath))return;if(this.cliPath===this.preferences.cliPath||this.cliPath===we.path.installedBin)throw new et(`Bitwarden CLI not found at ${this.cliPath}`);en.hasError()&&en.clearError();let t=await Ms("bw-",Ot),r=await this.showToast({title:`${t?"Updating":"Initializing"} Bitwarden CLI`,style:X.Toast.Style.Animated,primaryAction:{title:"Open Download Page",onAction:()=>(0,X.open)(we.downloadPage)}}),o=(0,_t.join)(Ot,"bw.zip");try{try{r.message="Downloading...",await to(we.downloadUrl,o,{onProgress:i=>r.message=`Downloading ${i}%`,sha256:we.sha256})}catch(i){throw r.title="Failed to download Bitwarden CLI",i}try{r.message="Extracting...",await Vs(o,Ot);let i=(0,_t.join)(Ot,we.binFilename);await(0,er.rename)(i,this.cliPath).catch(()=>null),await Qr(this.cliPath),await(0,er.chmod)(this.cliPath,"755"),await(0,er.rm)(o,{force:!0}),pe.set(ye.CLI_VERSION,we.version),this.wasCliUpdated=!0}catch(i){throw r.title="Failed to extract Bitwarden CLI",i}await r.hide()}catch(i){throw r.message=i instanceof Rt?i.message:"Please try again",r.style=X.Toast.Style.Failure,Bs(o,this.cliPath),X.environment.isDevelopment||en.logError(i),i instanceof Error?new Rt(i.message,i.stack):i}finally{await r.restore()}}async retrieveAndCacheCliVersion(){try{let{error:t,result:r}=await this.getVersion();t||pe.set(ye.CLI_VERSION,r)}catch(t){h("Failed to retrieve and cache cli version",t,{captureToRaycast:!0})}}checkCliBinIsReady(t){try{return(0,be.existsSync)(this.cliPath)?((0,be.accessSync)(t,be.constants.X_OK),!0):!1}catch{return(0,be.chmodSync)(t,"755"),!0}}setSessionToken(t){this.env={...this.env,BW_SESSION:t}}clearSessionToken(){delete this.env.BW_SESSION}withSession(t){return this.tempSessionToken=t,this}async initialize(){return await this.initPromise,this}async checkServerUrl(t){let r=await X.LocalStorage.getItem(M.SERVER_URL);if(!t||r===t)return;let n=await this.showToast({style:X.Toast.Style.Animated,title:"Switching server...",message:"Bitwarden server preference changed"});try{try{await this.logout()}catch{}await this.exec(["config","server",t||Yo],{resetVaultTimeout:!1}),await X.LocalStorage.setItem(M.SERVER_URL,t),n.style=X.Toast.Style.Success,n.title="Success",n.message="Bitwarden server changed"}catch(o){n.style=X.Toast.Style.Failure,n.title="Failed to switch server",o instanceof Error?n.message=o.message:n.message="Unknown error occurred"}finally{await n.restore()}}async exec(t,r){let{abortController:n,input:o="",resetVaultTimeout:i}=r??{},s=this.env;this.tempSessionToken&&(s={...s,BW_SESSION:this.tempSessionToken},this.tempSessionToken=void 0);let a=await Cs(this.cliPath,t,{input:o,env:s,signal:n?.signal});if(this.isPromptWaitingForMasterPassword(a))throw await this.lock(),new jr;return i&&await X.LocalStorage.setItem(M.LAST_ACTIVITY_TIME,new Date().toISOString()),a}async getVersion(){try{let{stdout:t}=await this.exec(["--version"],{resetVaultTimeout:!1});return{result:t}}catch(t){h("Failed to get cli version",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async login(){try{return await this.exec(["login","--apikey"],{resetVaultTimeout:!0}),await this.saveLastVaultStatus("login","unlocked"),await this.callActionListeners("login"),{result:void 0}}catch(t){h("Failed to login",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async logout(t){let{reason:r,immediate:n=!1}=t??{};try{return n&&await this.handlePostLogout(r),await this.exec(["logout"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("logout","unauthenticated"),n||await this.handlePostLogout(r),{result:void 0}}catch(o){h("Failed to logout",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async lock(t){let{reason:r,checkVaultStatus:n=!1,immediate:o=!1}=t??{};try{if(o&&await this.callActionListeners("lock",r),n){let{error:i,result:s}=await this.status();if(i)throw i;if(s.status==="unauthenticated")return{error:new gr("Not logged in")}}return await this.exec(["lock"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("lock","locked"),o||await this.callActionListeners("lock",r),{result:void 0}}catch(i){h("Failed to lock vault",i);let{error:s}=await this.handleCommonErrors(i);if(!s)throw i;return{error:s}}}async unlock(t){try{let{stdout:r}=await this.exec(["unlock",t,"--raw"],{resetVaultTimeout:!0});return this.setSessionToken(r),await this.saveLastVaultStatus("unlock","unlocked"),await this.callActionListeners("unlock",t,r),{result:r}}catch(r){h("Failed to unlock vault",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async sync(){try{return await this.exec(["sync"],{resetVaultTimeout:!0}),{result:void 0}}catch(t){h("Failed to sync vault",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async getItem(t){try{let{stdout:r}=await this.exec(["get","item",t],{resetVaultTimeout:!0});return{result:JSON.parse(r)}}catch(r){h("Failed to get item",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async listItems(){try{let{stdout:t}=await this.exec(["list","items"],{resetVaultTimeout:!0});return{result:JSON.parse(t).filter(n=>!!n.name)}}catch(t){h("Failed to list items",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createLoginItem(t){try{let{error:r,result:n}=await this.getTemplate("item");if(r)throw r;let{error:o,result:i}=await this.getTemplate("item.login");if(o)throw o;n.name=t.name,n.type=1,n.folderId=t.folderId||null,n.login=i,n.notes=null,i.username=t.username||null,i.password=t.password,i.totp=null,i.fido2Credentials=void 0,t.uri&&(i.uris=[{match:null,uri:t.uri}]);let{result:s,error:a}=await this.encode(JSON.stringify(n));if(a)throw a;let{stdout:c}=await this.exec(["create","item",s],{resetVaultTimeout:!0});return{result:JSON.parse(c)}}catch(r){h("Failed to create login item",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async listFolders(){try{let{stdout:t}=await this.exec(["list","folders"],{resetVaultTimeout:!0});return{result:JSON.parse(t)}}catch(t){h("Failed to list folder",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createFolder(t){try{let{error:r,result:n}=await this.getTemplate("folder");if(r)throw r;n.name=t;let{result:o,error:i}=await this.encode(JSON.stringify(n));if(i)throw i;return await this.exec(["create","folder",o],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to create folder",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async getTotp(t){try{let{stdout:r}=await this.exec(["get","totp",t],{resetVaultTimeout:!0});return{result:r}}catch(r){h("Failed to get TOTP",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async status(){try{let{stdout:t}=await this.exec(["status"],{resetVaultTimeout:!1});return{result:JSON.parse(t)}}catch(t){h("Failed to get status",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async checkLockStatus(){try{return await this.exec(["unlock","--check"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("checkLockStatus","unlocked"),"unlocked"}catch(t){return h("Failed to check lock status",t),t.stderr==="Vault is locked."?(await this.saveLastVaultStatus("checkLockStatus","locked"),"locked"):(await this.saveLastVaultStatus("checkLockStatus","unauthenticated"),"unauthenticated")}}async getTemplate(t){try{let{stdout:r}=await this.exec(["get","template",t],{resetVaultTimeout:!0});return{result:JSON.parse(r)}}catch(r){h("Failed to get template",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async encode(t){try{let{stdout:r}=await this.exec(["encode"],{input:t,resetVaultTimeout:!1});return{result:r}}catch(r){h("Failed to encode",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async generatePassword(t,r){let n=t?Ps(t):[],{stdout:o}=await this.exec(["generate",...n],{abortController:r,resetVaultTimeout:!1});return o}async listSends(){try{let{stdout:t}=await this.exec(["send","list"],{resetVaultTimeout:!0});return{result:JSON.parse(t)}}catch(t){h("Failed to list sends",t);let{error:r}=await this.handleCommonErrors(t);if(!r)throw t;return{error:r}}}async createSend(t){try{let{error:r,result:n}=await this.getTemplate(t.type===0?"send.text":"send.file");if(r)throw r;let o=Ys(n,t),{result:i,error:s}=await this.encode(JSON.stringify(o));if(s)throw s;let{stdout:a}=await this.exec(["send","create",i],{resetVaultTimeout:!0});return{result:JSON.parse(a)}}catch(r){h("Failed to create send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async editSend(t){try{let{result:r,error:n}=await this.encode(JSON.stringify(t));if(n)throw n;let{stdout:o}=await this.exec(["send","edit",r],{resetVaultTimeout:!0});return{result:JSON.parse(o)}}catch(r){h("Failed to delete send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async deleteSend(t){try{return await this.exec(["send","delete",t],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to delete send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async removeSendPassword(t){try{return await this.exec(["send","remove-password",t],{resetVaultTimeout:!0}),{result:void 0}}catch(r){h("Failed to remove send password",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async receiveSendInfo(t,r){try{let{stdout:n,stderr:o}=await this.exec(["send","receive",t,"--obj"],{resetVaultTimeout:!0,input:r?.password});return!n&&/Invalid password/i.test(o)?{error:new wr}:!n&&/Send password/i.test(o)?{error:new yr}:{result:JSON.parse(n)}}catch(n){let o=n.stderr;if(/Invalid password/gi.test(o))return{error:new wr};if(/Send password/gi.test(o))return{error:new yr};h("Failed to receive send obj",n);let{error:i}=await this.handleCommonErrors(n);if(!i)throw n;return{error:i}}}async receiveSend(t,r){try{let{savePath:n,password:o}=r??{},i=["send","receive",t];n&&i.push("--output",n);let{stdout:s}=await this.exec(i,{resetVaultTimeout:!0,input:o});return{result:s}}catch(n){h("Failed to receive send",n);let{error:o}=await this.handleCommonErrors(n);if(!o)throw n;return{error:o}}}async saveLastVaultStatus(t,r){await X.LocalStorage.setItem(M.VAULT_LAST_STATUS,r)}async getLastSavedVaultStatus(){let t=await X.LocalStorage.getItem(M.VAULT_LAST_STATUS);return t||(await this.status()).result?.status}isPromptWaitingForMasterPassword(t){return!!(t.stderr&&t.stderr.includes("Master password"))}async handlePostLogout(t){this.clearSessionToken(),await this.callActionListeners("logout",t)}async handleCommonErrors(t){let r=t.stderr;return r?/not logged in/i.test(r)?(await this.handlePostLogout(),{error:new gr("Not logged in")}):/Premium status/i.test(r)?{error:new Yr}:{}:{}}setActionListener(t,r){let n=this.actionListeners.get(t);return n&&n.size>0?n.add(r):this.actionListeners.set(t,new Set([r])),this}removeActionListener(t,r){let n=this.actionListeners.get(t);return n&&n.size>0&&n.delete(r),this}async callActionListeners(t,...r){let n=this.actionListeners.get(t);if(n&&n.size>0)for(let o of n)try{await o?.(...r)}catch(i){h(`Error calling bitwarden action listener for ${t}`,i)}}};var Xs=require("@raycast/api"),Js=require("react/jsx-runtime"),qs=()=>(0,Js.jsx)(Xs.Form,{isLoading:!0});var rn=require("react");function td(e,t){let r=(0,rn.useRef)(!1);(0,rn.useEffect)(()=>{r.current||t!==void 0&&!t||(r.current=!0,e())},[t])}var $e=td;var nn=require("react/jsx-runtime"),Qs=(0,Ft.createContext)(null),ea=({children:e,loadingFallback:t=(0,nn.jsx)(qs,{})})=>{let[r,n]=(0,Ft.useState)(),[o,i]=(0,Ft.useState)();$e(()=>{new tn().initialize().then(n).catch(s)});function s(a){if(a instanceof et)i(a);else throw a}return o?(0,nn.jsx)(br,{error:o}):r?(0,nn.jsx)(Qs.Provider,{value:r,children:e}):t},ue=()=>{let e=(0,Ft.useContext)(Qs);if(e==null)throw new Error("useBitwarden must be used within a BitwardenProvider");return e};function ta(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function ra(e,t){try{let r=e,n;return r?.stderr?n=r.stderr:e instanceof Error?n=`${e.name}: ${e.message}`:ta(e)?n=JSON.stringify(e):n=`${e}`,n?t?.omitSensitiveValue?rd(n,t.omitSensitiveValue):n:""}catch{return""}}function rd(e,t){return e.replace(new RegExp(t,"i"),"[REDACTED]")}var Oe=require("@raycast/api"),on=require("react");function nd(){let e=ue(),[t,r]=(0,on.useState)(null);(0,on.useEffect)(()=>{e.status().then(({error:s,result:a})=>{s||r(a)}).catch(()=>{})},[]);let n=!!Kr(),o="...",i="...";if(t){let{status:s,userEmail:a,serverUrl:c}=t;o=s=="unauthenticated"?"\u274C Logged out":`\u{1F512} Locked (${a})`,c?i=c||"":(!c&&n||c&&!n)&&(0,Oe.confirmAlert)({icon:Oe.Icon.ExclamationMark,title:"Restart Required",message:"Bitwarden server URL preference has been changed since the extension was opened.",primaryAction:{title:"Close Extension"},dismissAction:{title:"Close Raycast",style:Oe.Alert.ActionStyle.Cancel}}).then(l=>{l?(0,Oe.popToRoot)():(0,Oe.closeMainWindow)()})}return{userMessage:o,serverMessage:i,shouldShowServer:n}}var na=nd;var cn=require("@raycast/api");var B=ne(require("react")),z=require("@raycast/api");var oa=Object.prototype.hasOwnProperty;function sn(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&sn(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(oa.call(e,r)&&++n&&!oa.call(t,r)||!(r in t)||!sn(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var Nt=ne(require("node:fs")),an=ne(require("node:path"));var aa=require("react/jsx-runtime");function od(e){let t=(0,B.useRef)(e),r=(0,B.useRef)(0);return sn(e,t.current)||(t.current=e,r.current+=1),(0,B.useMemo)(()=>t.current,[r.current])}function Te(e){let t=(0,B.useRef)(e);return t.current=e,t}function id(e,t){let r=e instanceof Error?e.message:String(e);return(0,z.showToast)({style:z.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??ia(e),secondaryAction:t?.primaryAction?ia(e):void 0})}var ia=e=>{let t=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,Nt.readFileSync)((0,an.join)(z.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let o=z.environment.isDevelopment||t,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:o?"Copy Logs":"Report Error",onAction(s){s.hide(),o?z.Clipboard.copy(i):(0,z.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function ca(e,t,r){let n=(0,B.useRef)(0),[o,i]=(0,B.useState)({isLoading:!0}),s=Te(e),a=Te(r?.abortable),c=Te(t||[]),l=Te(r?.onError),f=Te(r?.onData),b=Te(r?.onWillExecute),C=Te(r?.failureToastOptions),x=Te(o.data),A=(0,B.useRef)(null),I=(0,B.useRef)({page:0}),g=(0,B.useRef)(!1),E=(0,B.useRef)(!0),k=(0,B.useRef)(50),L=(0,B.useCallback)(()=>(a.current&&(a.current.current?.abort(),a.current.current=new AbortController),++n.current),[a]),U=(0,B.useCallback)((...le)=>{let re=L();b.current?.(le),i(p=>({...p,isLoading:!0}));let d=sd(s.current)(...le);function y(p){return p.name=="AbortError"||re===n.current&&(l.current?l.current(p):z.environment.launchType!==z.LaunchType.Background&&id(p,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(w){w.hide(),A.current?.(...c.current||[])}},...C.current}),i({error:p,isLoading:!1})),p}return typeof d=="function"?(g.current=!0,d(I.current).then(({data:p,hasMore:w,cursor:R})=>(re===n.current&&(I.current&&(I.current.cursor=R,I.current.lastItem=p?.[p.length-1]),f.current&&f.current(p,I.current),w&&(k.current=p.length),E.current=w,i(P=>I.current.page===0?{data:p,isLoading:!1}:{data:(P.data||[])?.concat(p),isLoading:!1})),p),p=>(E.current=!1,y(p)))):(g.current=!1,d.then(p=>(re===n.current&&(f.current&&f.current(p),i({data:p,isLoading:!1})),p),y))},[f,l,c,s,i,A,b,I,C,L]);A.current=U;let N=(0,B.useCallback)(()=>{I.current={page:0};let le=c.current||[];return U(...le)},[U,c]),j=(0,B.useCallback)(async(le,re)=>{let d;try{if(re?.optimisticUpdate){L(),typeof re?.rollbackOnError!="function"&&re?.rollbackOnError!==!1&&(d=structuredClone(x.current?.value));let y=re.optimisticUpdate;i(p=>({...p,data:y(p.data)}))}return await le}catch(y){if(typeof re?.rollbackOnError=="function"){let p=re.rollbackOnError;i(w=>({...w,data:p(w.data)}))}else re?.optimisticUpdate&&re?.rollbackOnError!==!1&&i(p=>({...p,data:d}));throw y}finally{re?.shouldRevalidateAfter!==!1&&(z.environment.launchType===z.LaunchType.Background||z.environment.commandMode==="menu-bar"?await N():N())}},[N,x,i,L]),Ce=(0,B.useCallback)(()=>{I.current.page+=1;let le=c.current||[];U(...le)},[I,c,U]);(0,B.useEffect)(()=>{I.current={page:0},r?.execute!==!1?U(...t||[]):L()},[od([t,r?.execute,U]),a,I]),(0,B.useEffect)(()=>()=>{L()},[L]);let je=r?.execute!==!1?o.isLoading:!1,Ye={...o,isLoading:je},It=g.current?{pageSize:k.current,hasMore:E.current,onLoadMore:Ce}:void 0;return{...Ye,revalidate:N,mutate:j,pagination:It}}function sd(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function ad(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function cd(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}var ld=Symbol("cache without namespace"),sa=new Map;function la(e,t,r){let n=r?.cacheNamespace||ld,o=sa.get(n)||sa.set(n,new z.Cache({namespace:r?.cacheNamespace})).get(n);if(!o)throw new Error("Missing cache");let i=Te(e),s=Te(t),a=(0,B.useSyncExternalStore)(o.subscribe,()=>{try{return o.get(i.current)}catch(b){console.error("Could not get Cache data:",b);return}}),c=(0,B.useMemo)(()=>{if(typeof a<"u"){if(a==="undefined")return;try{return JSON.parse(a,cd)}catch(b){return console.warn("The cached data is corrupted",b),s.current}}else return s.current},[a,s]),l=Te(c),f=(0,B.useCallback)(b=>{let C=typeof b=="function"?b(l.current):b;if(typeof C>"u")o.set(i.current,"undefined");else{let x=JSON.stringify(C,ad);o.set(i.current,x)}return C},[o,i,l]);return[c,f]}function ua(e,t){let{data:r,revalidate:n,isLoading:o}=ca(()=>cn.LocalStorage.getItem(e));return[r??t,{isLoading:o,set:async a=>{await cn.LocalStorage.setItem(e,a),await n()},remove:async()=>{await cn.LocalStorage.removeItem(e),await n()}}]}var J=require("react/jsx-runtime"),ud=({pendingAction:e=Promise.resolve()})=>{let t=ue(),{userMessage:r,serverMessage:n,shouldShowServer:o}=na(),[i,s]=(0,Sr.useState)(!1),[a,c]=(0,Sr.useState)(void 0),[l,f]=(0,Sr.useState)(!1),[b,C]=(0,Sr.useState)(""),[x,{remove:A}]=ua(M.VAULT_LOCK_REASON);async function I(){if(b.length===0)return;let L=await(0,O.showToast)(O.Toast.Style.Animated,"Unlocking Vault...","Please wait");try{s(!0),c(void 0),await e;let{error:U,result:N}=await t.status();if(U)throw U;if(N.status==="unauthenticated")try{let{error:j}=await t.login();if(j)throw j}catch(j){let{displayableError:Ce=`Please check your ${o?"Server URL, ":""}API Key and Secret.`,treatedError:je}=da(j,b);await(0,O.showToast)(O.Toast.Style.Failure,"Failed to log in",Ce),c(je),h("Failed to log in",j);return}await t.unlock(b),await A(),await L.hide()}catch(U){let{displayableError:N="Please check your credentials",treatedError:j}=da(U,b);await(0,O.showToast)(O.Toast.Style.Failure,"Failed to unlock vault",N),c(j),h("Failed to unlock vault",U)}finally{s(!1)}}let g=async()=>{a&&(await O.Clipboard.copy(a),await(0,O.showToast)(O.Toast.Style.Success,"Error copied to clipboard"))},E=O.Form.PasswordField,k="password";return l&&(E=O.Form.TextField,k="plainPassword"),(0,J.jsxs)(O.Form,{actions:(0,J.jsxs)(O.ActionPanel,{children:[!i&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(O.Action.SubmitForm,{icon:O.Icon.LockUnlocked,title:"Unlock",onSubmit:I}),(0,J.jsx)(O.Action,{icon:l?O.Icon.EyeDisabled:O.Icon.Eye,title:l?"Hide Password":"Show Password",onAction:()=>f(L=>!L),shortcut:{macOS:{key:"e",modifiers:["opt"]},windows:{key:"e",modifiers:["alt"]}}})]}),!!a&&(0,J.jsx)(O.Action,{onAction:g,title:"Copy Last Error",icon:O.Icon.Bug,style:O.Action.Style.Destructive}),(0,J.jsx)(Er,{})]}),children:[o&&(0,J.jsx)(O.Form.Description,{title:"Server URL",text:n}),(0,J.jsx)(O.Form.Description,{title:"Vault Status",text:r}),(0,J.jsx)(E,{id:k,title:"Master Password",value:b,onChange:C,ref:L=>L?.focus()}),(0,J.jsx)(O.Form.Description,{title:"",text:`Press ${Z==="macos"?"\u2325":"Alt"}+E to ${l?"hide":"show"} password`}),!!x&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(O.Form.Description,{title:"\u2139\uFE0F",text:x}),(0,J.jsx)(dd,{})]})]})};function dd(){let e=(0,O.getPreferenceValues)().repromptIgnoreDuration,t=Ls(e);return t?(0,J.jsx)(O.Form.Description,{title:"",text:`Timeout is set to ${t}, this can be configured in the extension settings`}):null}function da(e,t){let r=ra(e,{omitSensitiveValue:t}),n;return/Invalid master password/i.test(r)?n="Invalid master password":/Invalid API Key/i.test(r)&&(n="Invalid Client ID or Secret"),{displayableError:n,treatedError:r}}var fa=ud;var pa=require("@raycast/api"),ma=require("react/jsx-runtime"),tr=()=>(0,ma.jsx)(pa.List,{searchBarPlaceholder:"Search vault",isLoading:!0});var ha=require("react"),fd={token:void 0,passwordHash:void 0,isLoading:!0,isLocked:!1,isAuthenticated:!1},ga=()=>(0,ha.useReducer)((e,t)=>{switch(t.type){case"loadState":{let{type:r,...n}=t;return{...e,...n}}case"lock":return{...e,token:void 0,passwordHash:void 0,isLoading:!1,isLocked:!0};case"unlock":return{...e,token:t.token,passwordHash:t.passwordHash,isLocked:!1,isAuthenticated:!0};case"logout":return{...e,token:void 0,passwordHash:void 0,isLocked:!0,isAuthenticated:!1,isLoading:!1};case"vaultTimeout":return{...e,isLocked:!0};case"finishLoadingSavedState":{if(!e.token||!e.passwordHash)throw new Error("Missing required fields: token, passwordHash");let r=!!e.token;return{...e,isLoading:!1,isLocked:!r,isAuthenticated:r}}case"failLoadingSavedState":return{...e,isLoading:!1,isLocked:!0};default:return e}},fd);var ve=require("@raycast/api");var ya=require("child_process"),wa=require("util");var pd=(0,wa.promisify)(ya.exec),xr={getSavedSession:()=>Promise.all([ve.LocalStorage.getItem(M.SESSION_TOKEN),ve.LocalStorage.getItem(M.REPROMPT_HASH),ve.LocalStorage.getItem(M.LAST_ACTIVITY_TIME),ve.LocalStorage.getItem(M.VAULT_LAST_STATUS)]),clearSession:async()=>{await Promise.all([ve.LocalStorage.removeItem(M.SESSION_TOKEN),ve.LocalStorage.removeItem(M.REPROMPT_HASH)])},saveSession:async(e,t)=>{await Promise.all([ve.LocalStorage.setItem(M.SESSION_TOKEN,e),ve.LocalStorage.setItem(M.REPROMPT_HASH,t)])},logoutClearSession:async()=>{await Promise.all([ve.LocalStorage.removeItem(M.SESSION_TOKEN),ve.LocalStorage.removeItem(M.REPROMPT_HASH),ve.LocalStorage.removeItem(M.LAST_ACTIVITY_TIME)])}},ba=e=>xa(e,t=>Ea(t,"handleUnlockResult")),Sa=e=>xa(e,t=>Ea(t,"sleep 0"));function Ea(e,t){return pd(`log show --style syslog --predicate "process == 'loginwindow'" --info --last ${e}h | grep "${t}" | tail -n 1`)}async function xa(e,t){let r=await Ia(t);return r?new Date(r).getTime()>e.getTime():!0}var md=2,hd=5;async function Ia(e,t=1,r=0){try{if(r>hd){Gs("Max retry attempts reached to get last screen lock time");return}let{stdout:n,stderr:o}=await e(t),[i,s]=n?.split(" ")??[];if(o||!i||!s)return Ia(e,t+md,r+1);let a=new Date(`${i}T${s}`);return!a||a.toString()==="Invalid Date"?void 0:a}catch(n){h("Failed to get last screen lock time",n);return}}var ln=require("react/jsx-runtime"),va=(0,st.createContext)(null);function ro(e){let{children:t,loadingFallback:r=(0,ln.jsx)(tr,{}),unlock:n}=e,o=ue(),[i,s]=ga(),a=(0,st.useRef)(Promise.resolve());$e(c,o);async function c(){try{o.setActionListener("lock",f).setActionListener("unlock",l).setActionListener("logout",b);let[g,E,k,L]=await xr.getSavedSession();if(!g||!E)throw new it;if(s({type:"loadState",token:g,passwordHash:E}),o.setSessionToken(g),o.wasCliUpdated)throw new Ir(Tt.CLI_UPDATED);if(L==="locked")throw new it;if(L==="unauthenticated")throw new Ir;if(k){let U=new Date(k),N=+(0,rr.getPreferenceValues)().repromptIgnoreDuration;if(Z==="macos"&&N===fe.SYSTEM_LOCK){if(await ba(U))throw new it(Tt.SYSTEM_LOCK)}else if(Z==="macos"&&N===fe.SYSTEM_SLEEP){if(await Sa(U))throw new it(Tt.SYSTEM_SLEEP)}else if(N!==fe.NEVER){let j=Date.now()-U.getTime();if(N===fe.IMMEDIATELY||j>=N)throw new it(Tt.TIMEOUT)}}s({type:"finishLoadingSavedState"})}catch(g){g instanceof it?a.current=o.lock({reason:g.message,immediate:!0,checkVaultStatus:!0}):g instanceof Ir?a.current=o.logout({reason:g.message,immediate:!0}):(a.current=o.lock({immediate:!0}),s({type:"failLoadingSavedState"}),h("Failed to bootstrap session state",g))}}async function l(g,E){let k=await Wn(g);await xr.saveSession(E,k),await rr.LocalStorage.removeItem(M.VAULT_LOCK_REASON),s({type:"unlock",token:E,passwordHash:k})}async function f(g){await xr.clearSession(),g&&await rr.LocalStorage.setItem(M.VAULT_LOCK_REASON,g),s({type:"lock"})}async function b(g){await xr.clearSession(),pe.clear(),g&&await rr.LocalStorage.setItem(M.VAULT_LOCK_REASON,g),s({type:"logout"})}async function C(g){return await Wn(g)===i.passwordHash}let x=(0,st.useMemo)(()=>({token:i.token,isLoading:i.isLoading,isAuthenticated:i.isAuthenticated,isLocked:i.isLocked,active:!i.isLoading&&i.isAuthenticated&&!i.isLocked,confirmMasterPassword:C}),[i,C]);if(i.isLoading)return r;let A=i.isLocked||!i.isAuthenticated,I=i.token?t:null;return(0,ln.jsx)(va.Provider,{value:x,children:A&&n?(0,ln.jsx)(fa,{pendingAction:a.current}):I})}function un(){let e=(0,st.useContext)(va);if(e==null)throw new Error("useSession must be used within a SessionProvider");return e}var it=class extends Error{constructor(t){super(t)}},Ir=class extends Error{constructor(t){super(t)}};var Ta=require("react/jsx-runtime");function gd(e,t){let{description:r="Performing an action that requires the master password"}=t??{},n=un(),{push:o,pop:i}=(0,nr.useNavigation)();async function s(a){if(!await n.confirmMasterPassword(a)){await(0,nr.showToast)(nr.Toast.Style.Failure,"Failed to unlock vault","Check your credentials");return}i(),setTimeout(e,1)}return()=>o((0,Ta.jsx)(jo,{description:r,onConfirm:s}))}var Ca=gd;var Pa=require("react/jsx-runtime");function yd(e){let{repromptDescription:t,onAction:r,...n}=e,{reprompt:o}=$(),i=Ca(r,{description:t});return(0,Pa.jsx)(Aa.Action,{...n,onAction:o?i:r})}var W=yd;var ie=require("@raycast/api");var ka=require("child_process"),La=require("util");var no=require("fs"),Ra=require("path");var $a=require("react/jsx-runtime"),wd=(0,La.promisify)(ka.exec),{supportPath:bd}=ie.environment,Sd=()=>{let{clientId:e,clientSecret:t,fetchFavicons:r,generatePasswordQuickAction:n,repromptIgnoreDuration:o,serverCertsPath:i,serverUrl:s,shouldCacheVaultItems:a,transientCopyGeneratePassword:c,transientCopyGeneratePasswordQuick:l,transientCopySearch:f,windowActionOnCopy:b}=(0,ie.getPreferenceValues)();return{has_clientId:!!e,has_clientSecret:!!t,fetchFavicons:r,generatePasswordQuickAction:n,repromptIgnoreDuration:o,has_serverCertsPath:!!i,has_serverUrl:!!s,shouldCacheVaultItems:a,transientCopyGeneratePassword:c,transientCopyGeneratePasswordQuick:l,transientCopySearch:f,windowActionOnCopy:b}},me="N/A",at=async(e,t=!0)=>{try{let r=e;Z==="windows"?r=`powershell -Command "${e}"`:r=`PATH="$PATH:${(0,Ra.dirname)(process.execPath)}" ${e}`;let{stdout:n}=await wd(r,{env:{BITWARDENCLI_APPDATA_DIR:bd}}),o=n.trim();return t?o.replace(/\n|\r/g,""):o}catch(r){return h(`Failed to execute command: ${e}`,r),me}},Ed=()=>{try{let e=(0,ie.getPreferenceValues)().cliPath;return e?{type:"custom",path:e}:we.path.bin===we.path.downloadedBin?{type:"downloaded",path:we.path.downloadedBin}:{type:"installed",path:we.path.installedBin}}catch{return{type:me,path:me}}},xd=async()=>{try{let e="/opt/homebrew/bin/brew";if((0,no.existsSync)(e)||(e="/usr/local/bin/brew"),!(0,no.existsSync)(e))return{arch:me,version:me};let t=await at(`${e} config`,!1);if(t===me)return{arch:me,version:me};let r=/HOMEBREW_PREFIX: (.+)/.exec(t)?.[1]||me,n=/HOMEBREW_VERSION: (.+)/.exec(t)?.[1]||me;return{arch:r!==me?r.includes("/opt/homebrew")?"arm64":"x86_64":me,version:n}}catch{return{arch:me,version:me}}};function Id(){let e=async()=>{let t=await(0,ie.showToast)(ie.Toast.Style.Animated,"Collecting data...");try{let r=Sd(),n=Ed(),[o,i,s,a]=await Promise.all([...Z==="macos"?[at("uname -m"),at("sw_vers -productVersion"),at("sw_vers -buildVersion")]:[at("(Get-CimInstance Win32_OperatingSystem).OSArchitecture"),at("(Get-CimInstance Win32_OperatingSystem).Caption"),at("(Get-CimInstance Win32_OperatingSystem).Version")],at(`${n.path} --version`)]),c={raycast:{version:ie.environment.raycastVersion},system:{arch:o,version:i,buildVersion:s},node:{arch:process.arch,version:process.version},cli:{type:n.type,version:a},preferences:r};if(Z==="macos"){let l=await xd();c.homebrew={arch:l.arch,version:l.version}}await ie.Clipboard.copy(JSON.stringify(c,null,2)),t.style=ie.Toast.Style.Success,t.title="Data copied to clipboard"}catch(r){t.style=ie.Toast.Style.Failure,t.title="Failed to collect bug report data",h("Failed to collect bug report data",r)}};return(0,$a.jsx)(ie.Action,{title:"Collect Bug Report Data",icon:ie.Icon.Bug,onAction:e})}var vr=Id;var Oa=require("@raycast/api"),_a=require("react/jsx-runtime"),oo="https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...";function vd(){return(0,_a.jsx)(Oa.Action.OpenInBrowser,{title:"Open Bug Report",url:oo})}var Cr=vd;var ae=require("@raycast/api");var Fa=require("react/jsx-runtime");function Cd(){return(0,Fa.jsx)(ae.Action,{onAction:async()=>{let t=Jt.toString();if(t.length===0)return(0,ae.showToast)(ae.Toast.Style.Success,"No errors to copy");await ae.Clipboard.copy(t),await(0,ae.showToast)(ae.Toast.Style.Success,"Errors copied to clipboard"),await(0,ae.confirmAlert)({title:"Be careful with this information",message:"Please be mindful of where you share this error log, as it may contain sensitive information. Always analyze it before sharing.",primaryAction:{title:"Got it",style:ae.Alert.ActionStyle.Default}})},title:"Copy Last Errors",icon:ae.Icon.CopyClipboard,style:ae.Action.Style.Regular})}var io=Cd;var Ua=require("@raycast/api");var Na=require("react");var Td=()=>{let e=pe.get(ye.CLI_VERSION);return e?parseFloat(e):-1},Da=()=>{let[e,t]=(0,Na.useState)(Td);return $e(()=>{pe.subscribe((r,n)=>{n&&r===ye.CLI_VERSION&&t(parseFloat(n)||-1)})}),e};var or=require("react/jsx-runtime");function Er(){let e=Da();return(0,or.jsxs)(Ua.ActionPanel.Section,{title:`Debugging & Bug Reporting (CLI v${e})`,children:[(0,or.jsx)(io,{}),(0,or.jsx)(Cr,{}),(0,or.jsx)(vr,{})]})}var te=require("@raycast/api");var Ge=require("@raycast/api"),lt=require("react");var ze=require("react");var za=require("react/jsx-runtime"),ao=(0,ze.createContext)(null),Ad=({children:e})=>{let t=(0,ze.useRef)(new Map),r=i=>{i instanceof Lt?t.current.forEach(s=>s(i)):t.current.forEach((s,a)=>{let c=i.find(l=>l.id===a);c&&s(c)})},n=(i,s)=>(t.current.set(i,s),()=>{t.current.delete(i)}),o=(0,ze.useMemo)(()=>({listeners:t,publishItems:r,subscribeItem:n}),[]);return(0,za.jsx)(ao.Provider,{value:o,children:e})},Va=()=>{let e=(0,ze.useContext)(ao);if(e==null)throw new Error("useVaultItemPublisher must be used within a VaultListenersProvider");return e.publishItems},Ma=()=>{let e=(0,ze.useContext)(ao);if(e==null)throw new Error("useVaultItemSubscriber must be used within a VaultListenersProvider");return t=>{let r;return new Promise((n,o)=>{let i=e.subscribeItem(t,s=>{try{if(i(),s instanceof Lt)throw s;n(s),clearTimeout(r)}catch(a){o(a)}});r=setTimeout(()=>{i(),o(new so)},15e3)})}},so=class extends Error{constructor(){super("Timed out waiting for item"),this.name="SubscriberTimeoutError"}},Ba=Ad;var Za=require("@raycast/api");function Ga(e){return e.map(t=>({object:t.object,id:t.id,organizationId:t.organizationId,folderId:t.folderId,type:t.type,name:t.name,revisionDate:t.revisionDate,creationDate:t.creationDate,deletedDate:t.deletedDate,favorite:t.favorite,reprompt:t.reprompt,collectionIds:t.collectionIds,secureNote:t.secureNote?{type:t.secureNote.type}:void 0,fields:Pd(t.fields),login:kd(t.login),identity:Ld(t.identity),card:Rd(t.card),passwordHistory:$d(t.passwordHistory),notes:F(t.notes),sshKey:Od(t.sshKey)}))}function Wa(e){return e.map(t=>({object:t.object,id:t.id,name:t.name}))}function Pd(e){return e?.map(t=>({name:t.name,value:F(t.value),type:t.type,linkedId:t.linkedId}))}function kd(e){if(e)return{username:e.username,uris:e.uris,password:F(e.password),passwordRevisionDate:F(e.passwordRevisionDate),totp:F(e.totp)}}function Ld(e){if(e)return{title:F(e.title),firstName:F(e.firstName),middleName:F(e.middleName),lastName:F(e.lastName),address1:F(e.address1),address2:F(e.address2),address3:F(e.address3),city:F(e.city),state:F(e.state),postalCode:F(e.postalCode),country:F(e.country),company:F(e.company),email:F(e.email),phone:F(e.phone),ssn:F(e.ssn),username:F(e.username),passportNumber:F(e.passportNumber),licenseNumber:F(e.licenseNumber)}}function Rd(e){if(e)return{brand:e.brand,cardholderName:F(e.cardholderName),number:F(e.number),expMonth:F(e.expMonth),expYear:F(e.expYear),code:F(e.code)}}function $d(e){return e?.map(t=>({password:F(t.password),lastUsedDate:F(t.lastUsedDate)}))}function Od(e){if(e)return{publicKey:e.publicKey,keyFingerprint:e.keyFingerprint,privateKey:F(e.privateKey)}}function F(e){return e&&ur}var Ka=require("@raycast/api"),ct=require("crypto"),ja=require("react"),Ha="aes-256-cbc";function Ya(){let{clientSecret:e}=(0,Ka.getPreferenceValues)(),t=(0,ja.useMemo)(()=>_d(e.trim()),[e]);return{encrypt:o=>{let i=(0,ct.randomBytes)(16),s=(0,ct.createCipheriv)(Ha,t,i),a=Buffer.concat([s.update(o),s.final()]);return{iv:i.toString("hex"),content:a.toString("hex")}},decrypt:(o,i)=>{let s=(0,ct.createDecipheriv)(Ha,t,Buffer.from(i,"hex"));return Buffer.concat([s.update(Buffer.from(o,"hex")),s.final()]).toString()}}}function _d(e){return Buffer.from((0,ct.createHash)("sha256").update(e).digest("base64").slice(0,32))}function Fd(){let{encrypt:e,decrypt:t}=Ya(),r=(0,Za.getPreferenceValues)().shouldCacheVaultItems;return $e(()=>{pe.isEmpty||pe.clear()},!r),{getCachedVault:()=>{try{if(!r)throw new Dt;let i=pe.get(ye.IV),s=pe.get(ye.VAULT);if(!i||!s)throw new Dt;let a=t(s,i);return JSON.parse(a)}catch(i){return i instanceof Dt||h("Failed to decrypt cached vault",i),{items:[],folders:[]}}},cacheVault:(i,s)=>{try{if(!r)throw new Dt;let a=JSON.stringify({items:Ga(i),folders:Wa(s)}),c=e(a);pe.set(ye.VAULT,c.content),pe.set(ye.IV,c.iv)}catch(a){a instanceof Dt||h("Failed to cache vault",a)}}}}var Dt=class extends Error{},Xa=Fd;var Qa=require("react/jsx-runtime"),qa=(0,lt.createContext)(null);function Nd(){return{items:[],folders:[],isLoading:!0}}var{syncOnLaunch:Dd}=(0,Ge.getPreferenceValues)();function Ja(e){let{children:t}=e,r=un(),n=ue(),o=Va(),{getCachedVault:i,cacheVault:s}=Xa(),[a,c]=la(ye.CURRENT_FOLDER_ID,null),[l,f]=(0,lt.useReducer)((g,E)=>({...g,...E}),{...Nd(),...i()});$e(()=>{Dd?C({isInitial:!0}):b()},r.active&&r.token);async function b(){try{f({isLoading:!0});let g=[],E=[];try{let[k,L]=await Promise.all([n.listItems(),n.listFolders()]);if(k.error)throw k.error;if(L.error)throw L.error;g=k.result,E=L.result,g.sort(Vd)}catch(k){throw o(new Lt),k}f({items:g,folders:E}),o(g),s(g,E)}catch(g){await(0,Ge.showToast)(Ge.Toast.Style.Failure,"Failed to load vault items",Hn(g)),h("Failed to load vault items",g)}finally{f({isLoading:!1})}}async function C(g){let{isInitial:E=!1}=g??{},k=await(0,Ge.showToast)({title:"Syncing Vault...",message:E?"Background Task":void 0,style:Ge.Toast.Style.Animated});try{await n.sync(),await b(),await k.hide()}catch(L){await n.logout(),k.style=Ge.Toast.Style.Failure,k.title="Failed to sync vault",k.message=Hn(L)}}function x(g){c(typeof g=="string"?g:g?.id)}function A(g){let E=typeof g=="function"?g(l):g;f(E),s(E.items,E.folders)}let I=(0,lt.useMemo)(()=>({...l,items:Ud(l.items,a),isEmpty:l.items.length==0,isLoading:l.isLoading||r.isLoading,currentFolderId:a,syncItems:C,loadItems:b,setCurrentFolder:x,updateState:A}),[l,r.isLoading,a,C,b,x,A]);return(0,Qa.jsx)(qa.Provider,{value:I,children:t})}function Ud(e,t){return!t||t===At.ALL?e:t===At.NO_FOLDER?e.filter(r=>r.folderId===null):e.filter(r=>r.folderId===t)}function Vd(e,t){return e.favorite&&t.favorite?0:e.favorite?-1:1}var ut=()=>{let e=(0,lt.useContext)(qa);if(e==null)throw new Error("useVault must be used within a VaultProvider");return e};var ir=require("react/jsx-runtime");function Tr(){let e=ut(),t=ue(),r=async()=>{let o=await(0,te.showToast)(te.Toast.Style.Animated,"Locking Vault...","Please wait");await t.lock({reason:Tt.MANUAL}),await o.hide()},n=async()=>{let o=await(0,te.showToast)({title:"Logging Out...",style:te.Toast.Style.Animated});try{await t.logout(),await o.hide()}catch{o.title="Failed to logout",o.style=te.Toast.Style.Failure}};return(0,ir.jsxs)(te.ActionPanel.Section,{title:"Vault Actions",children:[(0,ir.jsx)(te.Action,{title:"Sync Vault",shortcut:{macOS:{key:"r",modifiers:["opt"]},windows:{key:"r",modifiers:["alt"]}},icon:te.Icon.ArrowClockwise,onAction:e.syncItems}),(0,ir.jsx)(te.Action,{icon:{source:"sf_symbols_lock.svg",tintColor:te.Color.PrimaryText},title:"Lock Vault",shortcut:{macOS:{key:"l",modifiers:["opt","shift"]},windows:{key:"l",modifiers:["alt","shift"]}},onAction:r}),(0,ir.jsx)(te.Action,{style:te.Action.Style.Destructive,title:"Logout",icon:te.Icon.Logout,onAction:n})]})}var dt=require("react/jsx-runtime"),Md=`

`,co="https://bitwarden.com/help/cli/#download-and-install",Bd=e=>`\`\`\`
${e}
\`\`\``,zd=({error:e})=>{let t=Zr(e),r=(0,Ae.getPreferenceValues)().cliPath,n=e instanceof Rt,o=r||e instanceof et,i=[];if(o&&!n?i.push("# \u26A0\uFE0F Bitwarden CLI not found"):i.push("# \u{1F4A5} Whoops! Something went wrong"),n)i.push(`We couldn't download the [Bitwarden CLI](${co}), you can always install it on your machine.`);else if(o){let s=r?` (${r})`:"";i.push(`We couldn't find the [Bitwarden CLI](${co}) installed on your machine${s}.`)}else i.push(`The \`${Ae.environment.commandName}\` command crashed when we were not expecting it to.`);if(i.push("> Please read the `Setup` section in the [extension's description](https://www.raycast.com/jomifepe/bitwarden) to ensure that everything is properly configured."),i.push(`**Try restarting the command. If the issue persists, consider [reporting a bug on GitHub](${oo}) to help us fix it.**`),t){let s=/incompatible architecture/gi.test(t);i.push(">## Technical details \u{1F913}",s&&`\u26A0\uFE0F We suspect that your Bitwarden CLI was installed using a version of NodeJS that's incompatible with your system architecture (e.g. x64 NodeJS on a M1/Apple Silicon Mac). Please make sure your have the correct versions of your software installed (e.g., ${Z==="macos"?"Homebrew, ":""}NodeJS, and Bitwarden CLI).`,Bd(t))}return(0,dt.jsx)(Ae.Detail,{markdown:i.filter(Boolean).join(Md),actions:(0,dt.jsxs)(Ae.ActionPanel,{children:[(0,dt.jsxs)(Ae.ActionPanel.Section,{title:"Bug Report",children:[(0,dt.jsx)(Cr,{}),(0,dt.jsx)(vr,{})]}),o&&(0,dt.jsx)(Ae.Action.OpenInBrowser,{title:"Open Installation Guide",url:co})]})})},br=zd;var lo=require("react/jsx-runtime"),Ar=class extends ec.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}async componentDidCatch(t,r){t instanceof Re?(this.setState(n=>({...n,hasError:!0,error:t.message})),await(0,sr.showToast)(sr.Toast.Style.Failure,t.message)):(sr.environment.isDevelopment&&this.setState(n=>({...n,hasError:!0,error:t.message})),console.error("Error:",t,r))}render(){try{return this.state.hasError?(0,lo.jsx)(br,{error:this.state.error}):this.props.children}catch{return(0,lo.jsx)(br,{})}}};var Pl=require("@raycast/api");var ee=require("@raycast/api");var tc=require("react"),dn=require("react/jsx-runtime"),Gd=e=>{let t=tc.Children.toArray(e.children);return e.reverse&&t.reverse(),(0,dn.jsx)(dn.Fragment,{children:t})},rc=Gd;var ft=require("@raycast/api");var fn=require("@raycast/api");function Wd(){let e=ue(),t=Ma();async function r(o){let i=await e.getItem(o);if(i.error)throw i.error;return i.result}async function n(o,i=(a=>a),s){let a=i(o);if(!Hd(a))return a;let c=s?await(0,fn.showToast)(fn.Toast.Style.Animated,s):void 0,l=i(await Promise.race([t(o.id),r(o.id)]));return await c?.hide(),l}return n}function Hd(e){try{return typeof e=="object"?JSON.stringify(e).includes(ur):typeof e=="string"?e===ur:!1}catch{return!1}}var D=Wd;var Pe=require("@raycast/api");var Ut=(e,t=!1)=>{let r=e.charAt(0).toUpperCase(),n=t?e.slice(1).toLowerCase():e.slice(1);return r+n};async function Q(e,t){let r=(0,Pe.getPreferenceValues)().windowActionOnCopy,n=Ut(e,!0);r==="keepOpen"?await(0,Pe.showToast)({title:n,message:t,style:Pe.Toast.Style.Success}):r==="closeAndPopToRoot"?(await(0,Pe.showHUD)(n),await(0,Pe.popToRoot)()):await(0,Pe.showHUD)(n)}var nc=require("react/jsx-runtime");function Kd(){let e=$(),t=D();if(!e.login?.password)return null;let r=async()=>{try{let n=await t(e,o=>o.login?.password,"Getting password...");n&&(await ft.Clipboard.copy(n,{transient:q("password")}),await Q("Copied password to clipboard"))}catch(n){await(0,ft.showToast)(ft.Toast.Style.Failure,"Failed to get password"),h("Failed to copy password",n)}};return(0,nc.jsx)(W,{title:"Copy Password",icon:ft.Icon.Key,onAction:r,repromptDescription:`Copying the password of <${e.name}>`})}var uo=Kd;var pt=require("@raycast/api");var oc=require("@raycast/api"),pn=require("react");function Vt(){let[e,t]=(0,pn.useState)(void 0);return(0,pn.useEffect)(()=>{(0,oc.getFrontmostApplication)().then(r=>t(r.name)).catch(()=>t(void 0))},[]),e}var ic=require("react/jsx-runtime");function jd(){let e=$(),t=D(),r=Yd();if(!e.login?.password)return null;let n=async()=>{try{let o=await t(e,i=>i.login?.password,"Getting password...");o&&await pt.Clipboard.paste(o)}catch(o){await(0,pt.showToast)(pt.Toast.Style.Failure,"Failed to get password"),h("Failed to paste password",o)}};return(0,ic.jsx)(W,{title:r,icon:pt.Icon.Window,onAction:n,repromptDescription:`Pasting the password of <${e.name}>`})}function Yd(){let e=Vt();return e?`Paste Password into ${e}`:"Paste Password"}var fo=jd;var We=require("@raycast/api");var sc=require("react/jsx-runtime");function Zd(){let e=ue(),t=$(),r=D();if(!t.login?.totp)return null;let n=async()=>{let o=await(0,We.showToast)(We.Toast.Style.Animated,"Getting TOTP code...");try{let i=await r(t,c=>c.id),{error:s,result:a}=await e.getTotp(i);if(s)throw s;await o?.hide(),await We.Clipboard.copy(a,{transient:q("other")}),await Q("Copied code to clipboard")}catch(i){o.message="Failed to get TOTP",o.style=We.Toast.Style.Failure,h("Failed to copy TOTP",i)}};return(0,sc.jsx)(W,{title:"Copy TOTP",icon:We.Icon.Clipboard,onAction:n,shortcut:{macOS:{key:"t",modifiers:["opt"]},windows:{key:"t",modifiers:["alt"]}},repromptDescription:`Copying the TOTP of <${t.name}>`})}var po=Zd;var He=require("@raycast/api");var ac=require("react/jsx-runtime");function Xd(){let e=ue(),t=$(),r=D(),n=Vt();if(!t.login?.totp)return null;let o=async()=>{let i=await(0,He.showToast)(He.Toast.Style.Animated,"Getting TOTP code...");try{let s=await r(t,l=>l.id),{error:a,result:c}=await e.getTotp(s);if(a)throw a;await i?.hide(),await He.Clipboard.paste(c)}catch(s){i.message="Failed to get TOTP",i.style=He.Toast.Style.Failure,h("Failed to paste TOTP",s)}};return(0,ac.jsx)(W,{title:n?`Paste TOTP into ${n}`:"Paste TOTP",icon:He.Icon.Window,onAction:o,shortcut:{macOS:{key:"t",modifiers:["opt","shift"]},windows:{key:"t",modifiers:["alt","shift"]}},repromptDescription:`Pasting the TOTP of <${t.name}>`})}var mo=Xd;var _e=require("@raycast/api");var cc=require("react/jsx-runtime");function qd(){let e=$(),t=D();if(!e.login?.username)return null;let r=async()=>{try{let n=await t(e,o=>o.login?.username,"Getting username...");n&&(await _e.Clipboard.copy(n,{transient:q("other")}),await Q("Copied username to clipboard"))}catch(n){await(0,_e.showToast)(_e.Toast.Style.Failure,"Failed to get username"),h("Failed to copy username",n)}};return(0,cc.jsx)(_e.Action,{title:"Copy Username",icon:_e.Icon.Person,onAction:r,shortcut:{macOS:{key:"u",modifiers:["opt"]},windows:{key:"u",modifiers:["alt"]}}})}var ho=qd;var mt=require("@raycast/api");var lc=require("react/jsx-runtime");function Jd(){let e=$(),t=D(),r=Vt();if(!e.login?.username)return null;let n=async()=>{try{let o=await t(e,i=>i.login?.username,"Getting username...");o&&await mt.Clipboard.paste(o)}catch(o){await(0,mt.showToast)(mt.Toast.Style.Failure,"Failed to get username"),h("Failed to paste username",o)}};return(0,lc.jsx)(W,{title:r?`Paste Username into ${r}`:"Paste Username",icon:mt.Icon.Window,onAction:n,repromptDescription:`Pasting the username of <${e.name}>`,shortcut:{macOS:{key:"u",modifiers:["cmd","opt"]},windows:{key:"u",modifiers:["ctrl","alt"]}}})}var go=Jd;var Fe=require("@raycast/api");var dc=require("react/jsx-runtime");function Qd(){let e=$(),t=D();return uc(e)?(0,dc.jsx)(Fe.Action,{title:"Open in Browser",onAction:async()=>{try{let n=await t(e,uc,"Getting URL...");n&&await(0,Fe.open)(n)}catch(n){await(0,Fe.showToast)(Fe.Toast.Style.Failure,"Failed to get URL"),h("Failed to open URL in browser",n)}},icon:Fe.Icon.Globe,shortcut:{macOS:{key:"o",modifiers:["opt"]},windows:{key:"o",modifiers:["alt"]}}}):null}function uc(e){return e.login?.uris?.[0]?.uri}var yo=Qd;var gt=require("@raycast/api");var ef={1:"01 - January",2:"02 - February",3:"03 - March",4:"04 - April",5:"05 - May",6:"06 - June",7:"07 - July",8:"08 - August",9:"09 - September",10:"10 - October",11:"11 - November",12:"12 - December"},tf={expMonth:e=>ef[e]??e},pc=(e,t)=>tf[e]?.(t)??t;function mc(e,t){return`# \u{1F4B3} ${e}
&nbsp;
| ${Z==="macos"?"\u2325":"Alt"}	**Field** | **Value** |
| --- | --- |
${Object.entries(t).map(([r,n],o)=>{if(!n)return null;let i=qe[r],s=Gt[o];return`| ${s?`${s}.`:"&nbsp;"}	**${i}** | ${pc(r,n)} |`}).filter(Boolean).join(`
`)}
`}function hc(e){return Object.entries(e).map(([t,r])=>r?`${qe[t]}: ${pc(t,r)}`:null).filter(Boolean).join(`
`)}var fc=Object.keys(qe);function mn([e],[t]){let r=fc.indexOf(Array.isArray(e)?e[0]:e),n=fc.indexOf(Array.isArray(t)?t[0]:t);return r-n}var Ke="https://vault.bitwarden.com/images",rf={[Le.VISA]:`${Ke}/visa-light.png`,[Le.MASTERCARD]:`${Ke}/mastercard-light.png`,[Le.AMEX]:`${Ke}/amex-light.png`,[Le.DISCOVER]:`${Ke}/discover-light.png`,[Le.DINERS_CLUB]:`${Ke}/diners_club-light.png`,[Le.JCB]:`${Ke}/jcb-light.png`,[Le.MAESTRO]:`${Ke}/maestro-light.png`,[Le.UNION_PAY]:`${Ke}/union_pay-light.png`,[Le.RU_PAY]:`${Ke}/ru_pay-light.png`};function gc(e){return rf[e]}var he=require("@raycast/api");var yc=require("react");var ht=require("react/jsx-runtime");function nf(e){let{itemName:t,details:r,sorter:n,label:o,getMarkdown:i,getCopyValue:s,titleMap:a}=e,c=Ut(o,!0),l=x=>async()=>{await he.Clipboard.copy(x,{transient:q("other")}),await Q("Copied details to clipboard")},{sortedDetails:f,sortedDetailsEntries:b}=(0,yc.useMemo)(()=>{if(!n)return{sortedDetails:r,sortedDetailsEntries:Object.entries(r)};let x=Object.entries(r).sort(n);return{sortedDetails:Object.fromEntries(x),sortedDetailsEntries:x}},[r]),C=async()=>{await he.Clipboard.copy(s(f),{transient:q("other")}),await Q(`Copied ${o} details to clipboard`)};return(0,ht.jsx)(he.Detail,{markdown:i(t,f),actions:(0,ht.jsxs)(he.ActionPanel,{children:[(0,ht.jsx)(he.ActionPanel.Section,{children:(0,ht.jsx)(he.Action,{title:`Copy ${c} Details`,onAction:C})}),(0,ht.jsx)(he.ActionPanel.Section,{title:`${c} Fields`,children:b.map(([x,A],I)=>{if(!A)return null;let g=Gt[I];return(0,ht.jsx)(he.Action,{title:`Copy ${of(x,a)}`,icon:he.Icon.Clipboard,onAction:l(A),shortcut:g?{macOS:{key:g,modifiers:["opt"]},windows:{key:g,modifiers:["alt"]}}:void 0},`${I}-${x}`)})})]})})}function of(e,t){return t?typeof t=="function"?t(e):t[e]:Ut(e,!0)}var hn=nf;var wo=require("react/jsx-runtime");function sf(){let{push:e}=(0,gt.useNavigation)(),t=$(),r=D();if(!t.card)return null;let n=async()=>{try{let o=await r(t,i=>i.card,"Getting card details...");o&&e((0,wo.jsx)(hn,{label:"Card",details:o,itemName:t.name,titleMap:qe,sorter:mn,getMarkdown:mc,getCopyValue:hc}))}catch(o){await(0,gt.showToast)(gt.Toast.Style.Failure,"Failed to get card details"),h("Failed to show card details",o)}};return(0,wo.jsx)(W,{title:"Show Card",icon:gt.Icon.Eye,onAction:n,repromptDescription:`Showing the card details of <${t.name}>`})}var bo=sf;var yt=require("@raycast/api");function bc(e,t){return`# \u{1FAAA} ${e}
&nbsp;
| ${Z==="macos"?"\u2325":"Alt"}	**Field** | **Value** |
| --- | --- |
${Object.entries(t).map(([r,n],o)=>{if(!n)return null;let i=Je[r],s=Gt[o];return`| ${s?`${s}.`:"&nbsp;"}	**${i}** | ${n} |`}).filter(Boolean).join(`
`)}
`}function Sc(e){return Object.entries(e).map(([t,r])=>r?`${Je[t]}: ${r}`:null).filter(Boolean).join(`
`)}var wc=Object.keys(Je);function gn([e],[t]){let r=wc.indexOf(Array.isArray(e)?e[0]:e),n=wc.indexOf(Array.isArray(t)?t[0]:t);return r-n}var So=require("react/jsx-runtime");function af(){let{push:e}=(0,yt.useNavigation)(),t=$(),r=D();if(!t.identity)return null;let n=async()=>{try{let o=await r(t,i=>i.identity,"Getting identity details...");o&&e((0,So.jsx)(hn,{label:"Identity",details:o,itemName:t.name,titleMap:Je,sorter:gn,getMarkdown:bc,getCopyValue:Sc}))}catch(o){await(0,yt.showToast)(yt.Toast.Style.Failure,"Failed to get identity details"),h("Failed to show identity details",o)}};return(0,So.jsx)(W,{title:"Show Identity",icon:yt.Icon.Eye,onAction:n,repromptDescription:`Showing the identity details of <${t.name}>`})}var Eo=af;var ce=require("@raycast/api");var ar=require("react/jsx-runtime");function cf(){let{push:e}=(0,ce.useNavigation)(),t=$(),r=D();if(!t.notes)return null;let n=async()=>{try{let o=await r(t,i=>i.notes,"Getting notes...");o&&e((0,ar.jsx)(lf,{itemName:t.name,notes:o}))}catch(o){await(0,ce.showToast)(ce.Toast.Style.Failure,"Failed to get notes"),h("Failed to show notes",o)}};return(0,ar.jsx)(W,{title:"Show Notes",icon:ce.Icon.Eye,onAction:n,repromptDescription:`Showing the notes of <${t.name}>`,shortcut:{macOS:{key:"n",modifiers:["opt"]},windows:{key:"n",modifiers:["alt"]}}})}function lf({itemName:e,notes:t}){let r=async()=>{await ce.Clipboard.copy(t,{transient:q("other")}),await Q("Copied notes to clipboard")};return(0,ar.jsx)(ce.Detail,{markdown:uf(e,t),actions:(0,ar.jsx)(ce.ActionPanel,{children:(0,ar.jsx)(ce.Action,{title:"Copy Notes",onAction:r,icon:ce.Icon.Clipboard})})})}function uf(e,t){return`# \u{1F4C4} ${e}
&nbsp;
\`\`\`
${t}
\`\`\`
`}var cr=cf;var wt=require("@raycast/api");var Pr=require("react/jsx-runtime");function df({selector:e,sorter:t,labelMapper:r}){let n=$(),o=D(),i=ff(n,e,t);if(!i)return null;let s=(a,c)=>async()=>{try{let l=await o(n,f=>e(f)?.[a],`Getting ${a}...`);if(typeof l!="string")throw new Error(`Value of ${a} is not a string`);l&&(await wt.Clipboard.copy(l,{transient:q("other")}),await Q(`Copied ${c} to clipboard`))}catch(l){await(0,wt.showToast)(wt.Toast.Style.Failure,`Failed to copy ${a}`),h(`Failed to copy ${a}`,l)}};return(0,Pr.jsx)(Pr.Fragment,{children:i.map(([a,c],l)=>{if(!c||typeof c!="string")return null;let f=r?.(a)??Ut(a);return(0,Pr.jsx)(W,{title:`Copy ${f}`,icon:wt.Icon.Clipboard,onAction:s(a,f),repromptDescription:`Copying the ${f} of <${n.name}>`},`${l}-${a}`)})})}function ff(e,t,r){let n=t(e);if(n==null)return null;let o=Object.entries(n);return r&&o.sort(r),o}var bt=df;var Ec=require("react/jsx-runtime");function pf(){return(0,Ec.jsx)(bt,{selector:e=>e.identity,sorter:gn,labelMapper:e=>Je[e]})}var xo=pf;var xc=require("react/jsx-runtime");function mf(){return(0,xc.jsx)(bt,{selector:e=>e.card,sorter:mn,labelMapper:e=>qe[e]})}var Io=mf;var Ic=require("react/jsx-runtime");function hf(){return(0,Ic.jsx)(bt,{selector:t=>t.login?.uris?.reduce((r,n,o)=>(n.uri&&(r[`URI ${o+1}`]=n.uri),r),{})??{}})}var vo=hf;var kr=require("@raycast/api");var gf=require("react/jsx-runtime");var vc=require("react/jsx-runtime");function yf(){return(0,vc.jsx)(bt,{selector:t=>Object.fromEntries(t.fields?.map(r=>[r.name,r.value])||[])})}var Co=yf;var St=require("@raycast/api");var Cc=require("react/jsx-runtime");function wf(){let e=$(),t=D();if(!e.sshKey?.publicKey)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.publicKey,"Getting public key...");n&&(await St.Clipboard.copy(n,{transient:q("other")}),await Q("Copied public key to clipboard"))}catch(n){await(0,St.showToast)(St.Toast.Style.Failure,"Failed to get public key"),h("Failed to copy public key",n)}};return(0,Cc.jsx)(W,{title:"Copy Public Key",icon:St.Icon.Key,onAction:r,repromptDescription:`Copying the public key of <${e.name}>`})}var To=wf;var Se=require("@raycast/api");var Po=require("@raycast/api"),ke=require("react");var Tc=require("react");function Ac(e,t){(0,Tc.useEffect)(()=>{e()},t)}var Ao=require("react/jsx-runtime"),Pc=(0,ke.createContext)({});function kc({children:e}){let{items:t}=ut(),[r,n]=(0,ke.useState)();Ac(async()=>{let s=await bf();n(s??[])},[]),(0,ke.useEffect)(()=>{if(!r)return;let s=t.flatMap(a=>a.favorite?r.some(c=>c===a.id)?[]:[a.id]:[]);s.length!==0&&n(Array.from(new Set(s)))},[t,!!r]),(0,ke.useEffect)(()=>{r&&Sf(r)},[r]);let o=s=>{n((a=[])=>r?.includes(s.id)?a.filter(c=>c!==s.id):[s.id,...a])},i=({id:s},a)=>{if(!r)return;let c=r.indexOf(s);if(c===-1)return;let l=c+(a==="up"?-1:1);if(l>=0&&l<r.length){let f=r.slice(0);f.splice(c,1),f.splice(l,0,s),n(f)}};return r?(0,Ao.jsx)(Pc.Provider,{value:{favoriteOrder:r,setFavoriteOrder:n,toggleFavorite:o,moveFavorite:i},children:e}):(0,Ao.jsx)(tr,{})}var Lr=()=>{let e=(0,ke.useContext)(Pc);if(!e)throw new Error("useFavoritesContext must be used within a FavoritesProvider");return e};async function bf(){try{let e=await Po.LocalStorage.getItem(M.VAULT_FAVORITE_ORDER);return e?JSON.parse(e):void 0}catch(e){h("Failed to get favorite order from local storage",e);return}}async function Sf(e){try{await Po.LocalStorage.setItem(M.VAULT_FAVORITE_ORDER,JSON.stringify(e))}catch(t){h("Failed to persist favorite order to local storage",t)}}function Lc(e){let{favoriteOrder:t}=Lr();return(0,ke.useMemo)(()=>{let r=e.reduce((n,o)=>{let i=t.indexOf(o.id);return o.favorite||i!==-1?n.favoriteItems.push({...o,listOrder:i??Number.MAX_SAFE_INTEGER}):n.nonFavoriteItems.push(o),n},{favoriteItems:[],nonFavoriteItems:[]});return r.favoriteItems.sort((n,o)=>n.listOrder-o.listOrder),r},[e,t])}var Ne=require("react/jsx-runtime");function Ef(){let e=$(),{favoriteOrder:t,toggleFavorite:r,moveFavorite:n}=Lr(),o=e.favorite,i=t.includes(e.id),s=async()=>{try{await r(e)}catch(c){await(0,Se.showToast)(Se.Toast.Style.Failure,"Failed to toggle favorite \u2639\uFE0F"),h("Failed to toggle favorite",c)}},a=c=>()=>n(e,c);return(0,Ne.jsxs)(Ne.Fragment,{children:[!o&&(0,Ne.jsx)(Se.Action,{title:i?"Remove Favorite":"Mark As Favorite",onAction:s,icon:i?Se.Icon.StarDisabled:Se.Icon.Star,shortcut:{macOS:{key:"f",modifiers:["opt"]},windows:{key:"f",modifiers:["alt"]}}}),(o||i)&&(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)(Se.Action,{title:"Move Favorite Up",onAction:a("up"),icon:Se.Icon.ArrowUpCircleFilled,shortcut:{macOS:{key:"arrowUp",modifiers:["opt","shift"]},windows:{key:"arrowUp",modifiers:["alt","shift"]}}}),(0,Ne.jsx)(Se.Action,{title:"Move Favorite Down",onAction:a("down"),icon:Se.Icon.ArrowDownCircleFilled,shortcut:{macOS:{key:"arrowDown",modifiers:["opt","shift"]},windows:{key:"arrowDown",modifiers:["alt","shift"]}}})]})]})}var Rc=Ef;var Et=require("@raycast/api");var Oc=require("react/jsx-runtime");function xf(){let e=$(),t=D();if(!e.sshKey?.keyFingerprint)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.keyFingerprint,"Getting key fingerprint...");n&&(await Et.Clipboard.copy(n,{transient:q("other")}),await Q("Copied key fingerprint to clipboard"))}catch(n){await(0,Et.showToast)(Et.Toast.Style.Failure,"Failed to get key fingerprint"),h("Failed to copy key fingerprint",n)}};return(0,Oc.jsx)(W,{title:"Copy Key Fingerprint",icon:Et.Icon.Key,onAction:r,repromptDescription:`Copying the key fingerprint of <${e.name}>`})}var $c=xf;var xt=require("@raycast/api");var Fc=require("react/jsx-runtime");function If(){let e=$(),t=D();if(!e.sshKey?.privateKey)return null;let r=async()=>{try{let n=await t(e,o=>o.sshKey?.privateKey,"Getting private key...");n&&(await xt.Clipboard.copy(n,{transient:q("other")}),await Q("Copied private key to clipboard"))}catch(n){await(0,xt.showToast)(xt.Toast.Style.Failure,"Failed to get private key"),h("Failed to copy private key",n)}};return(0,Fc.jsx)(W,{title:"Copy Private Key",icon:xt.Icon.Key,onAction:r,repromptDescription:`Copying the private key of <${e.name}>`})}var _c=If;var v=require("react/jsx-runtime"),{primaryAction:vf}=(0,ee.getPreferenceValues)(),Cf=()=>{let{type:e,id:t}=$();return(0,v.jsxs)(ee.ActionPanel,{children:[e===1&&(0,v.jsxs)(ee.ActionPanel.Section,{children:[(0,v.jsxs)(rc,{reverse:vf==="paste",children:[(0,v.jsx)(uo,{}),(0,v.jsx)(fo,{})]}),(0,v.jsx)(po,{}),(0,v.jsx)(mo,{}),(0,v.jsx)(ho,{}),(0,v.jsx)(go,{}),(0,v.jsx)(yo,{}),(0,v.jsx)(vo,{}),(0,v.jsx)(cr,{})]}),e===3&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ee.ActionPanel.Section,{children:(0,v.jsx)(bo,{})}),(0,v.jsx)(ee.ActionPanel.Section,{title:"Card Fields",children:(0,v.jsx)(Io,{})}),(0,v.jsx)(ee.ActionPanel.Section,{children:(0,v.jsx)(cr,{})})]}),e===4&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ee.ActionPanel.Section,{children:(0,v.jsx)(Eo,{})}),(0,v.jsx)(ee.ActionPanel.Section,{title:"Identity Fields",children:(0,v.jsx)(xo,{})}),(0,v.jsx)(ee.ActionPanel.Section,{children:(0,v.jsx)(cr,{})})]}),e===2&&(0,v.jsx)(ee.ActionPanel.Section,{children:(0,v.jsx)(cr,{})}),e===5&&(0,v.jsxs)(ee.ActionPanel.Section,{children:[(0,v.jsx)(To,{}),(0,v.jsx)($c,{}),(0,v.jsx)(_c,{})]}),(0,v.jsx)(ee.ActionPanel.Section,{title:"Custom Fields",children:(0,v.jsx)(Co,{})}),(0,v.jsx)(ee.ActionPanel.Section,{title:"Item Actions",children:(0,v.jsx)(Rc,{})}),(0,v.jsx)(Tr,{}),(0,v.jsx)(Er,{}),ee.environment.isDevelopment&&(0,v.jsx)(ee.ActionPanel.Section,{title:"Development",children:(0,v.jsx)(ee.Action.CopyToClipboard,{title:"Copy item UUID",content:t})})]})},Nc=Cf;var de=require("@raycast/api"),Uc=require("react");var Dc={1:{icon:{source:xe[1],tintColor:de.Color.Blue},tooltip:Qe[1]},3:{icon:{source:xe[3],tintColor:de.Color.Green},tooltip:Qe[3]},4:{icon:{source:xe[4],tintColor:de.Color.Orange},tooltip:Qe[4]},2:{icon:{source:xe[2],tintColor:de.Color.PrimaryText},tooltip:Qe[2]},5:{icon:{source:xe[5],tintColor:de.Color.SecondaryText},tooltip:Qe[5]}};function Vc(e,t){let{favoriteOrder:r}=Lr();return(0,Uc.useMemo)(()=>{try{let n=[];if(t?.id&&n.push({icon:{source:de.Icon.Folder,tintColor:de.Color.SecondaryText},tag:{value:t.name,color:de.Color.SecondaryText},tooltip:`${t.name} Folder`}),e.favorite?n.push({icon:{source:de.Icon.Star,tintColor:de.Color.Blue},tooltip:"Bitwarden Favorite"}):r.includes(e.id)&&n.push({icon:{source:de.Icon.Star,tintColor:de.Color.Yellow},tooltip:"Favorite"}),e.reprompt===1&&n.push({icon:{source:de.Icon.Lock,tintColor:de.Color.SecondaryText},tooltip:"Master password re-prompt"}),!Dc[e.type])throw new Error(`No accessory defined for item ${e.name} with type ${e.type}`);return n.push(Dc[e.type]),n}catch(n){return h("Failed to get item accessories",n),[]}},[r,e.favorite,e.reprompt,e.type,t?.id,t?.name])}var bn=require("@raycast/api"),Tl=require("react");var xl=require("@raycast/api");var hl=ne(dl(),1),op=e=>e.normalize("NFKD").split(""),fl=/^\s+$/,pl=/^[`~!@#$%^&*()\-=_+{}[\]\|\\;':",./<>?]+$/,Bo={insertOrder:"insertOrder",bestMatch:"bestMatch"},ip={keySelector:e=>e,threshold:.6,ignoreCase:!0,ignoreSymbols:!0,normalizeWhitespace:!0,returnMatchData:!1,useDamerau:!0,useSellers:!0,useSeparatedUnicode:!1,sortBy:Bo.bestMatch},sp=()=>{},ap=e=>e instanceof Array?e:[e];function gl(e,t){let r=t.ignoreCase?e.toLocaleLowerCase():e,n=[],o=[],i=!0,s=0,a=t.useSeparatedUnicode?op(r):(0,hl.default)(r);for(let c of a)fl.lastIndex=0,pl.lastIndex=0,t.normalizeWhitespace&&fl.test(c)?i||(n.push(" "),o.push(s),i=!0):t.ignoreSymbols&&pl.test(c)||(t.useSeparatedUnicode?n.push(c):n.push(c.normalize()),o.push(s),i=!1),s+=c.length;for(o.push(e.length);n[n.length-1]===" ";)n.pop(),o.pop();return{original:e,normal:n,map:o}}function cp(e,t){return{index:t[e.start],length:t[e.end+1]-t[e.start]}}function yl(e,t){if(t===0)return{index:0,length:0};let r=t;for(let n=e.length-2;n>0&&r>1;n--){let o=e[n];r=o[r]<o[r-1]?r:r-1}return{start:r-1,end:t-1}}function lp(){return{start:0,end:0}}var up=()=>!0,dp=(e,t)=>e<t;function fp(e,t){let r=new Array(e);for(let n=0;n<e;n++)r[n]=new Array(t),r[n][0]=n;for(let n=0;n<t;n++)r[0][n]=n;return r}function pp(e,t){let r=new Array(e);r[0]=new Array(t).fill(0);for(let n=1;n<e;n++)r[n]=new Array(t),r[n][0]=n;return r}function wl(e,t,r,n,o){let i=r[n],s=r[n+1],a=e[n]===t[o]?0:1,c,l=s[o]+1;(c=i[o+1]+1)<l&&(l=c),(c=i[o]+a)<l&&(l=c),s[o+1]=l}function bl(e,t,r,n){for(let o=0;o<e.length;o++)wl(e,t,r,o,n)}function mp(e,t,r,n){if(n===0){bl(e,t,r,n);return}e.length>0&&wl(e,t,r,0,n);for(let o=1;o<e.length;o++){let i=r[o-1],s=r[o],a=r[o+1],c=e[o]===t[n]?0:1,l,f=a[n]+1;(l=s[n+1]+1)<f&&(f=l),(l=s[n]+c)<f&&(f=l),e[o]===t[n-1]&&e[o-1]===t[n]&&(l=i[n-1]+c)<f&&(f=l),a[n+1]=f}}function hp(e,t,r){let n=e;for(let o=0;o<t.length;o++){let i=t[o];n.children[i]==null&&(n.children[i]={children:{},candidates:[],depth:0}),n.depth=Math.max(n.depth,t.length-o),n=n.children[i]}n.candidates.push(r)}function ml(e,t,r,n){for(let o of r){let i=ap(n.keySelector(o)).map((s,a)=>({index:t,keyIndex:a,item:o,normalized:gl(s,n)}));t++;for(let s of i)hp(e,s.normalized.normal,s)}}function gp(e,t){let r=t.score-e.score;if(r!==0)return r;let n=e.match.start-t.match.start;if(n!==0)return n;let o=e.keyIndex-t.keyIndex;if(o!==0)return o;let i=e.lengthDiff-t.lengthDiff;return i!==0?i:Sl(e,t)}function Sl(e,t){return e.index-t.index}function yp(e){switch(e){case Bo.bestMatch:return gp;case Bo.insertOrder:return Sl;default:throw new Error(`unknown sortBy method ${e}`)}}function El(e,t,r,n,o,i,s){let a={item:r.item,normalized:r.normalized,score:n,match:o,index:r.index,keyIndex:r.keyIndex,lengthDiff:i};t[r.index]==null?(t[r.index]=e.length,e.push(a)):s(a,e[t[r.index]])<0&&(e[t[r.index]]=a)}var wp=Math.max,bp=e=>e;function Sp(e,t,r,n,o){let i=t+o,s=Math.min(r.length,t+e.depth+1),a=Math.ceil((i+s)/2);return 1-(a-s)/a>=n}function Ep(e,t,r,n,o,i){return 1-Math.min(o,i-(e.depth+1))/r.length>=n}function xp(e,t,r,n,o,i,s){let a=[];for(let l in e.children){let f=e.children[l];a.push([f,1,l,0,t.length])}let c=new Array(e.depth);for(;a.length!==0;){let[l,f,b,C,x]=a.pop();c[f-1]=b,r.score(t,c,n,f-1);let A=f,I=n[n.length-1][A],g=C,E=x;if(r.shouldUpdateScore(I,x)&&(g=A,E=I),l.candidates.length>0){let k=r.getLength(t.length,f),L=1-E/k;if(L>=s.threshold){let U=yl(n,g),N=Math.abs(f-t.length);for(let j of l.candidates)El(o,i,j,L,U,N,r.compareItems)}}for(let k in l.children){let L=l.children[k];r.shouldContinue(L,f,t,s.threshold,E,I)&&a.push([L,f+1,k,g,E])}}}function Ip(e,t,r){let n=r.useSellers?pp:fp,o={score:r.useDamerau?mp:bl,getLength:r.useSellers?bp:wp,shouldUpdateScore:r.useSellers?dp:up,shouldContinue:r.useSellers?Ep:Sp,walkBack:r.useSellers?yl:lp,compareItems:yp(r.sortBy)},i={},s=[],a=n(e.length+1,t.depth+1);if(r.threshold<=0||e.length===0)for(let l of t.candidates)El(s,i,l,0,{index:0,length:0},e.length,o.compareItems);xp(t,e,o,a,s,i,r);let c=s.sort(o.compareItems);if(r.returnMatchData){let l=r.useSellers?cp:sp;return c.map(f=>({item:f.item,original:f.normalized.original,key:f.normalized.normal.join(""),score:f.score,match:l(f.match,f.normalized.map)}))}return c.map(l=>l.item)}var wn=class{constructor(t,r){this.options=Object.assign({},ip,r),this.trie={children:{},candidates:[],depth:0},ml(this.trie,0,t,this.options),this.count=t.length}add(...t){ml(this.trie,this.count,t,this.options),this.count+=t.length}search(t,r){return r=Object.assign({},this.options,r),Ip(gl(t,this.options).normal,this.trie,r)}};var $r=require("react"),Il=require("url");function vl(e){try{return`https://icons.bitwarden.net/${new Il.URL(e).hostname}/icon.png`}catch{return xl.Icon.Globe}}function Cl(e){let[t,r]=(0,$r.useState)(""),n=(0,$r.useMemo)(()=>new wn(e,{ignoreSymbols:!1,threshold:.7,keySelector:i=>{let{login:s,card:a}=i;return[i.name,Qe[i.type],s?.username,s?.uris?.map(({uri:c})=>c),a?.brand,a?.number].flat().filter(c=>!!c)}}),[e]),o=(0,$r.useMemo)(()=>t?n.search(t):e,[n,t]);return{setSearchText:r,filteredItems:o}}var{fetchFavicons:vp}=(0,bn.getPreferenceValues)(),Cp={1:e=>{let t=e.login?.uris?.[0]?.uri;return vp&&t?vl(t):xe[1]},3:e=>{let{brand:t}=e.card??{};if(t){let r=gc(t);if(r)return r}return xe[3]},4:()=>xe[4],2:()=>xe[2],5:()=>xe[5]};function Al(e){return(0,Tl.useMemo)(()=>{let t=Cp[e.type]?.(e);return t||bn.Icon.QuestionMark},[e.type,e.card?.brand,e.login?.uris?.[0]?.uri])}var Sn=require("react/jsx-runtime"),Tp=({item:e,folder:t})=>{let r=Al(e),n=Vc(e,t);return(0,Sn.jsx)(Ko.Provider,{value:e,children:(0,Sn.jsx)(Pl.List.Item,{id:e.id,title:e.name,accessories:n,icon:r,subtitle:e.login?.username||void 0,actions:(0,Sn.jsx)(Nc,{})})})},kl=Tp;var Bt=require("@raycast/api");var Or=require("react/jsx-runtime");function zo(){let{folders:e,currentFolderId:t,setCurrentFolder:r}=ut();return e.length===0?null:(0,Or.jsxs)(Bt.List.Dropdown,{tooltip:"Select a folder",placeholder:"Search folders",defaultValue:t??At.ALL,onChange:r,throttle:!0,children:[(0,Or.jsx)(Bt.List.Dropdown.Item,{value:At.ALL,title:"All",icon:Bt.Icon.Folder}),e.map(n=>{let o=n.id||At.NO_FOLDER;return(0,Or.jsx)(Bt.List.Dropdown.Item,{value:o,title:n.name,icon:Bt.Icon.Folder},o)})]})}var G=require("react/jsx-runtime"),Ap=()=>(0,G.jsx)(Ar,{children:(0,G.jsx)(ea,{loadingFallback:(0,G.jsx)(tr,{}),children:(0,G.jsx)(ro,{unlock:!0,children:(0,G.jsx)(Ba,{children:(0,G.jsx)(Ja,{children:(0,G.jsx)(kc,{children:(0,G.jsx)(Pp,{})})})})})})});function Pp(){let{items:e,folders:t,isLoading:r,isEmpty:n}=ut(),{setSearchText:o,filteredItems:i}=Cl(e),{favoriteItems:s,nonFavoriteItems:a}=Lc(i);return(0,G.jsxs)(Ve.List,{searchBarPlaceholder:"Search vault",filtering:!1,isLoading:r,searchBarAccessory:(0,G.jsx)(zo,{}),onSearchTextChange:o,children:[s.length>0?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Ve.List.Section,{title:"Favorites",children:(0,G.jsx)(Go,{items:s,folders:t})}),(0,G.jsx)(Ve.List.Section,{title:"Other Items",children:(0,G.jsx)(Go,{items:a,folders:t})})]}):(0,G.jsx)(Go,{items:a,folders:t}),r?(0,G.jsx)(Ve.List.EmptyView,{icon:Ve.Icon.ArrowClockwise,title:"Loading...",description:"Please wait."}):(0,G.jsx)(Ve.List.EmptyView,{icon:{source:"bitwarden-64.png"},title:n?"Vault empty.":"No matching items found.",description:n?"Hit the sync button to sync your vault or try logging in again.":"Hit the sync button to sync your vault.",actions:!r&&(0,G.jsx)(Ve.ActionPanel,{children:(0,G.jsx)(Tr,{})})})]})}function Go({items:e,folders:t}){return(0,G.jsx)(G.Fragment,{children:e.map(r=>(0,G.jsx)(kl,{item:r,folder:kp(t,r)},r.id))})}function kp(e,t){return e.find(r=>r.id===t.folderId)}var Lp=Ap;
/*! Bundled license information:

node-stream-zip/node_stream_zip.js:
  (**
   * @license node-stream-zip | (c) 2020 Antelle | https://github.com/antelle/node-stream-zip/blob/master/LICENSE
   * Portions copyright https://github.com/cthackers/adm-zip | https://raw.githubusercontent.com/cthackers/adm-zip/master/LICENSE
   *)
*/
