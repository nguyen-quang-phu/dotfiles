"use strict";var Zl=Object.create;var Sr=Object.defineProperty;var Jl=Object.getOwnPropertyDescriptor;var Ql=Object.getOwnPropertyNames;var eu=Object.getPrototypeOf,tu=Object.prototype.hasOwnProperty;var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ru=(t,e)=>{for(var r in e)Sr(t,r,{get:e[r],enumerable:!0})},Qo=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ql(e))!tu.call(t,o)&&o!==r&&Sr(t,o,{get:()=>e[o],enumerable:!(n=Jl(e,o))||n.enumerable});return t};var te=(t,e,r)=>(r=t!=null?Zl(eu(t)):{},Qo(e||!t||!t.__esModule?Sr(r,"default",{value:t,enumerable:!0}):r,t)),nu=t=>Qo(Sr({},"__esModule",{value:!0}),t);var ri=M((n0,ti)=>{ti.exports=ei;ei.sync=lf;var Js=require("fs");function cf(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&t.substr(-o.length).toLowerCase()===o)return!0}return!1}function Qs(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:cf(e,r)}function ei(t,e,r){Js.stat(t,function(n,o){r(n,n?!1:Qs(o,t,e))})}function lf(t,e){return Qs(Js.statSync(t),t,e)}});var ai=M((o0,ii)=>{ii.exports=oi;oi.sync=uf;var ni=require("fs");function oi(t,e,r){ni.stat(t,function(n,o){r(n,n?!1:si(o,e))})}function uf(t,e){return si(ni.statSync(t),e)}function si(t,e){return t.isFile()&&ff(t,e)}function ff(t,e){var r=t.mode,n=t.uid,o=t.gid,s=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),i=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),d=a|c,f=r&l||r&c&&o===i||r&a&&n===s||r&d&&s===0;return f}});var li=M((i0,ci)=>{var s0=require("fs"),Kr;process.platform==="win32"||global.TESTING_WINDOWS?Kr=ri():Kr=ai();ci.exports=Xn;Xn.sync=df;function Xn(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){Xn(t,e||{},function(s,i){s?o(s):n(i)})})}Kr(t,e||{},function(n,o){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function df(t,e){try{return Kr.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var gi=M((a0,mi)=>{var Ot=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ui=require("path"),hf=Ot?";":":",fi=li(),di=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),hi=(t,e)=>{let r=e.colon||hf,n=t.match(/\//)||Ot&&t.match(/\\/)?[""]:[...Ot?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],o=Ot?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=Ot?o.split(r):[""];return Ot&&t.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:n,pathExt:s,pathExtExe:o}},pi=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:o,pathExtExe:s}=hi(t,e),i=[],a=l=>new Promise((d,f)=>{if(l===n.length)return e.all&&i.length?d(i):f(di(t));let m=n[l],v=/^".*"$/.test(m)?m.slice(1,-1):m,T=ui.join(v,t),x=!v&&/^\.[\\\/]/.test(t)?t.slice(0,2)+T:T;d(c(x,l,0))}),c=(l,d,f)=>new Promise((m,v)=>{if(f===o.length)return m(a(d+1));let T=o[f];fi(l+T,{pathExt:s},(x,b)=>{if(!x&&b)if(e.all)i.push(l+T);else return m(l+T);return m(c(l,d,f+1))})});return r?a(0).then(l=>r(null,l),r):a(0)},pf=(t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=hi(t,e),s=[];for(let i=0;i<r.length;i++){let a=r[i],c=/^".*"$/.test(a)?a.slice(1,-1):a,l=ui.join(c,t),d=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+l:l;for(let f=0;f<n.length;f++){let m=d+n[f];try{if(fi.sync(m,{pathExt:o}))if(e.all)s.push(m);else return m}catch{}}}if(e.all&&s.length)return s;if(e.nothrow)return null;throw di(t)};mi.exports=pi;pi.sync=pf});var yi=M((c0,qn)=>{"use strict";var bi=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};qn.exports=bi;qn.exports.default=bi});var Si=M((l0,Ei)=>{"use strict";var wi=require("path"),mf=gi(),gf=yi();function xi(t,e){let r=t.options.env||process.env,n=process.cwd(),o=t.options.cwd!=null,s=o&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(t.options.cwd)}catch{}let i;try{i=mf.sync(t.command,{path:r[gf({env:r})],pathExt:e?wi.delimiter:void 0})}catch{}finally{s&&process.chdir(n)}return i&&(i=wi.resolve(o?t.options.cwd:"",i)),i}function bf(t){return xi(t)||xi(t,!0)}Ei.exports=bf});var vi=M((u0,Zn)=>{"use strict";var Yn=/([()\][%!^"`<>&|;, *?])/g;function yf(t){return t=t.replace(Yn,"^$1"),t}function wf(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(Yn,"^$1"),e&&(t=t.replace(Yn,"^$1")),t}Zn.exports.command=yf;Zn.exports.argument=wf});var Ti=M((f0,Ii)=>{"use strict";Ii.exports=/^#!(.*)/});var Ci=M((d0,Ai)=>{"use strict";var xf=Ti();Ai.exports=(t="")=>{let e=t.match(xf);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var ki=M((h0,Pi)=>{"use strict";var Jn=require("fs"),Ef=Ci();function Sf(t){let r=Buffer.alloc(150),n;try{n=Jn.openSync(t,"r"),Jn.readSync(n,r,0,150,0),Jn.closeSync(n)}catch{}return Ef(r.toString())}Pi.exports=Sf});var _i=M((p0,$i)=>{"use strict";var vf=require("path"),Li=Si(),Ri=vi(),If=ki(),Tf=process.platform==="win32",Af=/\.(?:com|exe)$/i,Cf=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Pf(t){t.file=Li(t);let e=t.file&&If(t.file);return e?(t.args.unshift(t.file),t.command=e,Li(t)):t.file}function kf(t){if(!Tf)return t;let e=Pf(t),r=!Af.test(e);if(t.options.forceShell||r){let n=Cf.test(e);t.command=vf.normalize(t.command),t.command=Ri.command(t.command),t.args=t.args.map(s=>Ri.argument(s,n));let o=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${o}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function Lf(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:kf(n)}$i.exports=Lf});var Di=M((m0,Ni)=>{"use strict";var Qn=process.platform==="win32";function eo(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function Rf(t,e){if(!Qn)return;let r=t.emit;t.emit=function(n,o){if(n==="exit"){let s=Oi(o,e);if(s)return r.call(t,"error",s)}return r.apply(t,arguments)}}function Oi(t,e){return Qn&&t===1&&!e.file?eo(e.original,"spawn"):null}function $f(t,e){return Qn&&t===1&&!e.file?eo(e.original,"spawnSync"):null}Ni.exports={hookChildProcess:Rf,verifyENOENT:Oi,verifyENOENTSync:$f,notFoundError:eo}});var Bi=M((g0,Nt)=>{"use strict";var Ui=require("child_process"),to=_i(),ro=Di();function Mi(t,e,r){let n=to(t,e,r),o=Ui.spawn(n.command,n.args,n.options);return ro.hookChildProcess(o,n),o}function _f(t,e,r){let n=to(t,e,r),o=Ui.spawnSync(n.command,n.args,n.options);return o.error=o.error||ro.verifyENOENTSync(o.status,n),o}Nt.exports=Mi;Nt.exports.spawn=Mi;Nt.exports.sync=_f;Nt.exports._parse=to;Nt.exports._enoent=ro});var Ji=M((N0,Zr)=>{Zr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Zr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Zr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var na=M((D0,Bt)=>{var G=global.process,xt=function(t){return t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function"};xt(G)?(Qi=require("assert"),Ut=Ji(),ea=/^win/i.test(G.platform),ir=require("events"),typeof ir!="function"&&(ir=ir.EventEmitter),G.__signal_exit_emitter__?re=G.__signal_exit_emitter__:(re=G.__signal_exit_emitter__=new ir,re.count=0,re.emitted={}),re.infinite||(re.setMaxListeners(1/0),re.infinite=!0),Bt.exports=function(t,e){if(!xt(global.process))return function(){};Qi.equal(typeof t,"function","a callback must be provided for exit handler"),Mt===!1&&ao();var r="exit";e&&e.alwaysLast&&(r="afterexit");var n=function(){re.removeListener(r,t),re.listeners("exit").length===0&&re.listeners("afterexit").length===0&&Jr()};return re.on(r,t),n},Jr=function(){!Mt||!xt(global.process)||(Mt=!1,Ut.forEach(function(e){try{G.removeListener(e,Qr[e])}catch{}}),G.emit=en,G.reallyExit=co,re.count-=1)},Bt.exports.unload=Jr,Et=function(e,r,n){re.emitted[e]||(re.emitted[e]=!0,re.emit(e,r,n))},Qr={},Ut.forEach(function(t){Qr[t]=function(){if(xt(global.process)){var r=G.listeners(t);r.length===re.count&&(Jr(),Et("exit",null,t),Et("afterexit",null,t),ea&&t==="SIGHUP"&&(t="SIGINT"),G.kill(G.pid,t))}}}),Bt.exports.signals=function(){return Ut},Mt=!1,ao=function(){Mt||!xt(global.process)||(Mt=!0,re.count+=1,Ut=Ut.filter(function(e){try{return G.on(e,Qr[e]),!0}catch{return!1}}),G.emit=ra,G.reallyExit=ta)},Bt.exports.load=ao,co=G.reallyExit,ta=function(e){xt(global.process)&&(G.exitCode=e||0,Et("exit",G.exitCode,null),Et("afterexit",G.exitCode,null),co.call(G,G.exitCode))},en=G.emit,ra=function(e,r){if(e==="exit"&&xt(global.process)){r!==void 0&&(G.exitCode=r);var n=en.apply(this,arguments);return Et("exit",G.exitCode,null),Et("afterexit",G.exitCode,null),n}else return en.apply(this,arguments)}):Bt.exports=function(){return function(){}};var Qi,Ut,ea,ir,re,Jr,Et,Qr,Mt,ao,co,ta,en,ra});var ha=M((B0,da)=>{"use strict";var{PassThrough:nd}=require("stream");da.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",o=!1;e?o=!(r||n):r=r||"utf8",n&&(r=null);let s=new nd({objectMode:o});r&&s.setEncoding(r);let i=0,a=[];return s.on("data",c=>{a.push(c),o?i=a.length:i+=c.length}),s.getBufferedValue=()=>e?a:n?Buffer.concat(a,i):a.join(""),s.getBufferedLength=()=>i,s}});var pa=M((F0,ar)=>{"use strict";var{constants:od}=require("buffer"),sd=require("stream"),{promisify:id}=require("util"),ad=ha(),cd=id(sd.pipeline),tn=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function lo(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n=ad(e);return await new Promise((o,s)=>{let i=a=>{a&&n.getBufferedLength()<=od.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),s(a)};(async()=>{try{await cd(t,n),o()}catch(a){i(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&i(new tn)})}),n.getBufferedValue()}ar.exports=lo;ar.exports.buffer=(t,e)=>lo(t,{...e,encoding:"buffer"});ar.exports.array=(t,e)=>lo(t,{...e,array:!0});ar.exports.MaxBufferError=tn});var ga=M((V0,ma)=>{"use strict";var{PassThrough:ld}=require("stream");ma.exports=function(){var t=[],e=new ld({objectMode:!0});return e.setMaxListeners(0),e.add=r,e.isEmpty=n,e.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(r),e;function r(s){return Array.isArray(s)?(s.forEach(r),this):(t.push(s),s.once("end",o.bind(null,s)),s.once("error",e.emit.bind(e,"error")),s.pipe(e,{end:!1}),this)}function n(){return t.length==0}function o(s){t=t.filter(function(i){return i!==s}),!t.length&&e.readable&&e.end()}}});var Ha=M((wg,Va)=>{var be=require("fs"),Ed=require("util"),Ft=require("path"),Io=require("events"),Ua=require("zlib"),Fa=require("stream"),g={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSIGFIRST:80,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,MAXFILECOMMENT:65535,ENDL64HDR:20,ENDL64SIG:117853008,ENDL64SIGFIRST:80,ENDL64OFS:8,END64HDR:56,END64SIG:101075792,END64SIGFIRST:80,END64SUB:24,END64TOT:32,END64SIZ:40,END64OFF:48,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FLG_ENTRY_ENC:1,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535},qe=function(t){let e,r,n,o,s,i,c=this,l=t.storeEntries!==!1?{}:null,d=t.file,f=t.nameEncoding?new TextDecoder(t.nameEncoding):null;m();function m(){t.fd?(e=t.fd,v()):be.open(d,"r",(h,y)=>{if(h)return c.emit("error",h);e=y,v()})}function v(){be.fstat(e,(h,y)=>{if(h)return c.emit("error",h);r=y.size,n=t.chunkSize||Math.round(r/1e3),n=Math.max(Math.min(n,Math.min(128*1024,r)),Math.min(1024,r)),x()})}function T(h,y){if(h||!y)return c.emit("error",h||new Error("Archive read error"));let p=o.lastPos,w=p-o.win.position,O=o.win.buffer,L=o.minPos;for(;--p>=L&&--w>=0;)if(O.length-w>=4&&O[w]===o.firstByte&&O.readUInt32LE(w)===o.sig){o.lastBufferPosition=w,o.lastBytesRead=y,o.complete();return}if(p===L)return c.emit("error",new Error("Bad archive"));if(o.lastPos=p+1,o.chunkSize*=2,p<=L)return c.emit("error",new Error("Bad archive"));let H=Math.min(o.chunkSize,p-L);o.win.expandLeft(H,T)}function x(){let h=Math.min(g.ENDHDR+g.MAXFILECOMMENT,r);o={win:new nn(e),totalReadLength:h,minPos:r-h,lastPos:r,chunkSize:Math.min(1024,n),firstByte:g.ENDSIGFIRST,sig:g.ENDSIG,complete:b},o.win.read(r-o.chunkSize,o.chunkSize,T)}function b(){let h=o.win.buffer,y=o.lastBufferPosition;try{s=new yo,s.read(h.slice(y,y+g.ENDHDR)),s.headerOffset=o.win.position+y,s.commentLength?c.comment=h.slice(y+g.ENDHDR,y+g.ENDHDR+s.commentLength).toString():c.comment=null,c.entriesCount=s.volumeEntries,c.centralDirectory=s,s.volumeEntries===g.EF_ZIP64_OR_16&&s.totalEntries===g.EF_ZIP64_OR_16||s.size===g.EF_ZIP64_OR_32||s.offset===g.EF_ZIP64_OR_32?C():(o={},P())}catch(p){c.emit("error",p)}}function C(){let h=g.ENDL64HDR;o.lastBufferPosition>h?(o.lastBufferPosition-=h,S()):(o={win:o.win,totalReadLength:h,minPos:o.win.position-h,lastPos:o.win.position,chunkSize:o.chunkSize,firstByte:g.ENDL64SIGFIRST,sig:g.ENDL64SIG,complete:S},o.win.read(o.lastPos-o.chunkSize,o.chunkSize,T))}function S(){let h=o.win.buffer,y=new wo;y.read(h.slice(o.lastBufferPosition,o.lastBufferPosition+g.ENDL64HDR));let p=r-y.headerOffset;o={win:o.win,totalReadLength:p,minPos:y.headerOffset,lastPos:o.lastPos,chunkSize:o.chunkSize,firstByte:g.END64SIGFIRST,sig:g.END64SIG,complete:I},o.win.read(r-o.chunkSize,o.chunkSize,T)}function I(){let h=o.win.buffer,y=new xo;y.read(h.slice(o.lastBufferPosition,o.lastBufferPosition+g.END64HDR)),c.centralDirectory.volumeEntries=y.volumeEntries,c.centralDirectory.totalEntries=y.totalEntries,c.centralDirectory.size=y.size,c.centralDirectory.offset=y.offset,c.entriesCount=y.volumeEntries,o={},P()}function P(){o={win:new nn(e),pos:s.offset,chunkSize:n,entriesLeft:s.volumeEntries},o.win.read(o.pos,Math.min(n,r-o.pos),R)}function R(h,y){if(h||!y)return c.emit("error",h||new Error("Entries read error"));let p=o.pos-o.win.position,w=o.entry,O=o.win.buffer,L=O.length;try{for(;o.entriesLeft>0;){w||(w=new Eo,w.readHeader(O,p),w.headerOffset=o.win.position+p,o.entry=w,o.pos+=g.CENHDR,p+=g.CENHDR);let H=w.fnameLen+w.extraLen+w.comLen,K=H+(o.entriesLeft>1?g.CENHDR:0);if(L-p<K){o.win.moveRight(n,R,p),o.move=!0;return}w.read(O,p,f),t.skipEntryNameValidation||w.validateName(),l&&(l[w.name]=w),c.emit("entry",w),o.entry=w=null,o.entriesLeft--,o.pos+=H,p+=H}c.emit("ready")}catch(H){c.emit("error",H)}}function z(){if(!l)throw new Error("storeEntries disabled")}Object.defineProperty(this,"ready",{get(){return!1}}),this.entry=function(h){return z(),l[h]},this.entries=function(){return z(),l},this.stream=function(h,y){return this.openEntry(h,(p,w)=>{if(p)return y(p);let O=ee(w),L=new So(e,O,w.compressedSize);if(w.method!==g.STORED)if(w.method===g.DEFLATED)L=L.pipe(Ua.createInflateRaw());else return y(new Error("Unknown compression method: "+w.method));W(w)&&(L=L.pipe(new vo(L,w.crc,w.size))),y(null,L)},!1)},this.entryDataSync=function(h){let y=null;if(this.openEntry(h,(w,O)=>{y=w,h=O},!0),y)throw y;let p=Buffer.alloc(h.compressedSize);if(new Ke(e,p,0,h.compressedSize,ee(h),w=>{y=w}).read(!0),y)throw y;if(h.method!==g.STORED)if(h.method===g.DEFLATED||h.method===g.ENHANCED_DEFLATED)p=Ua.inflateRawSync(p);else throw new Error("Unknown compression method: "+h.method);if(p.length!==h.size)throw new Error("Invalid size");return W(h)&&new on(h.crc,h.size).data(p),p},this.openEntry=function(h,y,p){if(typeof h=="string"&&(z(),h=l[h],!h))return y(new Error("Entry not found"));if(!h.isFile)return y(new Error("Entry is not file"));if(!e)return y(new Error("Archive closed"));let w=Buffer.alloc(g.LOCHDR);new Ke(e,w,0,w.length,h.offset,O=>{if(O)return y(O);let L;try{h.readDataHeader(w),h.encrypted&&(L=new Error("Entry encrypted"))}catch(H){L=H}y(L,h)}).read(p)};function ee(h){return h.offset+g.LOCHDR+h.fnameLen+h.extraLen}function W(h){return(h.flags&8)!==8}function Y(h,y,p){c.stream(h,(w,O)=>{if(w)p(w);else{let L,H;O.on("error",K=>{H=K,L&&(O.unpipe(L),L.close(()=>{p(K)}))}),be.open(y,"w",(K,ue)=>{if(K)return p(K);if(H){be.close(e,()=>{p(H)});return}L=be.createWriteStream(y,{fd:ue}),L.on("finish",()=>{c.emit("extract",h,y),H||p()}),O.pipe(L)})}})}function pe(h,y,p){if(!y.length)return p();let w=y.shift();w=Ft.join(h,Ft.join(...w)),be.mkdir(w,{recursive:!0},O=>{if(O&&O.code!=="EEXIST")return p(O);pe(h,y,p)})}function Z(h,y,p,w,O){if(!p.length)return w(null,O);let L=p.shift(),H=Ft.join(h,L.name.replace(y,""));Y(L,H,K=>{if(K)return w(K,O);Z(h,y,p,w,O+1)})}this.extract=function(h,y,p){let w=h||"";if(typeof h=="string"&&(h=this.entry(h),h?w=h.name:w.length&&w[w.length-1]!=="/"&&(w+="/")),!h||h.isDirectory){let O=[],L=[],H={};for(let K in l)if(Object.prototype.hasOwnProperty.call(l,K)&&K.lastIndexOf(w,0)===0){let ue=K.replace(w,""),Me=l[K];if(Me.isFile&&(O.push(Me),ue=Ft.dirname(ue)),ue&&!H[ue]&&ue!=="."){H[ue]=!0;let u=ue.split("/").filter(E=>E);for(u.length&&L.push(u);u.length>1;){u=u.slice(0,u.length-1);let E=u.join("/");if(H[E]||E===".")break;H[E]=!0,L.push(u)}}}L.sort((K,ue)=>K.length-ue.length),L.length?pe(y,L,K=>{K?p(K):Z(y,w,O,p,0)}):Z(y,w,O,p,0)}else be.stat(y,(O,L)=>{L&&L.isDirectory()?Y(h,Ft.join(y,Ft.basename(h.name)),p):Y(h,y,p)})},this.close=function(h){i||!e?(i=!0,h&&h()):(i=!0,be.close(e,y=>{e=null,h&&h(y)}))};let j=Io.EventEmitter.prototype.emit;this.emit=function(...h){if(!i)return j.call(this,...h)}};qe.setFs=function(t){be=t};qe.debugLog=(...t)=>{qe.debug&&console.log(...t)};Ed.inherits(qe,Io.EventEmitter);var je=Symbol("zip");qe.async=class extends Io.EventEmitter{constructor(e){super();let r=new qe(e);r.on("entry",n=>this.emit("entry",n)),r.on("extract",(n,o)=>this.emit("extract",n,o)),this[je]=new Promise((n,o)=>{r.on("ready",()=>{r.removeListener("error",o),n(r)}),r.on("error",o)})}get entriesCount(){return this[je].then(e=>e.entriesCount)}get comment(){return this[je].then(e=>e.comment)}async entry(e){return(await this[je]).entry(e)}async entries(){return(await this[je]).entries()}async stream(e){let r=await this[je];return new Promise((n,o)=>{r.stream(e,(s,i)=>{s?o(s):n(i)})})}async entryData(e){let r=await this.stream(e);return new Promise((n,o)=>{let s=[];r.on("data",i=>s.push(i)),r.on("end",()=>{n(Buffer.concat(s))}),r.on("error",i=>{r.removeAllListeners("end"),o(i)})})}async extract(e,r){let n=await this[je];return new Promise((o,s)=>{n.extract(e,r,(i,a)=>{i?s(i):o(a)})})}async close(){let e=await this[je];return new Promise((r,n)=>{e.close(o=>{o?n(o):r()})})}};var yo=class{read(e){if(e.length!==g.ENDHDR||e.readUInt32LE(0)!==g.ENDSIG)throw new Error("Invalid central directory");this.volumeEntries=e.readUInt16LE(g.ENDSUB),this.totalEntries=e.readUInt16LE(g.ENDTOT),this.size=e.readUInt32LE(g.ENDSIZ),this.offset=e.readUInt32LE(g.ENDOFF),this.commentLength=e.readUInt16LE(g.ENDCOM)}},wo=class{read(e){if(e.length!==g.ENDL64HDR||e.readUInt32LE(0)!==g.ENDL64SIG)throw new Error("Invalid zip64 central directory locator");this.headerOffset=Xe(e,g.ENDSUB)}},xo=class{read(e){if(e.length!==g.END64HDR||e.readUInt32LE(0)!==g.END64SIG)throw new Error("Invalid central directory");this.volumeEntries=Xe(e,g.END64SUB),this.totalEntries=Xe(e,g.END64TOT),this.size=Xe(e,g.END64SIZ),this.offset=Xe(e,g.END64OFF)}},Eo=class{readHeader(e,r){if(e.length<r+g.CENHDR||e.readUInt32LE(r)!==g.CENSIG)throw new Error("Invalid entry header");this.verMade=e.readUInt16LE(r+g.CENVEM),this.version=e.readUInt16LE(r+g.CENVER),this.flags=e.readUInt16LE(r+g.CENFLG),this.method=e.readUInt16LE(r+g.CENHOW);let n=e.readUInt16LE(r+g.CENTIM),o=e.readUInt16LE(r+g.CENTIM+2);this.time=Ma(n,o),this.crc=e.readUInt32LE(r+g.CENCRC),this.compressedSize=e.readUInt32LE(r+g.CENSIZ),this.size=e.readUInt32LE(r+g.CENLEN),this.fnameLen=e.readUInt16LE(r+g.CENNAM),this.extraLen=e.readUInt16LE(r+g.CENEXT),this.comLen=e.readUInt16LE(r+g.CENCOM),this.diskStart=e.readUInt16LE(r+g.CENDSK),this.inattr=e.readUInt16LE(r+g.CENATT),this.attr=e.readUInt32LE(r+g.CENATX),this.offset=e.readUInt32LE(r+g.CENOFF)}readDataHeader(e){if(e.readUInt32LE(0)!==g.LOCSIG)throw new Error("Invalid local header");this.version=e.readUInt16LE(g.LOCVER),this.flags=e.readUInt16LE(g.LOCFLG),this.method=e.readUInt16LE(g.LOCHOW);let r=e.readUInt16LE(g.LOCTIM),n=e.readUInt16LE(g.LOCTIM+2);this.time=Ma(r,n),this.crc=e.readUInt32LE(g.LOCCRC)||this.crc;let o=e.readUInt32LE(g.LOCSIZ);o&&o!==g.EF_ZIP64_OR_32&&(this.compressedSize=o);let s=e.readUInt32LE(g.LOCLEN);s&&s!==g.EF_ZIP64_OR_32&&(this.size=s),this.fnameLen=e.readUInt16LE(g.LOCNAM),this.extraLen=e.readUInt16LE(g.LOCEXT)}read(e,r,n){let o=e.slice(r,r+=this.fnameLen);this.name=n?n.decode(new Uint8Array(o)):o.toString("utf8");let s=e[r-1];this.isDirectory=s===47||s===92,this.extraLen&&(this.readExtra(e,r),r+=this.extraLen),this.comment=this.comLen?e.slice(r,r+this.comLen).toString():null}validateName(){if(/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name))throw new Error("Malicious entry: "+this.name)}readExtra(e,r){let n,o,s=r+this.extraLen;for(;r<s;)n=e.readUInt16LE(r),r+=2,o=e.readUInt16LE(r),r+=2,g.ID_ZIP64===n&&this.parseZip64Extra(e,r,o),r+=o}parseZip64Extra(e,r,n){n>=8&&this.size===g.EF_ZIP64_OR_32&&(this.size=Xe(e,r),r+=8,n-=8),n>=8&&this.compressedSize===g.EF_ZIP64_OR_32&&(this.compressedSize=Xe(e,r),r+=8,n-=8),n>=8&&this.offset===g.EF_ZIP64_OR_32&&(this.offset=Xe(e,r),r+=8,n-=8),n>=4&&this.diskStart===g.EF_ZIP64_OR_16&&(this.diskStart=e.readUInt32LE(r))}get encrypted(){return(this.flags&g.FLG_ENTRY_ENC)===g.FLG_ENTRY_ENC}get isFile(){return!this.isDirectory}},Ke=class{constructor(e,r,n,o,s,i){this.fd=e,this.buffer=r,this.offset=n,this.length=o,this.position=s,this.callback=i,this.bytesRead=0,this.waiting=!1}read(e){qe.debugLog("read",this.position,this.bytesRead,this.length,this.offset),this.waiting=!0;let r;if(e){let n=0;try{n=be.readSync(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead)}catch(o){r=o}this.readCallback(e,r,r?n:null)}else be.read(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead,this.readCallback.bind(this,e))}readCallback(e,r,n){if(typeof n=="number"&&(this.bytesRead+=n),r||!n||this.bytesRead===this.length)return this.waiting=!1,this.callback(r,this.bytesRead);this.read(e)}},nn=class{constructor(e){this.position=0,this.buffer=Buffer.alloc(0),this.fd=e,this.fsOp=null}checkOp(){if(this.fsOp&&this.fsOp.waiting)throw new Error("Operation in progress")}read(e,r,n){this.checkOp(),this.buffer.length<r&&(this.buffer=Buffer.alloc(r)),this.position=e,this.fsOp=new Ke(this.fd,this.buffer,0,r,this.position,n).read()}expandLeft(e,r){this.checkOp(),this.buffer=Buffer.concat([Buffer.alloc(e),this.buffer]),this.position-=e,this.position<0&&(this.position=0),this.fsOp=new Ke(this.fd,this.buffer,0,e,this.position,r).read()}expandRight(e,r){this.checkOp();let n=this.buffer.length;this.buffer=Buffer.concat([this.buffer,Buffer.alloc(e)]),this.fsOp=new Ke(this.fd,this.buffer,n,e,this.position+n,r).read()}moveRight(e,r,n){this.checkOp(),n?this.buffer.copy(this.buffer,0,n):n=0,this.position+=n,this.fsOp=new Ke(this.fd,this.buffer,this.buffer.length-n,n,this.position+this.buffer.length-n,r).read()}},So=class extends Fa.Readable{constructor(e,r,n){super(),this.fd=e,this.offset=r,this.length=n,this.pos=0,this.readCallback=this.readCallback.bind(this)}_read(e){let r=Buffer.alloc(Math.min(e,this.length-this.pos));r.length?be.read(this.fd,r,0,r.length,this.offset+this.pos,this.readCallback):this.push(null)}readCallback(e,r,n){this.pos+=r,e?(this.emit("error",e),this.push(null)):r?(r!==n.length&&(n=n.slice(0,r)),this.push(n)):this.push(null)}},vo=class extends Fa.Transform{constructor(e,r,n){super(),this.verify=new on(r,n),e.on("error",o=>{this.emit("error",o)})}_transform(e,r,n){let o;try{this.verify.data(e)}catch(s){o=s}n(o,e)}},on=class t{constructor(e,r){this.crc=e,this.size=r,this.state={crc:-1,size:0}}data(e){let r=t.getCrcTable(),n=this.state.crc,o=0,s=e.length;for(;--s>=0;)n=r[(n^e[o++])&255]^n>>>8;if(this.state.crc=n,this.state.size+=e.length,this.state.size>=this.size){let i=Buffer.alloc(4);if(i.writeInt32LE(~this.state.crc&4294967295,0),n=i.readUInt32LE(0),n!==this.crc)throw new Error("Invalid CRC");if(this.state.size!==this.size)throw new Error("Invalid size")}}static getCrcTable(){let e=t.crcTable;if(!e){t.crcTable=e=[];let r=Buffer.alloc(4);for(let n=0;n<256;n++){let o=n;for(let s=8;--s>=0;)(o&1)!==0?o=3988292384^o>>>1:o=o>>>1;o<0&&(r.writeInt32LE(o,0),o=r.readUInt32LE(0)),e[n]=o}}return e}};function Ma(t,e){let r=Ba(t,16),n=Ba(e,16),o={h:parseInt(r.slice(0,5).join(""),2),m:parseInt(r.slice(5,11).join(""),2),s:parseInt(r.slice(11,16).join(""),2)*2,Y:parseInt(n.slice(0,7).join(""),2)+1980,M:parseInt(n.slice(7,11).join(""),2),D:parseInt(n.slice(11,16).join(""),2)},s=[o.Y,o.M,o.D].join("-")+" "+[o.h,o.m,o.s].join(":")+" GMT+0";return new Date(s).getTime()}function Ba(t,e){let r=(t>>>0).toString(2);for(;r.length<e;)r="0"+r;return r.split("")}function Xe(t,e){return t.readUInt32LE(e+4)*4294967296+t.readUInt32LE(e)}Va.exports=qe});var Qc=M((S1,Jc)=>{Jc.exports={Other:0,CR:1,LF:2,Control:4,Extend:8,ZWJ:16,Regional_Indicator:32,Prepend:64,SpacingMark:128,L:256,V:512,T:1024,LV:2048,LVT:4096,Extended_Pictographic:8192,InCB_Linker:16384,InCB_Consonant:32768,InCB_Extend:65536}});var el=M((v1,uh)=>{uh.exports={data:"ABAOAAAAAADQjQAAAd4HIfjtnG2oFUUYxx/1nHu29OolvKRSZIIQghSSEFJwwj4YWdzoFcoQyriBHwz8YHDBiSKDLG9YKSEiUX4IFQ0FCaRLoFmUb9mLBqJ+EDOIsAgpjf7b7nCnOTO7M7szu8frPPBjZufleZ6ZeWZm73pwYALRk2ApGAQMvC6UlU2HwUbwDthk0P5DsC2jfifYC0bAQXAE/AhOgXNCu1/A7+ASoAZRD5gMekE/mAFmge1gN9jbSPrOSdPPkM4DX4AvwVFwApwBZ8EFcBH8Bf4GE5pEUXP0uQ/5ac2k/UyktzWT/ncgPYj0rmZip91M6hc1R/U/hPzj4BnwPBgECwT7cb8VKFsZJflVyK9O9cW8gvwb6fM6pO+l+c1It4Lt4Hah/R7k94H94BuhPGZDNMqWlK1gf4rYNovthu1c8x3G8xOYmhKXnUH6c5pf0/h/+8Uo/1Wagz+bev1X0rpGD9GkniS/FjRTvVNRdiO4BcwGc8H8tN3dabqwp1Pv/Sh7WFHOGU4pOz9vws/1qa+PCuXxGHZmjDtQAdL6n1DEgAs7NwnrvCQj5gKBQCAQCAQCgUAgEOgGnsPfrlOE7zlvG3y/WI4+K4W/eYciotVgCGWv8u85SNeDjVHyPXAj8tORbknrtyLdAT5Jnz9Fehnp5zl/S3+F+kPQeRgcAUfBMfAtOB6FulAX6kJdqHNdtwPsAQei+u+sQCAwdjnk+d9TNk0Y/Xd1mUFFmfh+vKHhxycbRnoTaDLR0t582mg3oGg7LJWN4JmmoD1YNSUp24b0NJjWR3QnGAT3TcT7Pzh7HdGt1xNF4xKeFvIiu9D25ER1nczqVMeMSUS7kX8M6bvgMKBeMx2BQCAQGJv8gXuhEd8nLaJ/cB+2cCdPaiW/E2ojvyi9oyOkN6B8Df5mmZbW34x0QLjDZ7eS707i/Rr/ZmRua/R3ZPORv6eV1C2MU/R/MP1O9gCeH2mN9n0K+Wdb+rt7EHUrhPpVreS7GH9mQt1ryL+VoWt9Rl3MEuhdJr2vvI8+H4CPwQuo25XqeLHAe81ewf4I8gckf77G80up3uM5voqcRNuX0e800vMW/XwyBH7rEl9EZiC2n6jQ3masyxzY/EHxnXjeVfptIP797rAAkxjO4KNGZ/trjTJz/33O33rTpXPpVBf+1u4cfLqg8Wuxo9+Dnk/1XzQc/6W03RWhrD+dSzI4x+K/eS914Xnnisvp2MY7OrP2ldAToe86MFnQ0X+VnqU2xOfnrCh5f3Oha0GUpPciXQQGrqY5hK9LBX+nK/aebaweS8+AZSXnIa9/v4MzTh7b2jH6O/rlJdfiZBeMoUFmjBfy4wz7mBCkPgnz7y6Oq4x/l+sWXeO4lKrsdJvUvYZF111MdfmxLm0NpmI7591853Tj+VJVDGaNoZ3TRtahautDRL/qkm6KlW6Wa2EeXI3N5Ry0SX+e26xJ27K9K5iijNJyjvwsnllZ4mKeZbuy72I5F5VvNr6o+hcVbredoVc3/y7vN/keke0ywS6T6tqOfOE2mQKS8rJ/3A8mpHWfZVl7qq0oV0lbQ9m9bOszt+lb5LWsU8TxN8j9+LnOPnL3Pc73tz4X31fy7mVdDObZcnHfdev3VNV86ebRtF1VUsSui7U0OQ/rEvE8Jsp+j1H5Lbfnecrpa+Nf1XEi2mZUz/qIe4b7oJtDXi8/m85bN69HJOXr2i9Z+0PVVuW36n5x6V8Z/Yw640s+t5nQlpGfOPAdX2XPI5d+iP6wDJ8YFdvfRc/bOkR31jKpXHx2eb7J91kd7yaMOseb9w6Vp7PO9YyFUWeMM6pvfC7mhBXoI78z1SnyfDPLvqoyRp1nmNieZeAqRlUxV+Ssz3vvdSWm/paJ87ruuipsyTGmssfI3X4zWSMVTFNOlD1PNjbK+OeKsmI6b/J4mdTWp+TZ8jkfRXXEwgz0lPXZx9z7PruqOhdNYlqMZR2qeHe1N33OQdYYVeWyiG3l/rKeKteS2/UhXDdP885CMaWcPqbzaBJTOt1ViqnPjOqJmSzxcbfWtQ6iMNLPv6tx5om8fxh1niUu/GA5mMalq3lQnQ+25PmtspnlDxdRrwupaw/7WCvb9VLpynrWlbkURp17zrcPjNT7rSopsr9cnX95+861PRN/bM8Y1/YZmd0//Fmnp0oxvRvk5yJ2TNqwArpdiY+Y4Kk8b1nzWGSOGZnFF29nK1ynHAuiraK6XUudPlRh2+ZM1d3xJnp9S9H3Op2OKu4Xn7qrfn9gVO+Za3oe6vrq7vWq3z24Py6Fkf59Qjd2VzZ0dnXC62x89iGi7xwuumebc8ZUZFum81BlvKoka+19+cLIPGZU7fizT3GlP29+xfEwKa864+oUk3OCkXp9maJtFeLaJqNisctTG9HFRh13XZaoxmd6T7sWRuZz5Ssus3zgIseI2F7WVbWYzFsVsWZzT5veHWVE1qWaj7w4cyWma6TyMW8cTJP37bvchqQ6Gx+YAlkfL/exPqIt0b5r4brz5lPVzqfo9GfZLRrTNmMx1cfIz5z5Pkd9ntfyvilCnv6y/tr2q+ouM/WhbPyX2UNFdPqSqs6pLLuucWXLZAw24/UlOt9dzqELn1z5Zrtv8uz6EF82ZlaEK2FU7vtpXcIsydJRhbCa+e8/D60bUcbXTMMzfRK24nKssvgYr+x71lh8iO/1tBl/LPGlIseAT6q2J8m/"}});var tl=M((I1,fh)=>{fh.exports={data:"AAACAAAAAACAOAAAAbYBSf7t2S1IBEEYBuDVDZ7FYrQMNsFiu3hgEYOI0SCXRIUrB8JhEZtgs5gEg1GMFk02m82oGI02m+9xezCOczv/uwv3fvAwc/PzfXOzcdqzWdaBDdiGPdiHdjE+DS3RNDuCfsn8idQ/g3OH3BdwKf0e96/gumTfYcncLdzBPTzAo+RZ+f0Cr/AG7/AJX4738x1wtz9FO5PX/50n6UXMNdfg/0lERERERERERERERETpdedHBvDRql4nq0cXtW9af98qdRby0Vvp8K4W0V+C5Xw0t4J2bfjeBp3cnEu1brnnCTYNa7eKdz91XP7WO9Lb4GqRb7cY6xbtAdqeVOsY/QGcevw/tb6OT85YhvfKYEx9CMuxKsKnrs+eJtVInVvHJ0eVYVvTZk2siFVLOCjb61PTZX3MdVWEyP7fjzpmMxdzTyq2Ebue6x61nXRGnzndWpf1an7dXmGYE4Y1ptqqKsK1nu26Ju0ty+maV2Rpvk+qnDZjKUIobUiesdAQE/jmCTmHmsskpFZsVYbtmXRcaoSGUPomunW2derQhDPFjtT1Q/eb8vnm990fq35oHVt11bU9m89c7DNI8Qs="}});var rl=M((T1,dh)=>{dh.exports={data:"AAgOAAAAAABQfgAAAWMGnPntmm2IVUUYx+dyb2ezXXtBiSCLsKDIiKIIoYINciGwQHrRL2Ufii0qMsv7QVBuQkXhkmW5gksQRhRFSBslbkllHyy3L2XllkXrB3uhF0tQ0Kj+xzN3d3buzJx5PeesOw/8mDNvz/PMnOc8s/fs6asTcgu4A9wF+mjdV9kEa8FqsE5j/DPgeUX/JvASeBW8Bd4GO8CHYDcz7nPwFRgD4+An8Cf4AxwBx0G9QcjrYBt4p5HN/YDqGEF9F7gW3AC6wU1gCVgK5oDlYA8YBXvBGOgHD4FzwSo6fg24EDwBxsEB8Cu1N4ByI1gA/gbfo+0wyuO0vgW8DK5i+tN5tVOyMmUWrs9k6nNxPY/WL0B5Mb2+HOU14HrwY2Ny/CLUbwa3gzsZPT7ZGECnDvdiPQ+ARyhpWxPlWnr9JLfeAdS/43S8qNiTIdq3FeUb9HolOEj7h9H2LtgJPgHr0TZKx31Jy30C/T+g7aDCbpPiuj/fStrTNfQGioWIHr9z+z8iiAEfdg4zdo7Gex6JRCKRSCQSiUQikYrzL367HmLq8zV+yyYJIbOTzva5aJtH2y9CuYBebwdX4PoYyv107ELUe5PsPWBavzHJ3tMtFuhluTWnPxKJRCKRSCQy/TjQCKt/XX3y/+o6HPJs35XNszPO0WQf+FnQfsnpU+vLUN8MdgNyRtZ2Ncp7wBDYDn4D47MIOes0QpaADeDUWsYe5pql3k3IZd3iPp4H6bjnUI6Cf8B1PYQ0wWCPno5IJBKJnJx83eN2fi7NeYd0jKsvr+A7p3749KzkXd2Ap+9R7qfrflhz/ava45m2I7Rcw+lI3/WtAO+Bx5PsG6+nk+xbv7Q/fWe4gc7ZRPu3oNzK6Hktmfy2r036vc82On44yb4ZHKFzPkL5aZJ9f9hH7Y8y+nbheq9irWOpf0z/L8nUWPmL6TuK6/8Uuhpd6r3sRv8cbszZXZm981HOB5fS/itzdIlYyMzpTa85HYtRv422LTPQ/yjd+/SZudvCr1DcV5Iv6W+HFRXaB988Rte2ugJrHKTPW4vx5akK+MWzvoI++Sb9zvKFriy/m8wbwpxXQL/gDNs5Tb+zTPfiza6sHEa5A3w8jWLgM/j6BePvoOBcM33+v6Hj9zvuQ978lR5ihl/bedM0DvN4vwI+NOvy7/SbCkze51WVRfXaCaJEmdlSm+H4lKLsVE3Kvoe2950tZdcnu5T1rISQKuaHovZNZw26/aKxvn0tS6oUG1WWmbAPvtbGjzPU2WvgV4uoEc7PkQ77MhHoYu1K7YvOVhv7uuJ7/QpdLcKtX2ZPthc1A/tEcK/zbAW+/0rbnqRVAlPuk0gC5b5cv1Q+BbIp8kGnX2VjQmT7bLm/Hfp1RfZ3kAdpGZI3h2iMnZCC47ftj+351WJ06PTLxk6I7OxxWH8rd4RCRHHuKC1DbOaIdJyQAn4vuPpqS8d5HVJUfy+p2lXjihIbuya/L2wowkae3TJEZFfmjywnBshRSl9s9Je1v7z9kL7bPE9Fi+xMlf09Z3Ne2KxNFu8qf2x02ojMD9McrpOLivTX9j6F9l/HfmgbotKnfp9nJCHqffFho0hcxWRNhHTarUI8h94PGx28Pp2xrrZ8SehcFToPhvabvbZ5JkXx4etZd4lZfn0+pIz8oMoRunpsbPgUUZ4NaYu1qcr9vC+2MWsa8yHOPlOxfU7L9Fnkg0t+0dGdZ9O38PGr6nPxwzRWXUX0/JmSN09kU+WPyD8f4jM+ioo7lW1femzuv0iXqi5r8yGq/fBts+gca/M8+orLvOc0RJ7P88c0J/m2L/OFbzfVa5LrXc4WH2NsbJrulcsafa+T99lFVwgpwr7JMy47U3T0FiFF56uQuss4j3gfbOb68sUlB6vOjaLPtrbdkLp9nZmqffcpqnurk4NU+oq8rzIx2Xddv8tel+peydar+htBpIufH0J4O2XFCCu2z0GZayjyDMzLS6Z+yGK1Sjmk7RNbtq91zrXQfumeOb58MdGTtxdlngmyc09nTlmxqfMcmvij67OJXV3R3dOQsZznh6qfkOL80M3BuvtW1B7yY2R+FLG/MsnzVXd+aF9VuUk1xzWudPwy1edzz1x8t9UfyndbHTY2yxTdHOCa92zj3CR+Te6fjzX5Ftf9M/E1VC4yzVehROa77/h09cmXb6Zxm2c3pPjSH9bn/wE="}});var hl=M((A1,dl)=>{var Fo=0,il=-3;function yr(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function hh(t,e){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new yr,this.dtree=new yr}var al=new yr,cl=new yr,Vo=new Uint8Array(30),Ho=new Uint16Array(30),ll=new Uint8Array(30),ul=new Uint16Array(30),ph=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nl=new yr,Le=new Uint8Array(320);function fl(t,e,r,n){var o,s;for(o=0;o<r;++o)t[o]=0;for(o=0;o<30-r;++o)t[o+r]=o/r|0;for(s=n,o=0;o<30;++o)e[o]=s,s+=1<<t[o]}function mh(t,e){var r;for(r=0;r<7;++r)t.table[r]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,r=0;r<24;++r)t.trans[r]=256+r;for(r=0;r<144;++r)t.trans[24+r]=r;for(r=0;r<8;++r)t.trans[168+r]=280+r;for(r=0;r<112;++r)t.trans[176+r]=144+r;for(r=0;r<5;++r)e.table[r]=0;for(e.table[5]=32,r=0;r<32;++r)e.trans[r]=r}var ol=new Uint16Array(16);function Mo(t,e,r,n){var o,s;for(o=0;o<16;++o)t.table[o]=0;for(o=0;o<n;++o)t.table[e[r+o]]++;for(t.table[0]=0,s=0,o=0;o<16;++o)ol[o]=s,s+=t.table[o];for(o=0;o<n;++o)e[r+o]&&(t.trans[ol[e[r+o]]++]=o)}function gh(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=t.tag&1;return t.tag>>>=1,e}function Re(t,e,r){if(!e)return r;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var n=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,n+r}function Bo(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=0,n=0,o=0,s=t.tag;do n=2*n+(s&1),s>>>=1,++o,r+=e.table[o],n-=e.table[o];while(n>=0);return t.tag=s,t.bitcount-=o,e.trans[r+n]}function bh(t,e,r){var n,o,s,i,a,c;for(n=Re(t,5,257),o=Re(t,5,1),s=Re(t,4,4),i=0;i<19;++i)Le[i]=0;for(i=0;i<s;++i){var l=Re(t,3,0);Le[ph[i]]=l}for(Mo(nl,Le,0,19),a=0;a<n+o;){var d=Bo(t,nl);switch(d){case 16:var f=Le[a-1];for(c=Re(t,2,3);c;--c)Le[a++]=f;break;case 17:for(c=Re(t,3,3);c;--c)Le[a++]=0;break;case 18:for(c=Re(t,7,11);c;--c)Le[a++]=0;break;default:Le[a++]=d;break}}Mo(e,Le,0,n),Mo(r,Le,n,o)}function sl(t,e,r){for(;;){var n=Bo(t,e);if(n===256)return Fo;if(n<256)t.dest[t.destLen++]=n;else{var o,s,i,a;for(n-=257,o=Re(t,Vo[n],Ho[n]),s=Bo(t,r),i=t.destLen-Re(t,ll[s],ul[s]),a=i;a<i+o;++a)t.dest[t.destLen++]=t.dest[a]}}}function yh(t){for(var e,r,n;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if(e=t.source[t.sourceIndex+1],e=256*e+t.source[t.sourceIndex],r=t.source[t.sourceIndex+3],r=256*r+t.source[t.sourceIndex+2],e!==(~r&65535))return il;for(t.sourceIndex+=4,n=e;n;--n)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,Fo}function wh(t,e){var r=new hh(t,e),n,o,s;do{switch(n=gh(r),o=Re(r,2,0),o){case 0:s=yh(r);break;case 1:s=sl(r,al,cl);break;case 2:bh(r,r.ltree,r.dtree),s=sl(r,r.ltree,r.dtree);break;default:s=il}if(s!==Fo)throw new Error("Data error")}while(!n);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}mh(al,cl);fl(Vo,Ho,4,3);fl(ll,ul,2,1);Vo[28]=0;Ho[28]=258;dl.exports=wh});var gl=M((C1,ml)=>{var xh=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,pl=(t,e,r)=>{let n=t[e];t[e]=t[r],t[r]=n},Eh=t=>{let e=t.length;for(let r=0;r<e;r+=4)pl(t,r,r+3),pl(t,r+1,r+2)},Sh=t=>{xh&&Eh(t)};ml.exports={swap32LE:Sh}});var xl=M((P1,wl)=>{var bl=hl(),{swap32LE:vh}=gl(),Wo=11,It=5,Ih=Wo-It,Th=65536>>Wo,Ah=1<<Ih,Ch=Ah-1,bn=2,Ph=1<<It,Go=Ph-1,yl=65536>>It,kh=1024>>It,Lh=yl+kh,Rh=Lh,$h=32,_h=Rh+$h,Oh=1<<bn,zo=class{constructor(e){let r=typeof e.readUInt32BE=="function"&&typeof e.slice=="function";if(r||e instanceof Uint8Array){let n;if(r)this.highStart=e.readUInt32LE(0),this.errorValue=e.readUInt32LE(4),n=e.readUInt32LE(8),e=e.slice(12);else{let o=new DataView(e.buffer);this.highStart=o.getUint32(0,!0),this.errorValue=o.getUint32(4,!0),n=o.getUint32(8,!0),e=e.subarray(12)}e=bl(e,new Uint8Array(n)),e=bl(e,new Uint8Array(n)),vh(e),this.data=new Uint32Array(e.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=e)}get(e){let r;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(r=(this.data[e>>It]<<bn)+(e&Go),this.data[r]):e<=65535?(r=(this.data[yl+(e-55296>>It)]<<bn)+(e&Go),this.data[r]):e<this.highStart?(r=this.data[_h-Th+(e>>Wo)],r=this.data[r+(e>>It&Ch)],r=(r<<bn)+(e&Go),this.data[r]):this.data[this.data.length-Oh]}};wl.exports=zo});var El=M((jo,Ko)=>{(function(t,e){typeof jo=="object"&&typeof Ko<"u"?Ko.exports=e():typeof define=="function"&&define.amd?define(e):(function(){var r=t.Base64,n=e();n.noConflict=function(){return t.Base64=r,n},t.Meteor&&(Base64=n),t.Base64=n})()})(typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:jo,function(){"use strict";var t="3.7.7",e=t,r=typeof Buffer=="function",n=typeof TextDecoder=="function"?new TextDecoder:void 0,o=typeof TextEncoder=="function"?new TextEncoder:void 0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=Array.prototype.slice.call(s),a=(function(u){var E={};return u.forEach(function(oe,me){return E[oe]=me}),E})(i),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),d=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(u){return new Uint8Array(Array.prototype.slice.call(u,0))},f=function(u){return u.replace(/=/g,"").replace(/[+\/]/g,function(E){return E=="+"?"-":"_"})},m=function(u){return u.replace(/[^A-Za-z0-9\+\/]/g,"")},v=function(u){for(var E,oe,me,it,$e="",In=u.length%3,Er=0;Er<u.length;){if((oe=u.charCodeAt(Er++))>255||(me=u.charCodeAt(Er++))>255||(it=u.charCodeAt(Er++))>255)throw new TypeError("invalid character found");E=oe<<16|me<<8|it,$e+=i[E>>18&63]+i[E>>12&63]+i[E>>6&63]+i[E&63]}return In?$e.slice(0,In-3)+"===".substring(In):$e},T=typeof btoa=="function"?function(u){return btoa(u)}:r?function(u){return Buffer.from(u,"binary").toString("base64")}:v,x=r?function(u){return Buffer.from(u).toString("base64")}:function(u){for(var E=4096,oe=[],me=0,it=u.length;me<it;me+=E)oe.push(l.apply(null,u.subarray(me,me+E)));return T(oe.join(""))},b=function(u,E){return E===void 0&&(E=!1),E?f(x(u)):x(u)},C=function(u){if(u.length<2){var E=u.charCodeAt(0);return E<128?u:E<2048?l(192|E>>>6)+l(128|E&63):l(224|E>>>12&15)+l(128|E>>>6&63)+l(128|E&63)}else{var E=65536+(u.charCodeAt(0)-55296)*1024+(u.charCodeAt(1)-56320);return l(240|E>>>18&7)+l(128|E>>>12&63)+l(128|E>>>6&63)+l(128|E&63)}},S=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,I=function(u){return u.replace(S,C)},P=r?function(u){return Buffer.from(u,"utf8").toString("base64")}:o?function(u){return x(o.encode(u))}:function(u){return T(I(u))},R=function(u,E){return E===void 0&&(E=!1),E?f(P(u)):P(u)},z=function(u){return R(u,!0)},ee=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,W=function(u){switch(u.length){case 4:var E=(7&u.charCodeAt(0))<<18|(63&u.charCodeAt(1))<<12|(63&u.charCodeAt(2))<<6|63&u.charCodeAt(3),oe=E-65536;return l((oe>>>10)+55296)+l((oe&1023)+56320);case 3:return l((15&u.charCodeAt(0))<<12|(63&u.charCodeAt(1))<<6|63&u.charCodeAt(2));default:return l((31&u.charCodeAt(0))<<6|63&u.charCodeAt(1))}},Y=function(u){return u.replace(ee,W)},pe=function(u){if(u=u.replace(/\s+/g,""),!c.test(u))throw new TypeError("malformed base64.");u+="==".slice(2-(u.length&3));for(var E,oe="",me,it,$e=0;$e<u.length;)E=a[u.charAt($e++)]<<18|a[u.charAt($e++)]<<12|(me=a[u.charAt($e++)])<<6|(it=a[u.charAt($e++)]),oe+=me===64?l(E>>16&255):it===64?l(E>>16&255,E>>8&255):l(E>>16&255,E>>8&255,E&255);return oe},Z=typeof atob=="function"?function(u){return atob(m(u))}:r?function(u){return Buffer.from(u,"base64").toString("binary")}:pe,j=r?function(u){return d(Buffer.from(u,"base64"))}:function(u){return d(Z(u).split("").map(function(E){return E.charCodeAt(0)}))},h=function(u){return j(p(u))},y=r?function(u){return Buffer.from(u,"base64").toString("utf8")}:n?function(u){return n.decode(j(u))}:function(u){return Y(Z(u))},p=function(u){return m(u.replace(/[-_]/g,function(E){return E=="-"?"+":"/"}))},w=function(u){return y(p(u))},O=function(u){if(typeof u!="string")return!1;var E=u.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(E)||!/[^\s0-9a-zA-Z\-_]/.test(E)},L=function(u){return{value:u,enumerable:!1,writable:!0,configurable:!0}},H=function(){var u=function(E,oe){return Object.defineProperty(String.prototype,E,L(oe))};u("fromBase64",function(){return w(this)}),u("toBase64",function(E){return R(this,E)}),u("toBase64URI",function(){return R(this,!0)}),u("toBase64URL",function(){return R(this,!0)}),u("toUint8Array",function(){return h(this)})},K=function(){var u=function(E,oe){return Object.defineProperty(Uint8Array.prototype,E,L(oe))};u("toBase64",function(E){return b(this,E)}),u("toBase64URI",function(){return b(this,!0)}),u("toBase64URL",function(){return b(this,!0)})},ue=function(){H(),K()},Me={version:t,VERSION:e,atob:Z,atobPolyfill:pe,btoa:T,btoaPolyfill:v,fromBase64:w,toBase64:R,encode:R,encodeURI:z,encodeURL:z,utob:I,btou:Y,decode:w,isValid:O,fromUint8Array:b,toUint8Array:h,extendString:H,extendUint8Array:K,extendBuiltins:ue};return Me.Base64={},Object.keys(Me).forEach(function(u){return Me.Base64[u]=Me[u]}),Me})});var vl=M((k1,Sl)=>{var k=Qc(),Nh=el().data,Dh=tl().data,Uh=rl().data,Xo=xl(),qo=El().Base64,Mh=new Xo(qo.toUint8Array(Nh)),Bh=new Xo(qo.toUint8Array(Dh)),Fh=new Xo(qo.toUint8Array(Uh));function D(t,e){return(t&e)!==0}function Vh(t,e,r){let n=e.length;for(let o=r;o+1<n;o++){let s=e[o+0],i=e[o+1];switch(t.gb9c){case 0:D(s,k.InCB_Consonant)&&(t.gb9c=1);break;case 1:D(s,k.InCB_Extend)?t.gb9c=1:D(s,k.InCB_Linker)?t.gb9c=2:t.gb9c=D(s,k.InCB_Consonant)?1:0;break;case 2:D(s,k.InCB_Extend|k.InCB_Linker)?t.gb9c=2:t.gb9c=D(s,k.InCB_Consonant)?1:0;break}switch(t.gb11){case 0:D(s,k.Extended_Pictographic)&&(t.gb11=1);break;case 1:D(s,k.Extend)?t.gb11=1:D(s,k.ZWJ)?t.gb11=2:t.gb11=D(s,k.Extended_Pictographic)?1:0;break;case 2:t.gb11=D(s,k.Extended_Pictographic)?1:0;break}switch(t.gb12){case 0:D(s,k.Regional_Indicator)?t.gb12=1:t.gb12=-1;break;case 1:D(s,k.Regional_Indicator)?t.gb12=0:t.gb12=-1;break}switch(t.gb13){case 0:D(s,k.Regional_Indicator)||(t.gb13=1);break;case 1:D(s,k.Regional_Indicator)?t.gb13=2:t.gb13=1;break;case 2:t.gb13=1;break}if(!(D(s,k.CR)&&D(i,k.LF))){if(D(s,k.Control|k.CR|k.LF)||D(i,k.Control|k.CR|k.LF))return o+1-r;if(!(D(s,k.L)&&D(i,k.L|k.V|k.LV|k.LVT))&&!(D(s,k.LV|k.V)&&D(i,k.V|k.T))&&!(D(s,k.LVT|k.T)&&D(i,k.T))&&!D(i,k.Extend|k.ZWJ)&&!D(i,k.SpacingMark)&&!D(s,k.Prepend)&&!(D(i,k.InCB_Consonant)&&t.gb9c===2)&&!(D(i,k.Extended_Pictographic)&&t.gb11===2)&&!(D(i,k.Regional_Indicator)&&t.gb12===1)&&!(D(i,k.Regional_Indicator)&&t.gb13===2))return o+1-r}}return n-r}Sl.exports=function(e){let r=[],n=[0],o=[];for(let i=0;i<e.length;){let a=e.codePointAt(i);o.push(Mh.get(a)|Bh.get(a)|Fh.get(a)),i+=a>65535?2:1,n.push(i)}let s={gb9c:0,gb11:0,gb12:0,gb13:0};for(let i=0;i<o.length;){let a=Vh(s,o,i),c=n[i],l=n[i+a];r.push(e.slice(c,l)),i+=a}return r}});var Ep={};ru(Ep,{default:()=>xp});module.exports=nu(Ep);var st=require("react"),_=require("@raycast/api");var B=te(require("react")),F=require("@raycast/api");var es=Object.prototype.hasOwnProperty;function vr(t,e){var r,n;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((n=t.length)===e.length)for(;n--&&vr(t[n],e[n]););return n===-1}if(!r||typeof t=="object"){n=0;for(r in t)if(es.call(t,r)&&++n&&!es.call(e,r)||!(r in e)||!vr(t[r],e[r]))return!1;return Object.keys(e).length===n}}return t!==t&&e!==e}var at=te(require("node:fs")),Ir=te(require("node:path"));var ns=require("react/jsx-runtime");function ou(t){let e=(0,B.useRef)(t),r=(0,B.useRef)(0);return vr(t,e.current)||(e.current=t,r.current+=1),(0,B.useMemo)(()=>e.current,[r.current])}function xe(t){let e=(0,B.useRef)(t);return e.current=t,e}function su(t,e){let r=t instanceof Error?t.message:String(t);return(0,F.showToast)({style:F.Toast.Style.Failure,title:e?.title??"Something went wrong",message:e?.message??r,primaryAction:e?.primaryAction??ts(t),secondaryAction:e?.primaryAction?ts(t):void 0})}var ts=t=>{let e=!0,r="[Extension Name]...",n="";try{let i=JSON.parse((0,at.readFileSync)((0,Ir.join)(F.environment.assetsPath,"..","package.json"),"utf8"));r=`[${i.title}]...`,n=`https://raycast.com/${i.owner||i.author}/${i.name}`,(!i.owner||i.access==="public")&&(e=!1)}catch{}let o=F.environment.isDevelopment||e,s=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:o?"Copy Logs":"Report Error",onAction(i){i.hide(),o?F.Clipboard.copy(s):(0,F.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${s}
\`\`\`
`)}`)}}};function Tr(t,e,r){let n=(0,B.useRef)(0),[o,s]=(0,B.useState)({isLoading:!0}),i=xe(t),a=xe(r?.abortable),c=xe(e||[]),l=xe(r?.onError),d=xe(r?.onData),f=xe(r?.onWillExecute),m=xe(r?.failureToastOptions),v=xe(o.data),T=(0,B.useRef)(null),x=(0,B.useRef)({page:0}),b=(0,B.useRef)(!1),C=(0,B.useRef)(!0),S=(0,B.useRef)(50),I=(0,B.useCallback)(()=>(a.current&&(a.current.current?.abort(),a.current.current=new AbortController),++n.current),[a]),P=(0,B.useCallback)((...Z)=>{let j=I();f.current?.(Z),s(p=>({...p,isLoading:!0}));let h=iu(i.current)(...Z);function y(p){return p.name=="AbortError"||j===n.current&&(l.current?l.current(p):F.environment.launchType!==F.LaunchType.Background&&su(p,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(w){w.hide(),T.current?.(...c.current||[])}},...m.current}),s({error:p,isLoading:!1})),p}return typeof h=="function"?(b.current=!0,h(x.current).then(({data:p,hasMore:w,cursor:O})=>(j===n.current&&(x.current&&(x.current.cursor=O,x.current.lastItem=p?.[p.length-1]),d.current&&d.current(p,x.current),w&&(S.current=p.length),C.current=w,s(L=>x.current.page===0?{data:p,isLoading:!1}:{data:(L.data||[])?.concat(p),isLoading:!1})),p),p=>(C.current=!1,y(p)))):(b.current=!1,h.then(p=>(j===n.current&&(d.current&&d.current(p),s({data:p,isLoading:!1})),p),y))},[d,l,c,i,s,T,f,x,m,I]);T.current=P;let R=(0,B.useCallback)(()=>{x.current={page:0};let Z=c.current||[];return P(...Z)},[P,c]),z=(0,B.useCallback)(async(Z,j)=>{let h;try{if(j?.optimisticUpdate){I(),typeof j?.rollbackOnError!="function"&&j?.rollbackOnError!==!1&&(h=structuredClone(v.current?.value));let y=j.optimisticUpdate;s(p=>({...p,data:y(p.data)}))}return await Z}catch(y){if(typeof j?.rollbackOnError=="function"){let p=j.rollbackOnError;s(w=>({...w,data:p(w.data)}))}else j?.optimisticUpdate&&j?.rollbackOnError!==!1&&s(p=>({...p,data:h}));throw y}finally{j?.shouldRevalidateAfter!==!1&&(F.environment.launchType===F.LaunchType.Background||F.environment.commandMode==="menu-bar"?await R():R())}},[R,v,s,I]),ee=(0,B.useCallback)(()=>{x.current.page+=1;let Z=c.current||[];P(...Z)},[x,c,P]);(0,B.useEffect)(()=>{x.current={page:0},r?.execute!==!1?P(...e||[]):I()},[ou([e,r?.execute,P]),a,x]),(0,B.useEffect)(()=>()=>{I()},[I]);let W=r?.execute!==!1?o.isLoading:!1,Y={...o,isLoading:W},pe=b.current?{pageSize:S.current,hasMore:C.current,onLoadMore:ee}:void 0;return{...Y,revalidate:R,mutate:z,pagination:pe}}function iu(t){return t===Promise.all||t===Promise.race||t===Promise.resolve||t===Promise.reject?t.bind(Promise):t}function au(t,e){let r=this[t];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:e}function cu(t,e){return typeof e=="string"&&e.startsWith("__raycast_cached_date__")?new Date(e.replace("__raycast_cached_date__","")):typeof e=="string"&&e.startsWith("__raycast_cached_buffer__")?Buffer.from(e.replace("__raycast_cached_buffer__",""),"base64"):e}var lu=Symbol("cache without namespace"),rs=new Map;function os(t,e,r){let n=r?.cacheNamespace||lu,o=rs.get(n)||rs.set(n,new F.Cache({namespace:r?.cacheNamespace})).get(n);if(!o)throw new Error("Missing cache");let s=xe(t),i=xe(e),a=(0,B.useSyncExternalStore)(o.subscribe,()=>{try{return o.get(s.current)}catch(f){console.error("Could not get Cache data:",f);return}}),c=(0,B.useMemo)(()=>{if(typeof a<"u"){if(a==="undefined")return;try{return JSON.parse(a,cu)}catch(f){return console.warn("The cached data is corrupted",f),i.current}}else return i.current},[a,i]),l=xe(c),d=(0,B.useCallback)(f=>{let m=typeof f=="function"?f(l.current):f;if(typeof m>"u")o.set(s.current,"undefined");else{let v=JSON.stringify(m,au);o.set(s.current,v)}return m},[o,s,l]);return[c,d]}var ct=class extends Error{constructor(t,e){super(t,e),this.name="OTPError"}},as=class extends ct{constructor(t){super(t),this.name="SecretError"}},uu=class extends as{constructor(t,e){super(`Secret must be at least ${t} bytes (${t*8} bits), got ${e} bytes`),this.name="SecretTooShortError"}},fu=class extends as{constructor(t,e){super(`Secret must not exceed ${t} bytes, got ${e} bytes`),this.name="SecretTooLongError"}},Tn=class extends ct{constructor(t){super(t),this.name="CounterError"}},du=class extends Tn{constructor(){super("Counter must be non-negative"),this.name="CounterNegativeError"}},ss=class extends Tn{constructor(){super("Counter exceeds maximum safe integer value"),this.name="CounterOverflowError"}},hu=class extends Tn{constructor(){super("Counter must be a finite integer"),this.name="CounterNotIntegerError"}},cs=class extends ct{constructor(t){super(t),this.name="TimeError"}},pu=class extends cs{constructor(){super("Time must be non-negative"),this.name="TimeNegativeError"}},mu=class extends cs{constructor(){super("Time must be a finite number"),this.name="TimeNotFiniteError"}},ls=class extends ct{constructor(t){super(t),this.name="PeriodError"}},gu=class extends ls{constructor(t){super(`Period must be at least ${t} second(s)`),this.name="PeriodTooSmallError"}},bu=class extends ls{constructor(t){super(`Period must not exceed ${t} seconds`),this.name="PeriodTooLargeError"}};var us=class extends ct{constructor(t,e){super(t,e),this.name="CryptoError"}},Ar=class extends us{constructor(t,e){super(`HMAC computation failed: ${t}`,e),this.name="HMACError"}},yu=class extends us{constructor(t,e){super(`Random byte generation failed: ${t}`,e),this.name="RandomBytesError"}};var fs=class extends ct{constructor(t){super(t),this.name="PluginError"}},wu=class extends fs{constructor(){super("Crypto plugin is required."),this.name="CryptoPluginMissingError"}},xu=class extends fs{constructor(){super("Base32 plugin is required."),this.name="Base32PluginMissingError"}},Xt=class extends ct{constructor(t){super(t),this.name="ConfigurationError"}},Eu=class extends Xt{constructor(){super("Secret is required. Use generateSecret() to create one, or provide via { secret: 'YOUR_BASE32_SECRET' }"),this.name="SecretMissingError"}};var Su=new TextEncoder,Ap=new TextDecoder,vu=16,Iu=64;var Tu=1,Au=3600;var Cu=Number.MAX_SAFE_INTEGER,Pu=99,ds=Symbol("otplib.guardrails.override");function At(t,e,r){if(typeof e!="number"||!Number.isSafeInteger(e))throw new Xt(`Guardrail '${t}' must be a safe integer`);if(e<r)throw new Xt(`Guardrail '${t}' must be >= ${r}`)}var qt=Object.freeze({MIN_SECRET_BYTES:vu,MAX_SECRET_BYTES:Iu,MIN_PERIOD:Tu,MAX_PERIOD:Au,MAX_COUNTER:Cu,MAX_WINDOW:Pu,[ds]:!1});function Yt(t){if(!t)return qt;t.MIN_SECRET_BYTES!==void 0&&At("MIN_SECRET_BYTES",t.MIN_SECRET_BYTES,1),t.MAX_SECRET_BYTES!==void 0&&At("MAX_SECRET_BYTES",t.MAX_SECRET_BYTES,1),t.MIN_PERIOD!==void 0&&At("MIN_PERIOD",t.MIN_PERIOD,1),t.MAX_PERIOD!==void 0&&At("MAX_PERIOD",t.MAX_PERIOD,1),t.MAX_COUNTER!==void 0&&At("MAX_COUNTER",t.MAX_COUNTER,0),t.MAX_WINDOW!==void 0&&At("MAX_WINDOW",t.MAX_WINDOW,1);let e={...qt,...t};if(e.MIN_SECRET_BYTES>e.MAX_SECRET_BYTES)throw new Xt("Guardrail 'MIN_SECRET_BYTES' must be <= 'MAX_SECRET_BYTES'");if(e.MIN_PERIOD>e.MAX_PERIOD)throw new Xt("Guardrail 'MIN_PERIOD' must be <= 'MAX_PERIOD'");return Object.freeze({...e,[ds]:!0})}function Cr(t,e=qt){if(t.length<e.MIN_SECRET_BYTES)throw new uu(e.MIN_SECRET_BYTES,t.length);if(t.length>e.MAX_SECRET_BYTES)throw new fu(e.MAX_SECRET_BYTES,t.length)}function hs(t,e=qt){if(typeof t=="number"){if(!Number.isFinite(t)||!Number.isInteger(t))throw new hu;if(!Number.isSafeInteger(t))throw new ss}let r=typeof t=="bigint"?t:BigInt(t);if(r<0n)throw new du;if(r>BigInt(e.MAX_COUNTER))throw new ss}function ps(t){if(!Number.isFinite(t))throw new mu;if(t<0)throw new pu}function ms(t,e=qt){if(!Number.isInteger(t)||t<e.MIN_PERIOD)throw new gu(e.MIN_PERIOD);if(t>e.MAX_PERIOD)throw new bu(e.MAX_PERIOD)}function gs(t){let e=typeof t=="bigint"?t:BigInt(t),r=new ArrayBuffer(8);return new DataView(r).setBigUint64(0,e,!1),new Uint8Array(r)}function bs(t){let e=t[t.length-1]&15;return(t[e]&127)<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function ys(t,e){let r=10**e;return(t%r).toString().padStart(e,"0")}function ku(t,e){return t.length===e.length}function ws(t,e){let r=is(t),n=is(e);if(!ku(r,n))return!1;let o=0;for(let s=0;s<r.length;s++)o|=r[s]^n[s];return o===0}function is(t){return typeof t=="string"?Su.encode(t):t}function Pr(t,e){return typeof t=="string"?(Lu(e),e.decode(t)):t}function kr(t){if(!t)throw new wu}function Lu(t){if(!t)throw new xu}function Lr(t){if(!t)throw new Eu}var Ru=class{constructor(t){this.crypto=t}get plugin(){return this.crypto}async hmac(t,e,r){try{let n=this.crypto.hmac(t,e,r);return n instanceof Promise?await n:n}catch(n){let o=n instanceof Error?n.message:String(n);throw new Ar(o,{cause:n})}}hmacSync(t,e,r){try{let n=this.crypto.hmac(t,e,r);if(n instanceof Promise)throw new Ar("Crypto plugin does not support synchronous HMAC operations");return n}catch(n){if(n instanceof Ar)throw n;let o=n instanceof Error?n.message:String(n);throw new Ar(o,{cause:n})}}randomBytes(t){try{return this.crypto.randomBytes(t)}catch(e){let r=e instanceof Error?e.message:String(e);throw new yu(r,{cause:e})}}};function xs(t){return new Ru(t)}var An=class extends Error{constructor(t){super(t),this.name="URIParseError"}},lt=class extends An{constructor(t){super(`Invalid otpauth URI: ${t}`),this.name="InvalidURIError"}},$u=class extends An{constructor(t){super(`Missing required parameter: ${t}`),this.name="MissingParameterError"}},ut=class extends An{constructor(t,e){super(`Invalid value for parameter '${t}': ${e}`),this.name="InvalidParameterError"}},Es=2048,Ss=512,_u=1024;function Ou(t,e){let r=t instanceof Error?t.message:String(t);return`Invalid URI encoding in ${e}: ${r}`}function Rr(t,e,r){if(t.length>e*3)throw new lt(`${r} exceeds maximum length`);try{let n=decodeURIComponent(t);if(n.length>e)throw new lt(`${r} exceeds maximum length of ${e} characters`);return n}catch(n){throw n instanceof lt?n:new lt(Ou(n,r))}}function Is(t){if(t.length>Es)throw new lt(`URI exceeds maximum length of ${Es} characters`);if(!t.startsWith("otpauth://"))throw new lt(t);let e=t.slice(10),r=e.indexOf("/");if(r===-1)throw new lt(t);let n=e.slice(0,r);if(n!=="hotp"&&n!=="totp")throw new ut("type",n);let o=e.slice(r+1),s=o.indexOf("?"),i,a;s===-1?(i=Rr(o,Ss,"label"),a=""):(i=Rr(o.slice(0,s),Ss,"label"),a=o.slice(s+1));let c=Nu(a);if(!c.secret)throw new $u("secret");return{type:n,label:i,params:c}}function Nu(t){let e={};if(!t)return e;let r=t.split("&");for(let n of r){let o=n.indexOf("=");if(o===-1)continue;let s=Rr(n.slice(0,o),64,"parameter key"),i=Rr(n.slice(o+1),_u,`parameter '${s}'`);switch(s){case"secret":e.secret=i;break;case"issuer":e.issuer=i;break;case"algorithm":e.algorithm=Du(i);break;case"digits":e.digits=Uu(i);break;case"counter":e.counter=vs("counter",i,0);break;case"period":e.period=vs("period",i,1);break}}return e}function vs(t,e,r){if(!/^-?\d+$/.test(e))throw new ut(t,e);let n=Number(e);if(!Number.isSafeInteger(n))throw new ut(t,e);if(n<r)throw new ut(t,e);return n}function Du(t){let e=t.toLowerCase();if(e==="sha1"||e==="sha-1")return"sha1";if(e==="sha256"||e==="sha-256")return"sha256";if(e==="sha512"||e==="sha-512")return"sha512";throw new ut("algorithm",t)}function Uu(t){if(!/^\d+$/.test(t))throw new ut("digits",t);let e=Number(t);if(e===6||e===7||e===8)return e;throw new ut("digits",t)}function Bu(t){let{secret:e,counter:r,algorithm:n="sha1",digits:o=6,crypto:s,base32:i,guardrails:a,hooks:c}=t;Lr(e),kr(s);let l=Pr(e,i);Cr(l,a),hs(r,a);let d=xs(s),f=gs(r);return{ctx:d,algorithm:n,digits:o,secretBytes:l,counterBytes:f,hooks:c}}function Ts(t){let{ctx:e,algorithm:r,digits:n,secretBytes:o,counterBytes:s,hooks:i}=Bu(t),a=e.hmacSync(r,o,s),c=i?.truncateDigest?i.truncateDigest(a):bs(a);return i?.encodeToken?i.encodeToken(c,n):ys(c,n)}function Fu(t){let{secret:e,epoch:r=Math.floor(Date.now()/1e3),t0:n=0,period:o=30,algorithm:s="sha1",digits:i=6,crypto:a,base32:c,guardrails:l=Yt(),hooks:d}=t;Lr(e),kr(a);let f=Pr(e,c);Cr(f,l),ps(r),ms(o,l);let m=Math.floor((r-n)/o);return{secret:f,counter:m,algorithm:s,digits:i,crypto:a,guardrails:l,hooks:d}}function Cn(t){let e=Fu(t);return Ts(e)}function Vu(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Cs(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function $r(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Ln(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function kn(t){if(!Array.isArray(t))throw new Error("array expected")}function _r(t,e){if(!Cs(!0,e))throw new Error(`${t}: array of strings expected`)}function Hu(t,e){if(!Cs(!1,e))throw new Error(`${t}: array of numbers expected`)}function Gu(...t){let e=s=>s,r=(s,i)=>a=>s(i(a)),n=t.map(s=>s.encode).reduceRight(r,e),o=t.map(s=>s.decode).reduce(r,e);return{encode:n,decode:o}}function zu(t){let e=typeof t=="string"?t.split(""):t,r=e.length;_r("alphabet",e);let n=new Map(e.map((o,s)=>[o,s]));return{encode:o=>(kn(o),o.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${t}`);return e[s]})),decode:o=>(kn(o),o.map(s=>{$r("alphabet.decode",s);let i=n.get(s);if(i===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${t}`);return i}))}}function Wu(t=""){return $r("join",t),{encode:e=>(_r("join.decode",e),e.join(t)),decode:e=>($r("join.decode",e),e.split(t))}}function ju(t,e="="){return Ln(t),$r("padding",e),{encode(r){for(_r("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){_r("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}var Ps=(t,e)=>e===0?t:Ps(e,t%e),Or=(t,e)=>t+(e-Ps(t,e)),Pn=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function As(t,e,r,n){if(kn(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(Or(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${Or(e,r)}`);let o=0,s=0,i=Pn[e],a=Pn[r]-1,c=[];for(let l of t){if(Ln(l),l>=i)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(o=o<<e|l,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=r;s-=r)c.push((o>>s-r&a)>>>0);let d=Pn[s];if(d===void 0)throw new Error("invalid carry");o&=d-1}if(o=o<<r-s&a,!n&&s>=e)throw new Error("Excess padding");if(!n&&o>0)throw new Error(`Non-zero padding: ${o}`);return n&&s>0&&c.push(o>>>0),c}function Ku(t,e=!1){if(Ln(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Or(8,t)>32||Or(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!Vu(r))throw new Error("radix2.encode input should be Uint8Array");return As(Array.from(r),8,t,!e)},decode:r=>(Hu("radix2.decode",r),Uint8Array.from(As(r,t,8,e)))}}var Rn=Gu(Ku(5),zu("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ju(5),Wu(""));var Xu=class{name="scure";encode(t,e={}){let{padding:r=!1}=e,n=Rn.encode(t);return r?n:n.replace(/=+$/,"")}decode(t){try{let e=t.toUpperCase(),r=e.padEnd(Math.ceil(e.length/8)*8,"=");return Rn.decode(r)}catch(e){throw e instanceof Error?new Error(`Invalid Base32 string: ${e.message}`):new Error("Invalid Base32 string")}}},$n=Object.freeze(new Xu);function qu(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ks(t,e=""){if(!Number.isSafeInteger(t)||t<0){let r=e&&`"${e}" `;throw new Error(`${r}expected integer >= 0, got ${t}`)}}function Ct(t,e,r=""){let n=qu(t),o=t?.length,s=e!==void 0;if(!n||s&&o!==e){let i=r&&`"${r}" `,a=s?` of length ${e}`:"",c=n?`length=${o}`:`type=${typeof t}`;throw new Error(i+"expected Uint8Array"+a+", got "+c)}return t}function Ls(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");ks(t.outputLen),ks(t.blockLen)}function Pt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Rs(t,e){Ct(t,void 0,"digestInto() output");let r=e.outputLen;if(t.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function ge(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Nr(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ee(t,e){return t<<32-e|t>>>e}function Dr(t,e){return t<<e|t>>>32-e>>>0}function Zt(t,e={}){let r=(o,s)=>t(s).update(o).digest(),n=t(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=o=>t(o),Object.assign(r,e),Object.freeze(r)}function $s(t=32){let e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}var _n=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});var Ur=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,r){if(Ls(e),Ct(r,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,o=new Uint8Array(n);o.set(r.length>n?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),ge(o)}update(e){return Pt(this),this.iHash.update(e),this}digestInto(e){Pt(this),Ct(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});let{oHash:r,iHash:n,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return e=e,e.finished=o,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},On=(t,e,r)=>new Ur(t,e).update(r).digest();On.create=(t,e)=>new Ur(t,e);function Mr(t,e,r){return t&e^~t&r}function Br(t,e,r){return t&e^t&r^e&r}var ft=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,r,n,o){this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(e),this.view=Nr(this.buffer)}update(e){Pt(this),Ct(e);let{view:r,buffer:n,blockLen:o}=this,s=e.length;for(let i=0;i<s;){let a=Math.min(o-this.pos,s-i);if(a===o){let c=Nr(e);for(;o<=s-i;i+=o)this.process(c,i);continue}n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Pt(this),Rs(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:s}=this,{pos:i}=this;r[i++]=128,ge(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(n,0),i=0);for(let f=i;f<o;f++)r[f]=0;n.setBigUint64(o-8,BigInt(this.length*8),s),this.process(n,0);let a=Nr(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,d[f],s)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||=new this.constructor,e.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:s,destroyed:i,pos:a}=this;return e.destroyed=i,e.finished=s,e.length=o,e.pos=a,o%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}},_e=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var se=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Jt=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),Be=new Uint32Array(80),Nn=class extends ft{A=Jt[0]|0;B=Jt[1]|0;C=Jt[2]|0;D=Jt[3]|0;E=Jt[4]|0;constructor(){super(64,20,8,!1)}get(){let{A:e,B:r,C:n,D:o,E:s}=this;return[e,r,n,o,s]}set(e,r,n,o,s){this.A=e|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=s|0}process(e,r){for(let c=0;c<16;c++,r+=4)Be[c]=e.getUint32(r,!1);for(let c=16;c<80;c++)Be[c]=Dr(Be[c-3]^Be[c-8]^Be[c-14]^Be[c-16],1);let{A:n,B:o,C:s,D:i,E:a}=this;for(let c=0;c<80;c++){let l,d;c<20?(l=Mr(o,s,i),d=1518500249):c<40?(l=o^s^i,d=1859775393):c<60?(l=Br(o,s,i),d=2400959708):(l=o^s^i,d=3395469782);let f=Dr(n,5)+l+a+d+Be[c]|0;a=i,i=s,s=Dr(o,30),o=n,n=f}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,this.set(n,o,s,i,a)}roundClean(){ge(Be)}destroy(){this.set(0,0,0,0,0),ge(this.buffer)}},_s=Zt(()=>new Nn);var Fr=BigInt(4294967295),Os=BigInt(32);function Yu(t,e=!1){return e?{h:Number(t&Fr),l:Number(t>>Os&Fr)}:{h:Number(t>>Os&Fr)|0,l:Number(t&Fr)|0}}function Ns(t,e=!1){let r=t.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let s=0;s<r;s++){let{h:i,l:a}=Yu(t[s],e);[n[s],o[s]]=[i,a]}return[n,o]}var Dn=(t,e,r)=>t>>>r,Un=(t,e,r)=>t<<32-r|e>>>r,dt=(t,e,r)=>t>>>r|e<<32-r,ht=(t,e,r)=>t<<32-r|e>>>r,Qt=(t,e,r)=>t<<64-r|e>>>r-32,er=(t,e,r)=>t>>>r-32|e<<64-r;function Ie(t,e,r,n){let o=(e>>>0)+(n>>>0);return{h:t+r+(o/2**32|0)|0,l:o|0}}var Ds=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Us=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Ms=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Bs=(t,e,r,n,o)=>e+r+n+o+(t/2**32|0)|0,Fs=(t,e,r,n,o)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Vs=(t,e,r,n,o,s)=>e+r+n+o+s+(t/2**32|0)|0;var Ju=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fe=new Uint32Array(64),Mn=class extends ft{constructor(e){super(64,e,8,!1)}get(){let{A:e,B:r,C:n,D:o,E:s,F:i,G:a,H:c}=this;return[e,r,n,o,s,i,a,c]}set(e,r,n,o,s,i,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)Fe[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let m=Fe[f-15],v=Fe[f-2],T=Ee(m,7)^Ee(m,18)^m>>>3,x=Ee(v,17)^Ee(v,19)^v>>>10;Fe[f]=x+Fe[f-7]+T+Fe[f-16]|0}let{A:n,B:o,C:s,D:i,E:a,F:c,G:l,H:d}=this;for(let f=0;f<64;f++){let m=Ee(a,6)^Ee(a,11)^Ee(a,25),v=d+m+Mr(a,c,l)+Ju[f]+Fe[f]|0,x=(Ee(n,2)^Ee(n,13)^Ee(n,22))+Br(n,o,s)|0;d=l,l=c,c=a,a=i+v|0,i=s,s=o,o=n,n=v+x|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,o,s,i,a,c,l,d)}roundClean(){ge(Fe)}destroy(){this.set(0,0,0,0,0,0,0,0),ge(this.buffer)}},Bn=class extends Mn{A=_e[0]|0;B=_e[1]|0;C=_e[2]|0;D=_e[3]|0;E=_e[4]|0;F=_e[5]|0;G=_e[6]|0;H=_e[7]|0;constructor(){super(32)}};var Hs=Ns(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Qu=Hs[0],ef=Hs[1],Ve=new Uint32Array(80),He=new Uint32Array(80),Fn=class extends ft{constructor(e){super(128,e,16,!1)}get(){let{Ah:e,Al:r,Bh:n,Bl:o,Ch:s,Cl:i,Dh:a,Dl:c,Eh:l,El:d,Fh:f,Fl:m,Gh:v,Gl:T,Hh:x,Hl:b}=this;return[e,r,n,o,s,i,a,c,l,d,f,m,v,T,x,b]}set(e,r,n,o,s,i,a,c,l,d,f,m,v,T,x,b){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=s|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=d|0,this.Fh=f|0,this.Fl=m|0,this.Gh=v|0,this.Gl=T|0,this.Hh=x|0,this.Hl=b|0}process(e,r){for(let I=0;I<16;I++,r+=4)Ve[I]=e.getUint32(r),He[I]=e.getUint32(r+=4);for(let I=16;I<80;I++){let P=Ve[I-15]|0,R=He[I-15]|0,z=dt(P,R,1)^dt(P,R,8)^Dn(P,R,7),ee=ht(P,R,1)^ht(P,R,8)^Un(P,R,7),W=Ve[I-2]|0,Y=He[I-2]|0,pe=dt(W,Y,19)^Qt(W,Y,61)^Dn(W,Y,6),Z=ht(W,Y,19)^er(W,Y,61)^Un(W,Y,6),j=Ms(ee,Z,He[I-7],He[I-16]),h=Bs(j,z,pe,Ve[I-7],Ve[I-16]);Ve[I]=h|0,He[I]=j|0}let{Ah:n,Al:o,Bh:s,Bl:i,Ch:a,Cl:c,Dh:l,Dl:d,Eh:f,El:m,Fh:v,Fl:T,Gh:x,Gl:b,Hh:C,Hl:S}=this;for(let I=0;I<80;I++){let P=dt(f,m,14)^dt(f,m,18)^Qt(f,m,41),R=ht(f,m,14)^ht(f,m,18)^er(f,m,41),z=f&v^~f&x,ee=m&T^~m&b,W=Fs(S,R,ee,ef[I],He[I]),Y=Vs(W,C,P,z,Qu[I],Ve[I]),pe=W|0,Z=dt(n,o,28)^Qt(n,o,34)^Qt(n,o,39),j=ht(n,o,28)^er(n,o,34)^er(n,o,39),h=n&s^n&a^s&a,y=o&i^o&c^i&c;C=x|0,S=b|0,x=v|0,b=T|0,v=f|0,T=m|0,{h:f,l:m}=Ie(l|0,d|0,Y|0,pe|0),l=a|0,d=c|0,a=s|0,c=i|0,s=n|0,i=o|0;let p=Ds(pe,j,y);n=Us(p,Y,Z,h),o=p|0}({h:n,l:o}=Ie(this.Ah|0,this.Al|0,n|0,o|0)),{h:s,l:i}=Ie(this.Bh|0,this.Bl|0,s|0,i|0),{h:a,l:c}=Ie(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:d}=Ie(this.Dh|0,this.Dl|0,l|0,d|0),{h:f,l:m}=Ie(this.Eh|0,this.El|0,f|0,m|0),{h:v,l:T}=Ie(this.Fh|0,this.Fl|0,v|0,T|0),{h:x,l:b}=Ie(this.Gh|0,this.Gl|0,x|0,b|0),{h:C,l:S}=Ie(this.Hh|0,this.Hl|0,C|0,S|0),this.set(n,o,s,i,a,c,l,d,f,m,v,T,x,b,C,S)}roundClean(){ge(Ve,He)}destroy(){ge(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Vn=class extends Fn{Ah=se[0]|0;Al=se[1]|0;Bh=se[2]|0;Bl=se[3]|0;Ch=se[4]|0;Cl=se[5]|0;Dh=se[6]|0;Dl=se[7]|0;Eh=se[8]|0;El=se[9]|0;Fh=se[10]|0;Fl=se[11]|0;Gh=se[12]|0;Gl=se[13]|0;Hh=se[14]|0;Hl=se[15]|0;constructor(){super(64)}};var Gs=Zt(()=>new Bn,_n(1));var zs=Zt(()=>new Vn,_n(3));var tf=class{name="noble";hmac(t,e,r){return On(t==="sha1"?_s:t==="sha256"?Gs:zs,e,r)}randomBytes(t){return $s(t)}constantTimeEqual(t,e){return ws(t,e)}},Hn=Object.freeze(new tf);var Te=class extends Error{constructor(e,r){super(e),this.stack=r}},kt=class extends Te{constructor(e,r){super(e,r)}};var Ge=class extends kt{constructor(e,r){super(e??"Bitwarden CLI not found",r),this.name="InstalledCLINotFoundError",this.stack=r}},pt=class extends Te{constructor(e,r){super(e??"Failed to load vault items",r),this.name="FailedToLoadVaultItemsError"}},Vr=class extends kt{constructor(e,r){super(e??"Vault is locked",r),this.name="VaultIsLockedError"}},tr=class extends Te{constructor(e,r){super(e??"Not logged in",r),this.name="NotLoggedInError"}},mt=class extends kt{constructor(e,r){super(e??"Failed do download Bitwarden CLI",r),this.name="EnsureCliBinError"}},Hr=class extends Te{constructor(e,r){super(e??"Premium status is required to use this feature",r),this.name="PremiumFeatureError"}},rr=class extends Te{constructor(e,r){super(e??"This Send has a is protected by a password",r),this.name="SendNeedsPasswordError"}},nr=class extends Te{constructor(e,r){super(e??"The password you entered is invalid",r),this.name="SendInvalidPasswordError"}};function ze(t,e){try{return t()}catch{return e}}function Gn(t){if(t instanceof kt)return t.message}var zr=t=>{if(t){if(typeof t=="string")return t;if(t instanceof Error){let{message:e,name:r}=t;return t.stack?t.stack:`${r}: ${e}`}return String(t)}};function Gr(t){return[t,null]}function Ae(t){return[null,t]}function Lt(t){if(typeof t=="function")try{return Gr(t())}catch(e){return Ae(e)}return t.then(e=>Gr(e)).catch(e=>Ae(e))}var zn=require("@raycast/api");var Ws=require("@raycast/api"),rf={logs:new Map,set:(t,e)=>{Rt.logs.set(new Date,{message:t,error:e})},clear:()=>Rt.logs.clear(),toString:()=>{let t="";return Rt.logs.forEach((e,r)=>{t.length>0&&(t+=`

`),t+=`[${r.toISOString()}] ${e.message}`,e.error&&(t+=`: ${zr(e.error)}`)}),t}},Rt=Object.freeze(rf),A=(t,e,r)=>{let{captureToRaycast:n=!1}=r??{},o=Array.isArray(t)?t.filter(Boolean).join(" "):t||"Captured exception";Rt.set(o,e),zn.environment.isDevelopment?console.error(o,e):n&&(0,Ws.captureException)(e)},js=(...t)=>{zn.environment.isDevelopment&&console.debug(...t)};var Ks=Yt({MIN_SECRET_BYTES:10}),Wr="23456789BCDFGHJKMNPQRTVWXY",Wn=30,nf={encodeToken(t,e){let r="",n=t;for(let o=0;o<e;o++)r+=Wr[n%Wr.length],n=Math.floor(n/Wr.length);return r},validateToken(t,e){if(t.length!==e)throw new Error(`Expected ${e} characters, got ${t.length}`);for(let r of t)if(!Wr.includes(r))throw new Error(`Invalid character: ${r}`)}};function of(t){let e=(a=Date.now())=>Math.floor(a/1e3),r=a=>c=>{let l=e(c)%a;return(a-l)*1e3};if(t.variant==="steam"){let{secret:a}=t;return{period:Wn,remaining:r(Wn),generate:c=>Cn({secret:a,digits:5,period:Wn,crypto:Hn,base32:$n,guardrails:Ks,hooks:nf,...c!=null&&{epoch:e(c)}})}}let{secret:n,period:o,algorithm:s,digits:i}=t;return{period:o,remaining:r(o),generate:a=>Cn({secret:n,period:o,digits:i,crypto:Hn,base32:$n,guardrails:Ks,algorithm:s.toLowerCase(),...a!=null&&{epoch:e(a)}})}}function sf(t){if(t.includes("otpauth")){let[e,r]=Lt(()=>Is(t));if(r)throw r;if(e.type!=="totp")throw new Error("Invalid authenticator key");let{secret:n,period:o=30,algorithm:s="sha1",digits:i=6}=e.params;return{secret:n,period:o,algorithm:s,digits:i}}return{secret:t,period:30,algorithm:"sha1",digits:6}}function jn(t){let e;if(t.startsWith("steam://")){let o=t.slice(8).trim();if(!o)return Ae(new Error("Invalid Steam Guard key"));e={variant:"steam",secret:o}}else{let[o,s]=Lt(()=>sf(t));if(s)return A("Failed to parse key",s),Ae(new Error("Failed to parse authenticator key"));e={variant:"regular",...o}}let[r,n]=Lt(()=>of(e));return n?(A("Failed to initialize authenticator",n),Ae(new Error("Failed to initialize authenticator"))):Gr(r)}var Kt=require("@raycast/api"),Yc=require("react");var Se=require("@raycast/api");var vc=require("@raycast/api");var jr=require("react"),Xs=(0,jr.createContext)(null),or=()=>{let t=(0,jr.useContext)(Xs);if(t==null)throw new Error("useSelectVaultItem must be used within a VaultItemContext.Provider");return t},qs=Xs;var Gt=require("@raycast/api");var We=require("@raycast/api"),gt=require("react/jsx-runtime"),af=t=>{let{description:e,onConfirm:r}=t;function n(o){r(o.password)}return(0,gt.jsxs)(We.Form,{navigationTitle:"Confirmation Required",actions:(0,gt.jsx)(We.ActionPanel,{children:(0,gt.jsx)(We.Action.SubmitForm,{title:"Confirm",onSubmit:n})}),children:[(0,gt.jsx)(We.Form.Description,{title:"Confirmation Required for",text:e}),(0,gt.jsx)(We.Form.PasswordField,{autoFocus:!0,id:"password",title:"Master Password"})]})},Ys=af;var Ht=require("@raycast/api"),et=require("react");var N=require("@raycast/api"),fr=require("react");var $t=require("@raycast/api");var Ce={VISA:"Visa",MASTERCARD:"Mastercard",AMEX:"Amex",DISCOVER:"Discover",DINERS_CLUB:"Diners Club",JCB:"JCB",MAESTRO:"Maestro",UNION_PAY:"UnionPay",RU_PAY:"RuPay",OTHER:"Other"};var Zs="https://bitwarden.com",bt="HIDDEN-VALUE",V={PASSWORD_OPTIONS:"bw-generate-password-options",PASSWORD_ONE_TIME_WARNING:"bw-generate-password-warning-accepted",SESSION_TOKEN:"sessionToken",REPROMPT_HASH:"sessionRepromptHash",SERVER_URL:"cliServer",LAST_ACTIVITY_TIME:"lastActivityTime",VAULT_LOCK_REASON:"vaultLockReason",VAULT_FAVORITE_ORDER:"vaultFavoriteOrder",VAULT_LAST_STATUS:"lastVaultStatus"},yt={TIMEOUT:"Vault timed out due to inactivity",MANUAL:"Manually locked by the user",SYSTEM_LOCK:"Screen was locked",SYSTEM_SLEEP:"System went to sleep",CLI_UPDATED:"Bitwarden has been updated. Please login again."};var wt={ALL:"all",NO_FOLDER:"no-folder"},fe={IV:"iv",VAULT:"vault",CURRENT_FOLDER_ID:"currentFolderId",SEND_TYPE_FILTER:"sendTypeFilter",CLI_VERSION:"cliVersion"},_t={1:$t.Icon.Globe,3:$t.Icon.CreditCard,4:$t.Icon.Person,2:$t.Icon.Document,5:$t.Icon.Key};var St=require("react");var q=require("@raycast/api");var Ta=require("node:buffer"),Aa=te(require("node:path"),1),go=te(require("node:child_process"),1),cr=te(require("node:process"),1),Ca=te(Bi(),1);function no(t){let e=typeof t=="string"?`
`:10,r=typeof t=="string"?"\r":13;return t[t.length-1]===e&&(t=t.slice(0,-1)),t[t.length-1]===r&&(t=t.slice(0,-1)),t}var sr=te(require("node:process"),1),Dt=te(require("node:path"),1),Fi=te(require("node:url"),1);function Xr(t={}){let{env:e=process.env,platform:r=process.platform}=t;return r!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}function Of(t={}){let{cwd:e=sr.default.cwd(),path:r=sr.default.env[Xr()],execPath:n=sr.default.execPath}=t,o,s=e instanceof URL?Fi.default.fileURLToPath(e):e,i=Dt.default.resolve(s),a=[];for(;o!==i;)a.push(Dt.default.join(i,"node_modules/.bin")),o=i,i=Dt.default.resolve(i,"..");return a.push(Dt.default.resolve(s,n,"..")),[...a,r].join(Dt.default.delimiter)}function Vi({env:t=sr.default.env,...e}={}){t={...t};let r=Xr({env:t});return e.path=t[r],t[r]=Of(e),t}var Nf=(t,e,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let o=Object.getOwnPropertyDescriptor(t,r),s=Object.getOwnPropertyDescriptor(e,r);!Df(o,s)&&n||Object.defineProperty(t,r,s)},Df=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},Uf=(t,e)=>{let r=Object.getPrototypeOf(e);r!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,r)},Mf=(t,e)=>`/* Wrapped ${t}*/
${e}`,Bf=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Ff=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Vf=(t,e,r)=>{let n=r===""?"":`with ${r.trim()}() `,o=Mf.bind(null,n,e.toString());Object.defineProperty(o,"name",Ff),Object.defineProperty(t,"toString",{...Bf,value:o})};function oo(t,e,{ignoreNonConfigurable:r=!1}={}){let{name:n}=t;for(let o of Reflect.ownKeys(e))Nf(t,e,o,r);return Uf(t,e),Vf(t,e,n),t}var qr=new WeakMap,Hi=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,n=0,o=t.displayName||t.name||"<anonymous>",s=function(...i){if(qr.set(s,++n),n===1)r=t.apply(this,i),t=null;else if(e.throw===!0)throw new Error(`Function \`${o}\` can only be called once`);return r};return oo(s,t),qr.set(s,n),s};Hi.callCount=t=>{if(!qr.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return qr.get(t)};var Gi=Hi;var qi=require("node:os");var zi=function(){let t=ji-Wi+1;return Array.from({length:t},Hf)},Hf=function(t,e){return{name:`SIGRT${e+1}`,number:Wi+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Wi=34,ji=64;var Xi=require("node:os");var Ki=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var so=function(){let t=zi();return[...Ki,...t].map(Gf)},Gf=function({name:t,number:e,description:r,action:n,forced:o=!1,standard:s}){let{signals:{[t]:i}}=Xi.constants,a=i!==void 0;return{name:t,number:a?i:e,description:r,supported:a,action:n,forced:o,standard:s}};var zf=function(){let t=so();return Object.fromEntries(t.map(Wf))},Wf=function({name:t,number:e,description:r,supported:n,action:o,forced:s,standard:i}){return[t,{name:t,number:e,description:r,supported:n,action:o,forced:s,standard:i}]},Yi=zf(),jf=function(){let t=so(),e=65,r=Array.from({length:e},(n,o)=>Kf(o,t));return Object.assign({},...r)},Kf=function(t,e){let r=Xf(t,e);if(r===void 0)return{};let{name:n,description:o,supported:s,action:i,forced:a,standard:c}=r;return{[t]:{name:n,number:t,description:o,supported:s,action:i,forced:a,standard:c}}},Xf=function(t,e){let r=e.find(({name:n})=>qi.constants.signals[n]===t);return r!==void 0?r:e.find(n=>n.number===t)},L0=jf();var qf=({timedOut:t,timeout:e,errorCode:r,signal:n,signalDescription:o,exitCode:s,isCanceled:i})=>t?`timed out after ${e} milliseconds`:i?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${o})`:s!==void 0?`failed with exit code ${s}`:"failed",io=({stdout:t,stderr:e,all:r,error:n,signal:o,exitCode:s,command:i,escapedCommand:a,timedOut:c,isCanceled:l,killed:d,parsed:{options:{timeout:f}}})=>{s=s===null?void 0:s,o=o===null?void 0:o;let m=o===void 0?void 0:Yi[o].description,v=n&&n.code,x=`Command ${qf({timedOut:c,timeout:f,errorCode:v,signal:o,signalDescription:m,exitCode:s,isCanceled:l})}: ${i}`,b=Object.prototype.toString.call(n)==="[object Error]",C=b?`${x}
${n.message}`:x,S=[C,e,t].filter(Boolean).join(`
`);return b?(n.originalMessage=n.message,n.message=S):n=new Error(S),n.shortMessage=C,n.command=i,n.escapedCommand=a,n.exitCode=s,n.signal=o,n.signalDescription=m,n.stdout=t,n.stderr=e,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=l,n.killed=d&&!c,n};var Yr=["stdin","stdout","stderr"],Yf=t=>Yr.some(e=>t[e]!==void 0),Zi=t=>{if(!t)return;let{stdio:e}=t;if(e===void 0)return Yr.map(n=>t[n]);if(Yf(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Yr.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,Yr.length);return Array.from({length:r},(n,o)=>e[o])};var oa=te(require("node:os"),1),sa=te(na(),1),Zf=1e3*5,ia=(t,e="SIGTERM",r={})=>{let n=t(e);return Jf(t,e,r,n),n},Jf=(t,e,r,n)=>{if(!Qf(e,r,n))return;let o=td(r),s=setTimeout(()=>{t("SIGKILL")},o);s.unref&&s.unref()},Qf=(t,{forceKillAfterTimeout:e},r)=>ed(t)&&e!==!1&&r,ed=t=>t===oa.default.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",td=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return Zf;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},aa=(t,e)=>{t.kill()&&(e.isCanceled=!0)},rd=(t,e,r)=>{t.kill(e),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},ca=(t,{timeout:e,killSignal:r="SIGTERM"},n)=>{if(e===0||e===void 0)return n;let o,s=new Promise((a,c)=>{o=setTimeout(()=>{rd(t,r,c)},e)}),i=n.finally(()=>{clearTimeout(o)});return Promise.race([s,i])},la=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},ua=async(t,{cleanup:e,detached:r},n)=>{if(!e||r)return n;let o=(0,sa.default)(()=>{t.kill()});return n.finally(()=>{o()})};function fa(t){return t!==null&&typeof t=="object"&&typeof t.pipe=="function"}var ho=te(pa(),1),ba=te(ga(),1),ya=(t,e)=>{e!==void 0&&(fa(e)?e.pipe(t.stdin):t.stdin.end(e))},wa=(t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;let r=(0,ba.default)();return t.stdout&&r.add(t.stdout),t.stderr&&r.add(t.stderr),r},uo=async(t,e)=>{if(!(!t||e===void 0)){t.destroy();try{return await e}catch(r){return r.bufferedData}}},fo=(t,{encoding:e,buffer:r,maxBuffer:n})=>{if(!(!t||!r))return e?(0,ho.default)(t,{encoding:e,maxBuffer:n}):ho.default.buffer(t,{maxBuffer:n})},xa=async({stdout:t,stderr:e,all:r},{encoding:n,buffer:o,maxBuffer:s},i)=>{let a=fo(t,{encoding:n,buffer:o,maxBuffer:s}),c=fo(e,{encoding:n,buffer:o,maxBuffer:s}),l=fo(r,{encoding:n,buffer:o,maxBuffer:s*2});try{return await Promise.all([i,a,c,l])}catch(d){return Promise.all([{error:d,signal:d.signal,timedOut:d.timedOut},uo(t,a),uo(e,c),uo(r,l)])}};var ud=(async()=>{})().constructor.prototype,fd=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(ud,t)]),po=(t,e)=>{for(let[r,n]of fd){let o=typeof e=="function"?(...s)=>Reflect.apply(n.value,e(),s):n.value.bind(e);Reflect.defineProperty(t,r,{...n,value:o})}return t},Ea=t=>new Promise((e,r)=>{t.on("exit",(n,o)=>{e({exitCode:n,signal:o})}),t.on("error",n=>{r(n)}),t.stdin&&t.stdin.on("error",n=>{r(n)})});var Sa=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],dd=/^[\w.-]+$/,hd=/"/g,pd=t=>typeof t!="string"||dd.test(t)?t:`"${t.replace(hd,'\\"')}"`,va=(t,e)=>Sa(t,e).join(" "),Ia=(t,e)=>Sa(t,e).map(r=>pd(r)).join(" ");var md=1e3*1e3*100,gd=({env:t,extendEnv:e,preferLocal:r,localDir:n,execPath:o})=>{let s=e?{...cr.default.env,...t}:t;return r?Vi({env:s,cwd:n,execPath:o}):s},bd=(t,e,r={})=>{let n=Ca.default._parse(t,e,r);return t=n.command,e=n.args,r=n.options,r={maxBuffer:md,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||cr.default.cwd(),execPath:cr.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=gd(r),r.stdio=Zi(r),cr.default.platform==="win32"&&Aa.default.basename(t,".exe")==="cmd"&&e.unshift("/q"),{file:t,args:e,options:r,parsed:n}},mo=(t,e,r)=>typeof e!="string"&&!Ta.Buffer.isBuffer(e)?r===void 0?void 0:"":t.stripFinalNewline?no(e):e;function Pa(t,e,r){let n=bd(t,e,r),o=va(t,e),s=Ia(t,e);la(n.options);let i;try{i=go.default.spawn(n.file,n.args,n.options)}catch(v){let T=new go.default.ChildProcess,x=Promise.reject(io({error:v,stdout:"",stderr:"",all:"",command:o,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return po(T,x)}let a=Ea(i),c=ca(i,n.options,a),l=ua(i,n.options,c),d={isCanceled:!1};i.kill=ia.bind(null,i.kill.bind(i)),i.cancel=aa.bind(null,i,d);let m=Gi(async()=>{let[{error:v,exitCode:T,signal:x,timedOut:b},C,S,I]=await xa(i,n.options,l),P=mo(n.options,C),R=mo(n.options,S),z=mo(n.options,I);if(v||T!==0||x!==null){let ee=io({error:v,exitCode:T,signal:x,stdout:P,stderr:R,all:z,command:o,escapedCommand:s,parsed:n,timedOut:b,isCanceled:d.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:i.killed});if(!n.options.reject)return ee;throw ee}return{command:o,escapedCommand:s,exitCode:0,stdout:P,stderr:R,all:z,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return ya(i,n.options.input),i.all=wa(i,n.options),po(i,m)}var he=require("fs");var yd=require("@raycast/api"),La=require("crypto");var ka="foobarbazzybaz";function Ra(t){return Object.entries(t).flatMap(([e,r])=>{switch(typeof r){case"boolean":return r?[`--${e}`]:[];case"string":return[`--${e}`,r];default:return[]}})}function bo(t){return new Promise((e,r)=>{(0,La.pbkdf2)(t,ka,1e5,64,"sha512",(n,o)=>{if(n!=null){r(n);return}e(o.toString("hex"))})})}var lr=require("@raycast/api");var wd={IMMEDIATELY:"0",ONE_MINUTE:"60000",FIVE_MINUTES:"300000",FIFTEEN_MINUTES:"900000",THIRTY_MINUTES:"1800000",ONE_HOUR:"3600000",FOUR_HOURS:"14400000",EIGHT_HOURS:"28800000",ONE_DAY:"86400000",NEVER:"-1",SYSTEM_LOCK:"-2",SYSTEM_SLEEP:"-3"},ae=Object.entries(wd).reduce((t,[e,r])=>(t[e]=parseInt(r),t),{});var $a={[ae.IMMEDIATELY]:"Immediately",[ae.ONE_MINUTE]:"1 Minute",[ae.FIVE_MINUTES]:"5 Minutes",[ae.FIFTEEN_MINUTES]:"15 Minutes",[ae.THIRTY_MINUTES]:"30 Minutes",[ae.ONE_HOUR]:"1 Hour",[ae.FOUR_HOURS]:"4 Hours",[ae.EIGHT_HOURS]:"8 Hours",[ae.ONE_DAY]:"1 Day"},_a={cardholderName:"Cardholder name",brand:"Brand",number:"Number",expMonth:"Expiration month",expYear:"Expiration year",code:"Security code (CVV)"};var Oa={1:"Login",3:"Card",4:"Identity",2:"Secure Note",5:"SSH Key"};function rn(){let{serverUrl:t}=(0,lr.getPreferenceValues)();return!t||t==="bitwarden.com"||t==="https://bitwarden.com"?void 0:t}var xd={search:"transientCopySearch","generate-password":"transientCopyGeneratePassword","generate-password-quick":"transientCopyGeneratePasswordQuick"};function Na(t){let e=xd[lr.environment.commandName],r=(0,lr.getPreferenceValues)()[e];return r==="never"?!1:r==="always"?!0:r==="passwords"?t==="password":!0}function Da(t){return $a[t]}var Ze=require("path"),Je=require("fs/promises");var Oe=require("fs"),sn=require("fs/promises"),Ga=require("path"),za=te(Ha());function an(t){return new Promise((e,r)=>{let n=setInterval(()=>{if(!(0,Oe.existsSync)(t))return;(0,Oe.statSync)(t).isFile()&&(clearInterval(n),e())},300);setTimeout(()=>{clearInterval(n),r(new Error(`File ${t} not found.`))},5e3)})}async function Wa(t,e){let r=new za.default.async({file:t});(0,Oe.existsSync)(e)||(0,Oe.mkdirSync)(e,{recursive:!0}),await r.extract(null,e),await r.close()}async function ja(t,e){let r=!1;try{let n=await(0,sn.readdir)(e);for await(let o of n)o.startsWith(t)&&await ze(async()=>{await(0,sn.unlink)((0,Ga.join)(e,o)),r=!0})}catch{return!1}return r}function Ka(...t){for(let e of t)ze(()=>(0,Oe.unlinkSync)(e))}var Vt=require("fs"),Ao=te(require("http")),cn=te(require("https"));var Xa=require("fs"),qa=require("crypto");function To(t){try{return(0,qa.createHash)("sha256").update((0,Xa.readFileSync)(t)).digest("hex")}catch{return null}}function Co(t,e,r){let{onProgress:n,sha256:o}=r??{};return new Promise((s,i)=>{let a=new URL(t),c=a.protocol==="https:"?cn.default:Ao.default,l=new(c===cn.default?cn.default:Ao.default).Agent({keepAlive:!1}),d=0,f=c.get(a.href,{agent:l},m=>{if(m.statusCode&&m.statusCode>=300&&m.statusCode<400){f.destroy(),m.destroy();let S=m.headers.location;if(!S){i(new Error("Redirect response without location header"));return}if(++d>=10){i(new Error("Too many redirects"));return}Co(S,e,r).then(s).catch(i);return}if(m.statusCode!==200){i(new Error(`Response status ${m.statusCode}: ${m.statusMessage}`));return}let v=parseInt(m.headers["content-length"]||"0",10);if(v===0){i(new Error("Invalid file size"));return}let T=(0,Vt.createWriteStream)(e,{autoClose:!0}),x=0,b=()=>{f.destroy(),m.destroy(),T.close()},C=S=>{b(),i(S)};m.on("data",S=>{x+=S.length;let I=Math.floor(x/v*100);n?.(I)}),T.on("finish",async()=>{try{await an(e),o&&await Sd(e,o),s()}catch(S){i(S)}finally{b()}}),T.on("error",S=>{A(`File stream error while downloading ${t}`,S),(0,Vt.unlink)(e,()=>C(S))}),m.on("error",S=>{A(`Response error while downloading ${t}`,S),(0,Vt.unlink)(e,()=>C(S))}),f.on("error",S=>{A(`Request error while downloading ${t}`,S),(0,Vt.unlink)(e,()=>C(S))}),m.pipe(T)})})}function Sd(t,e){return new Promise((r,n)=>{let o=To(t);if(!o)return n(new Error(`Could not generate hash for file ${t}.`));if(o===e)return r();let s=setInterval(()=>{To(t)===e&&(clearInterval(s),clearTimeout(i),r())},1e3),i=setTimeout(()=>{clearInterval(s),n(new Error(`Hash did not match, expected ${e.substring(0,7)}, got ${o.substring(0,7)}.`))},5e3)})}function Ya(t,e){return{...t,...e,file:e.file?{...t.file,...e.file}:t.file,text:e.text?{...t.text,...e.text}:t.text}}var Za=require("@raycast/api"),ce=new Za.Cache({namespace:"bw-cache"});var Q=process.platform==="darwin"?"macos":"windows";var{supportPath:Ye}=q.environment,vd="5",ln=(()=>{let t=(0,Ze.join)(Ye,`bw-bin-download-error-${vd}.log`);return{logError:e=>ze(()=>(0,he.writeFileSync)(t,e?.message??"Unexpected error")),clearError:()=>ze(()=>(0,he.unlinkSync)(t)),hasError:()=>ze(()=>(0,he.existsSync)(t),!1)}})(),de={version:"2025.11.0",get sha256(){return Q==="windows"?"0484bae6306762881678097406d6bf00a58e291720dbc7d62f044e5f4d8286ed":process.arch==="arm64"?"59eac955be7b15bfc21c81101a194a9fbba32f48a61154b4f4b6e007efab6fd6":"213108a65eeb7294ffcd7303f8fe5308dc2af970735aefeb4d23fc9753a2ac01"},downloadPage:"https://github.com/bitwarden/clients/releases",path:{get downloadedBin(){return(0,Ze.join)(Ye,de.binFilenameVersioned)},get installedBin(){return Q==="windows"?"C:\\ProgramData\\chocolatey\\bin\\bw.exe":process.arch==="arm64"?"/opt/homebrew/bin/bw":"/usr/local/bin/bw"},get bin(){return ln.hasError()?this.installedBin:this.downloadedBin}},get binFilename(){return Q==="windows"?"bw.exe":"bw"},get binFilenameVersioned(){let t=`bw-${this.version}`;return Q==="windows"?`${t}.exe`:`${t}`},get downloadUrl(){let t="";return Q==="macos"&&(t=process.arch==="arm64"?"-arm64":""),`${this.downloadPage}/download/cli-v${this.version}/bw-${Q}${t}-${this.version}.zip`}},un=class{constructor(e){this.actionListeners=new Map;this.preferences=(0,q.getPreferenceValues)();this.wasCliUpdated=!1;this.showToast=async e=>{if(this.toastInstance){let r={message:this.toastInstance.message,title:this.toastInstance.title,primaryAction:this.toastInstance.primaryAction,secondaryAction:this.toastInstance.secondaryAction};return e.style&&(this.toastInstance.style=e.style),this.toastInstance.message=e.message,this.toastInstance.title=e.title,this.toastInstance.primaryAction=e.primaryAction,this.toastInstance.secondaryAction=e.secondaryAction,await this.toastInstance.show(),Object.assign(this.toastInstance,{restore:async()=>{await this.showToast(r)}})}else{let r=await(0,q.showToast)(e);return Object.assign(r,{restore:()=>r.hide()})}};let{cliPath:r,clientId:n,clientSecret:o,serverCertsPath:s}=this.preferences,i=rn();this.toastInstance=e,this.cliPath=r||de.path.bin,this.env={BITWARDENCLI_APPDATA_DIR:Ye,BW_CLIENTSECRET:o.trim(),BW_CLIENTID:n.trim(),PATH:(0,Ze.dirname)(process.execPath),...i&&s?{NODE_EXTRA_CA_CERTS:s}:{}},this.initPromise=(async()=>{await this.ensureCliBinary(),this.retrieveAndCacheCliVersion(),await this.checkServerUrl(i)})()}async ensureCliBinary(){if(this.checkCliBinIsReady(this.cliPath))return;if(this.cliPath===this.preferences.cliPath||this.cliPath===de.path.installedBin)throw new Ge(`Bitwarden CLI not found at ${this.cliPath}`);ln.hasError()&&ln.clearError();let e=await ja("bw-",Ye),r=await this.showToast({title:`${e?"Updating":"Initializing"} Bitwarden CLI`,style:q.Toast.Style.Animated,primaryAction:{title:"Open Download Page",onAction:()=>(0,q.open)(de.downloadPage)}}),o=(0,Ze.join)(Ye,"bw.zip");try{try{r.message="Downloading...",await Co(de.downloadUrl,o,{onProgress:s=>r.message=`Downloading ${s}%`,sha256:de.sha256})}catch(s){throw r.title="Failed to download Bitwarden CLI",s}try{r.message="Extracting...",await Wa(o,Ye);let s=(0,Ze.join)(Ye,de.binFilename);await(0,Je.rename)(s,this.cliPath).catch(()=>null),await an(this.cliPath),await(0,Je.chmod)(this.cliPath,"755"),await(0,Je.rm)(o,{force:!0}),ce.set(fe.CLI_VERSION,de.version),this.wasCliUpdated=!0;let i=(0,Ze.join)(Ye,"data.json");await ze(()=>(0,Je.unlink)(i))}catch(s){throw r.title="Failed to extract Bitwarden CLI",s}await r.hide()}catch(s){throw r.message=s instanceof mt?s.message:"Please try again",r.style=q.Toast.Style.Failure,Ka(o,this.cliPath),q.environment.isDevelopment||ln.logError(s),s instanceof Error?new mt(s.message,s.stack):s}finally{await r.restore()}}async retrieveAndCacheCliVersion(){try{let{error:e,result:r}=await this.getVersion();e||ce.set(fe.CLI_VERSION,r)}catch(e){A("Failed to retrieve and cache cli version",e,{captureToRaycast:!0})}}checkCliBinIsReady(e){try{return(0,he.existsSync)(this.cliPath)?((0,he.accessSync)(e,he.constants.X_OK),!0):!1}catch{return(0,he.chmodSync)(e,"755"),!0}}setSessionToken(e){this.env={...this.env,BW_SESSION:e}}clearSessionToken(){delete this.env.BW_SESSION}withSession(e){return this.tempSessionToken=e,this}async initialize(){return await this.initPromise,this}async checkServerUrl(e){let r=await q.LocalStorage.getItem(V.SERVER_URL);if(!e||r===e)return;let n=await this.showToast({style:q.Toast.Style.Animated,title:"Switching server...",message:"Bitwarden server preference changed"});try{try{await this.logout()}catch{}await this.exec(["config","server",e||Zs],{resetVaultTimeout:!1}),await q.LocalStorage.setItem(V.SERVER_URL,e),n.style=q.Toast.Style.Success,n.title="Success",n.message="Bitwarden server changed"}catch(o){n.style=q.Toast.Style.Failure,n.title="Failed to switch server",o instanceof Error?n.message=o.message:n.message="Unknown error occurred"}finally{await n.restore()}}async exec(e,r){let{abortController:n,input:o="",resetVaultTimeout:s,env:i}=r??{},a=this.env;this.tempSessionToken&&(a={...a,BW_SESSION:this.tempSessionToken},this.tempSessionToken=void 0),i&&(a={...a,...i});let c=await Pa(this.cliPath,e,{input:o,env:a,signal:n?.signal});if(this.isPromptWaitingForMasterPassword(c))throw await this.lock(),new Vr;return s&&await q.LocalStorage.setItem(V.LAST_ACTIVITY_TIME,new Date().toISOString()),c}async getVersion(){try{let{stdout:e}=await this.exec(["--version"],{resetVaultTimeout:!1});return{result:e}}catch(e){A("Failed to get cli version",e);let{error:r}=await this.handleCommonErrors(e);if(!r)throw e;return{error:r}}}async login(){try{return await this.exec(["login","--apikey"],{resetVaultTimeout:!0}),await this.saveLastVaultStatus("login","unlocked"),await this.callActionListeners("login"),{result:void 0}}catch(e){A("Failed to login",e);let{error:r}=await this.handleCommonErrors(e);if(!r)throw e;return{error:r}}}async logout(e){let{reason:r,immediate:n=!1}=e??{};try{return n&&await this.handlePostLogout(r),await this.exec(["logout"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("logout","unauthenticated"),n||await this.handlePostLogout(r),{result:void 0}}catch(o){A("Failed to logout",o);let{error:s}=await this.handleCommonErrors(o);if(!s)throw o;return{error:s}}}async lock(e){let{reason:r,checkVaultStatus:n=!1,immediate:o=!1}=e??{};try{if(o&&await this.callActionListeners("lock",r),n){let{error:s,result:i}=await this.status();if(s)throw s;if(i.status==="unauthenticated")return{error:new tr("Not logged in")}}return await this.exec(["lock"],{resetVaultTimeout:!1}),this.clearSessionToken(),await this.saveLastVaultStatus("lock","locked"),o||await this.callActionListeners("lock",r),{result:void 0}}catch(s){A("Failed to lock vault",s);let{error:i}=await this.handleCommonErrors(s);if(!i)throw s;return{error:i}}}async unlock(e){try{this.clearSessionToken();let n=(await this.exec(["unlock","--passwordenv","BW_PASSWORD","--raw"],{resetVaultTimeout:!0,env:{BW_PASSWORD:e}})).stdout;if(!n.trim())throw new Error("Invalid session token");return this.setSessionToken(n),await this.saveLastVaultStatus("unlock","unlocked"),await this.callActionListeners("unlock",e,n),{result:n}}catch(r){A("Failed to unlock vault",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async sync(){try{return await this.exec(["sync"],{resetVaultTimeout:!0}),{result:void 0}}catch(e){A("Failed to sync vault",e);let{error:r}=await this.handleCommonErrors(e);if(!r)throw e;return{error:r}}}async getItem(e){try{let{stdout:r}=await this.exec(["get","item",e],{resetVaultTimeout:!0});return{result:JSON.parse(r)}}catch(r){A("Failed to get item",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async listItems(){try{let{stdout:e}=await this.exec(["list","items"],{resetVaultTimeout:!0});return{result:JSON.parse(e).filter(n=>!!n.name)}}catch(e){A("Failed to list items",e);let{error:r}=await this.handleCommonErrors(e);if(!r)throw e;return{error:r}}}async createLoginItem(e){try{let{error:r,result:n}=await this.getTemplate("item");if(r)throw r;let{error:o,result:s}=await this.getTemplate("item.login");if(o)throw o;n.name=e.name,n.type=1,n.folderId=e.folderId||null,n.login=s,n.notes=null,s.username=e.username||null,s.password=e.password,s.totp=null,s.fido2Credentials=void 0,e.uri&&(s.uris=[{match:null,uri:e.uri}]);let{result:i,error:a}=await this.encode(JSON.stringify(n));if(a)throw a;let{stdout:c}=await this.exec(["create","item",i],{resetVaultTimeout:!0});return{result:JSON.parse(c)}}catch(r){A("Failed to create login item",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async listFolders(){try{let{stdout:e}=await this.exec(["list","folders"],{resetVaultTimeout:!0});return{result:JSON.parse(e)}}catch(e){A("Failed to list folder",e);let{error:r}=await this.handleCommonErrors(e);if(!r)throw e;return{error:r}}}async createFolder(e){try{let{error:r,result:n}=await this.getTemplate("folder");if(r)throw r;n.name=e;let{result:o,error:s}=await this.encode(JSON.stringify(n));if(s)throw s;return await this.exec(["create","folder",o],{resetVaultTimeout:!0}),{result:void 0}}catch(r){A("Failed to create folder",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async getTotp(e){try{let{stdout:r}=await this.exec(["get","totp",e],{resetVaultTimeout:!0});return{result:r}}catch(r){A("Failed to get TOTP",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async status(){try{let{stdout:e}=await this.exec(["status"],{resetVaultTimeout:!1});return{result:JSON.parse(e)}}catch(e){A("Failed to get status",e);let{error:r}=await this.handleCommonErrors(e);if(!r)throw e;return{error:r}}}async checkLockStatus(){try{return await this.exec(["unlock","--check"],{resetVaultTimeout:!1}),await this.saveLastVaultStatus("checkLockStatus","unlocked"),"unlocked"}catch(e){return A("Failed to check lock status",e),e.stderr==="Vault is locked."?(await this.saveLastVaultStatus("checkLockStatus","locked"),"locked"):(await this.saveLastVaultStatus("checkLockStatus","unauthenticated"),"unauthenticated")}}async getTemplate(e){try{let{stdout:r}=await this.exec(["get","template",e],{resetVaultTimeout:!0});return{result:JSON.parse(r)}}catch(r){A("Failed to get template",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async encode(e){try{let{stdout:r}=await this.exec(["encode"],{input:e,resetVaultTimeout:!1});return{result:r}}catch(r){A("Failed to encode",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async generatePassword(e,r){let n=e?Ra(e):[],{stdout:o}=await this.exec(["generate",...n],{abortController:r,resetVaultTimeout:!1});return o}async listSends(){try{let{stdout:e}=await this.exec(["send","list"],{resetVaultTimeout:!0});return{result:JSON.parse(e)}}catch(e){A("Failed to list sends",e);let{error:r}=await this.handleCommonErrors(e);if(!r)throw e;return{error:r}}}async createSend(e){try{let{error:r,result:n}=await this.getTemplate(e.type===0?"send.text":"send.file");if(r)throw r;let o=Ya(n,e),{result:s,error:i}=await this.encode(JSON.stringify(o));if(i)throw i;let{stdout:a}=await this.exec(["send","create",s],{resetVaultTimeout:!0});return{result:JSON.parse(a)}}catch(r){A("Failed to create send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async editSend(e){try{let{result:r,error:n}=await this.encode(JSON.stringify(e));if(n)throw n;let{stdout:o}=await this.exec(["send","edit",r],{resetVaultTimeout:!0});return{result:JSON.parse(o)}}catch(r){A("Failed to delete send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async deleteSend(e){try{return await this.exec(["send","delete",e],{resetVaultTimeout:!0}),{result:void 0}}catch(r){A("Failed to delete send",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async removeSendPassword(e){try{return await this.exec(["send","remove-password",e],{resetVaultTimeout:!0}),{result:void 0}}catch(r){A("Failed to remove send password",r);let{error:n}=await this.handleCommonErrors(r);if(!n)throw r;return{error:n}}}async receiveSendInfo(e,r){try{let{stdout:n,stderr:o}=await this.exec(["send","receive",e,"--obj"],{resetVaultTimeout:!0,input:r?.password});return!n&&/Invalid password/i.test(o)?{error:new nr}:!n&&/Send password/i.test(o)?{error:new rr}:{result:JSON.parse(n)}}catch(n){let o=n.stderr;if(/Invalid password/gi.test(o))return{error:new nr};if(/Send password/gi.test(o))return{error:new rr};A("Failed to receive send obj",n);let{error:s}=await this.handleCommonErrors(n);if(!s)throw n;return{error:s}}}async receiveSend(e,r){try{let{savePath:n,password:o}=r??{},s=["send","receive",e];n&&s.push("--output",n);let{stdout:i}=await this.exec(s,{resetVaultTimeout:!0,input:o});return{result:i}}catch(n){A("Failed to receive send",n);let{error:o}=await this.handleCommonErrors(n);if(!o)throw n;return{error:o}}}async saveLastVaultStatus(e,r){await q.LocalStorage.setItem(V.VAULT_LAST_STATUS,r)}async getLastSavedVaultStatus(){let e=await q.LocalStorage.getItem(V.VAULT_LAST_STATUS);return e||(await this.status()).result?.status}isPromptWaitingForMasterPassword(e){return!!(e.stderr&&e.stderr.includes("Master password"))}async handlePostLogout(e){this.clearSessionToken(),await this.callActionListeners("logout",e)}async handleCommonErrors(e){let r=e.stderr;return r?/not logged in/i.test(r)?(await this.handlePostLogout(),{error:new tr("Not logged in")}):/Premium status/i.test(r)?{error:new Hr}:{}:{}}setActionListener(e,r){let n=this.actionListeners.get(e);return n&&n.size>0?n.add(r):this.actionListeners.set(e,new Set([r])),this}removeActionListener(e,r){let n=this.actionListeners.get(e);return n&&n.size>0&&n.delete(r),this}async callActionListeners(e,...r){let n=this.actionListeners.get(e);if(n&&n.size>0)for(let o of n)try{await o?.(...r)}catch(s){if(A(`Error calling bitwarden action listener for ${e}`,s),e==="unlock")throw s}}};var Ja=require("@raycast/api"),ec=require("react/jsx-runtime"),Qa=()=>(0,ec.jsx)(Ja.Form,{isLoading:!0});var fn=require("react");function Id(t,e){let r=(0,fn.useRef)(!1);(0,fn.useEffect)(()=>{r.current||e!==void 0&&!e||(r.current=!0,t())},[e])}var Pe=Id;var dn=require("react/jsx-runtime"),tc=(0,St.createContext)(null),rc=({children:t,loadingFallback:e=(0,dn.jsx)(Qa,{})})=>{let[r,n]=(0,St.useState)(),[o,s]=(0,St.useState)();Pe(()=>{new un().initialize().then(n).catch(i)});function i(a){if(a instanceof Ge)s(a);else throw a}return o?(0,dn.jsx)(ur,{error:o}):r?(0,dn.jsx)(tc.Provider,{value:r,children:t}):e},ye=()=>{let t=(0,St.useContext)(tc);if(t==null)throw new Error("useBitwarden must be used within a BitwardenProvider");return t};function nc(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function oc(t,e){try{let r=t,n;return r?.stderr?n=r.stderr:t instanceof Error?n=`${t.name}: ${t.message}`:nc(t)?n=JSON.stringify(t):n=`${t}`,n?e?.omitSensitiveValue?Td(n,e.omitSensitiveValue):n:""}catch{return""}}function Td(t,e){return t.replace(new RegExp(e,"i"),"[REDACTED]")}var ke=require("@raycast/api"),hn=require("react");function Ad(){let t=ye(),[e,r]=(0,hn.useState)(null);(0,hn.useEffect)(()=>{t.status().then(({error:i,result:a})=>{i||r(a)}).catch(()=>{})},[]);let n=!!rn(),o="...",s="...";if(e){let{status:i,userEmail:a,serverUrl:c}=e;o=i=="unauthenticated"?"\u274C Logged out":`\u{1F512} Locked (${a})`,c?s=c||"":(!c&&n||c&&!n)&&(0,ke.confirmAlert)({icon:ke.Icon.ExclamationMark,title:"Restart Required",message:"Bitwarden server URL preference has been changed since the extension was opened.",primaryAction:{title:"Close Extension"},dismissAction:{title:"Close Raycast",style:ke.Alert.ActionStyle.Cancel}}).then(l=>{l?(0,ke.popToRoot)():(0,ke.closeMainWindow)()})}return{userMessage:o,serverMessage:s,shouldShowServer:n}}var sc=Ad;var pn=require("@raycast/api");function ic(t,e){let{data:r,revalidate:n,isLoading:o}=Tr(()=>pn.LocalStorage.getItem(t));return[r??e,{isLoading:o,set:async a=>{await pn.LocalStorage.setItem(t,a),await n()},remove:async()=>{await pn.LocalStorage.removeItem(t),await n()}}]}var J=require("react/jsx-runtime"),Cd=({pendingAction:t=Promise.resolve()})=>{let e=ye(),{userMessage:r,serverMessage:n,shouldShowServer:o}=sc(),[s,i]=(0,fr.useState)(!1),[a,c]=(0,fr.useState)(),[l,d]=(0,fr.useState)(!1),[f,m]=(0,fr.useState)(""),[v,{remove:T}]=ic(V.VAULT_LOCK_REASON);async function x(){if(f.length!==0)try{i(!0),c(void 0),await t;let P=await(0,N.showToast)({title:"Validating...",message:"Please wait",style:N.Toast.Style.Animated}),{error:R,result:z}=await e.status();if(R)throw R;if(z.status==="unauthenticated")try{P.title="Logging in...";let{error:W}=await e.login();if(W)throw W}catch(W){return b(W,{title:"Failed to log in",fallbackMessage:`Please check your ${o?"Server URL, ":""}API Key and Secret.`})}P.title="Unlocking vault...";let{error:ee}=await e.unlock(f);if(ee)return b(ee,{title:"Failed to unlock vault",fallbackMessage:"Please check your credentials"});P.title="Vault unlocked",P.style=N.Toast.Style.Success,P.message=void 0,await T()}catch(P){await b(P,{title:"Failed to unlock vault",fallbackMessage:"Please check your credentials"})}finally{i(!1)}}async function b(P,R){let{title:z,fallbackMessage:ee}=R,{displayableError:W=ee,treatedError:Y}=kd(P,f);c(Y),await(0,N.showToast)({title:z,message:W,style:N.Toast.Style.Failure,primaryAction:{title:"Copy Error",onAction:C}}),A("Failed to unlock vault",P)}let C=async()=>{a&&(await N.Clipboard.copy(a),await(0,N.showToast)(N.Toast.Style.Success,"Error copied to clipboard"))},S=N.Form.PasswordField,I="password";return l&&(S=N.Form.TextField,I="plainPassword"),(0,J.jsxs)(N.Form,{actions:(0,J.jsxs)(N.ActionPanel,{children:[!s&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(N.Action.SubmitForm,{icon:N.Icon.LockUnlocked,title:"Submit",onSubmit:x}),(0,J.jsx)(N.Action,{icon:l?N.Icon.EyeDisabled:N.Icon.Eye,title:l?"Hide Password":"Show Password",onAction:()=>d(P=>!P),shortcut:{macOS:{key:"e",modifiers:["opt"]},Windows:{key:"e",modifiers:["alt"]}}})]}),a&&(0,J.jsx)(N.Action,{onAction:C,title:"Copy Last Error",icon:N.Icon.Bug,style:N.Action.Style.Destructive}),(0,J.jsx)(dr,{})]}),children:[o&&(0,J.jsx)(N.Form.Description,{title:"Server URL",text:n}),(0,J.jsx)(N.Form.Description,{title:"Vault Status",text:r}),(0,J.jsx)(S,{id:I,title:"Master Password",value:f,onChange:m,ref:P=>P?.focus()}),(0,J.jsx)(N.Form.Description,{title:"",text:`Press ${Q==="macos"?"\u2325":"Alt"}+E to ${l?"hide":"show"} password`}),!!v&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(N.Form.Description,{title:"\u2139\uFE0F",text:v}),(0,J.jsx)(Pd,{})]})]})};function Pd(){let t=(0,N.getPreferenceValues)().repromptIgnoreDuration,e=Da(t);return e?(0,J.jsx)(N.Form.Description,{title:"",text:`Timeout is set to ${e}, this can be configured in the extension settings`}):null}function kd(t,e){let r=oc(t,{omitSensitiveValue:e}),n;return/Invalid master password/i.test(r)?n="Invalid master password":/Invalid API Key/i.test(r)&&(n="Invalid Client ID or Secret"),{displayableError:n,treatedError:r}}var ac=Cd;var cc=require("@raycast/api"),uc=require("react/jsx-runtime"),lc=()=>(0,uc.jsx)(cc.List,{searchBarPlaceholder:"Search vault",isLoading:!0});var fc=require("react"),Ld={token:void 0,passwordHash:void 0,isLoading:!0,isLocked:!1,isAuthenticated:!1},dc=()=>(0,fc.useReducer)((t,e)=>{switch(e.type){case"loadState":{let{type:r,...n}=e;return{...t,...n}}case"lock":return{...t,token:void 0,passwordHash:void 0,isLoading:!1,isLocked:!0};case"unlock":return{...t,token:e.token,passwordHash:e.passwordHash,isLocked:!1,isAuthenticated:!0};case"logout":return{...t,token:void 0,passwordHash:void 0,isLocked:!0,isAuthenticated:!1,isLoading:!1};case"vaultTimeout":return{...t,isLocked:!0};case"finishLoadingSavedState":{if(!t.token||!t.passwordHash)throw new Error("Missing required fields: token, passwordHash");let r=!!t.token;return{...t,isLoading:!1,isLocked:!r,isAuthenticated:r}}case"failLoadingSavedState":return{...t,isLoading:!1,isLocked:!0};default:return t}},Ld);var we=require("@raycast/api");var hc=require("child_process"),pc=require("util");var Rd=(0,pc.promisify)(hc.exec),hr={getSavedSession:()=>Promise.all([we.LocalStorage.getItem(V.SESSION_TOKEN),we.LocalStorage.getItem(V.REPROMPT_HASH),we.LocalStorage.getItem(V.LAST_ACTIVITY_TIME),we.LocalStorage.getItem(V.VAULT_LAST_STATUS)]),clearSession:async()=>{await Promise.all([we.LocalStorage.removeItem(V.SESSION_TOKEN),we.LocalStorage.removeItem(V.REPROMPT_HASH)])},saveSession:async(t,e)=>{await Promise.all([we.LocalStorage.setItem(V.SESSION_TOKEN,t),we.LocalStorage.setItem(V.REPROMPT_HASH,e)])},logoutClearSession:async()=>{await Promise.all([we.LocalStorage.removeItem(V.SESSION_TOKEN),we.LocalStorage.removeItem(V.REPROMPT_HASH),we.LocalStorage.removeItem(V.LAST_ACTIVITY_TIME)])}},mc=t=>yc(t,e=>bc(e,"handleUnlockResult")),gc=t=>yc(t,e=>bc(e,"sleep 0"));function bc(t,e){return Rd(`log show --style syslog --predicate "process == 'loginwindow'" --info --last ${t}h | grep "${e}" | tail -n 1`)}async function yc(t,e){let r=await wc(e);return r?new Date(r).getTime()>t.getTime():!0}var $d=2,_d=5;async function wc(t,e=1,r=0){try{if(r>_d){js("Max retry attempts reached to get last screen lock time");return}let{stdout:n,stderr:o}=await t(e),[s,i]=n?.split(" ")??[];if(o||!s||!i)return wc(t,e+$d,r+1);let a=new Date(`${s}T${i}`);return!a||a.toString()==="Invalid Date"?void 0:a}catch(n){A("Failed to get last screen lock time",n);return}}var mn=require("react/jsx-runtime"),xc=(0,et.createContext)(null);function Po(t){let{children:e,loadingFallback:r=(0,mn.jsx)(lc,{}),unlock:n}=t,o=ye(),[s,i]=dc(),a=(0,et.useRef)(Promise.resolve());Pe(c,o);async function c(){try{o.setActionListener("lock",d).setActionListener("unlock",l).setActionListener("logout",f);let[b,C,S,I]=await hr.getSavedSession();if(!b||!C)throw new Qe;if(i({type:"loadState",token:b,passwordHash:C}),o.setSessionToken(b),o.wasCliUpdated)throw new pr(yt.CLI_UPDATED);if(I==="locked")throw new Qe;if(I==="unauthenticated")throw new pr;if(S){let P=new Date(S),R=+(0,Ht.getPreferenceValues)().repromptIgnoreDuration;if(Q==="macos"&&R===ae.SYSTEM_LOCK){if(await mc(P))throw new Qe(yt.SYSTEM_LOCK)}else if(Q==="macos"&&R===ae.SYSTEM_SLEEP){if(await gc(P))throw new Qe(yt.SYSTEM_SLEEP)}else if(R!==ae.NEVER){let z=Date.now()-P.getTime();if(R===ae.IMMEDIATELY||z>=R)throw new Qe(yt.TIMEOUT)}}i({type:"finishLoadingSavedState"})}catch(b){b instanceof Qe?a.current=o.lock({reason:b.message,immediate:!0,checkVaultStatus:!0}):b instanceof pr?a.current=o.logout({reason:b.message,immediate:!0}):(a.current=o.lock({immediate:!0}),i({type:"failLoadingSavedState"}),A("Failed to bootstrap session state",b))}}async function l(b,C){let S=await bo(b);await hr.saveSession(C,S),await Ht.LocalStorage.removeItem(V.VAULT_LOCK_REASON),i({type:"unlock",token:C,passwordHash:S})}async function d(b){await Od(),b&&await Ht.LocalStorage.setItem(V.VAULT_LOCK_REASON,b),i({type:"lock"})}async function f(b){await Nd(),b&&await Ht.LocalStorage.setItem(V.VAULT_LOCK_REASON,b),i({type:"logout"})}async function m(b){return await bo(b)===s.passwordHash}let v=(0,et.useMemo)(()=>({token:s.token,isLoading:s.isLoading,isAuthenticated:s.isAuthenticated,isLocked:s.isLocked,active:!s.isLoading&&s.isAuthenticated&&!s.isLocked,confirmMasterPassword:m}),[s,m]);if(s.isLoading)return r;let T=s.isLocked||!s.isAuthenticated,x=s.token?e:null;return(0,mn.jsx)(xc.Provider,{value:v,children:T&&n?(0,mn.jsx)(ac,{pendingAction:a.current}):x})}async function Od(){await hr.clearSession()}async function Nd(){await hr.logoutClearSession(),ce.clear()}function gn(){let t=(0,et.useContext)(xc);if(t==null)throw new Error("useSession must be used within a SessionProvider");return t}var Qe=class extends Error{constructor(e){super(e)}},pr=class extends Error{constructor(e){super(e)}};var Sc=require("react/jsx-runtime");function Dd(t,e){let{description:r="Performing an action that requires the master password"}=e??{},n=gn(),{push:o,pop:s}=(0,Gt.useNavigation)();async function i(a){if(!await n.confirmMasterPassword(a)){await(0,Gt.showToast)(Gt.Toast.Style.Failure,"Failed to unlock vault","Check your credentials");return}s(),setTimeout(t,1)}return()=>o((0,Sc.jsx)(Ys,{description:r,onConfirm:i}))}var Ec=Dd;var Ic=require("react/jsx-runtime");function Ud(t){let{repromptDescription:e,onAction:r,...n}=t,{reprompt:o}=or(),s=Ec(r,{description:e});return(0,Ic.jsx)(vc.Action,{...n,onAction:o?s:r})}var ko=Ud;var ne=require("@raycast/api");var Tc=require("child_process"),Ac=require("util");var Lo=require("fs"),Cc=require("path");var Pc=require("react/jsx-runtime"),Md=(0,Ac.promisify)(Tc.exec),{supportPath:Bd}=ne.environment,Fd=()=>{let{clientId:t,clientSecret:e,fetchFavicons:r,generatePasswordQuickAction:n,repromptIgnoreDuration:o,serverCertsPath:s,serverUrl:i,shouldCacheVaultItems:a,transientCopyGeneratePassword:c,transientCopyGeneratePasswordQuick:l,transientCopySearch:d,windowActionOnCopy:f}=(0,ne.getPreferenceValues)();return{has_clientId:!!t,has_clientSecret:!!e,fetchFavicons:r,generatePasswordQuickAction:n,repromptIgnoreDuration:o,has_serverCertsPath:!!s,has_serverUrl:!!i,shouldCacheVaultItems:a,transientCopyGeneratePassword:c,transientCopyGeneratePasswordQuick:l,transientCopySearch:d,windowActionOnCopy:f}},le="N/A",tt=async(t,e=!0)=>{try{let r=t;Q==="windows"?r=`powershell -Command "${t}"`:r=`PATH="$PATH:${(0,Cc.dirname)(process.execPath)}" ${t}`;let{stdout:n}=await Md(r,{env:{BITWARDENCLI_APPDATA_DIR:Bd}}),o=n.trim();return e?o.replace(/\n|\r/g,""):o}catch(r){return A(`Failed to execute command: ${t}`,r),le}},Vd=()=>{try{let t=(0,ne.getPreferenceValues)().cliPath;return t?{type:"custom",path:t}:de.path.bin===de.path.downloadedBin?{type:"downloaded",path:de.path.downloadedBin}:{type:"installed",path:de.path.installedBin}}catch{return{type:le,path:le}}},Hd=async()=>{try{let t="/opt/homebrew/bin/brew";if((0,Lo.existsSync)(t)||(t="/usr/local/bin/brew"),!(0,Lo.existsSync)(t))return{arch:le,version:le};let e=await tt(`${t} config`,!1);if(e===le)return{arch:le,version:le};let r=/HOMEBREW_PREFIX: (.+)/.exec(e)?.[1]||le,n=/HOMEBREW_VERSION: (.+)/.exec(e)?.[1]||le;return{arch:r!==le?r.includes("/opt/homebrew")?"arm64":"x86_64":le,version:n}}catch{return{arch:le,version:le}}};function Gd(){let t=async()=>{let e=await(0,ne.showToast)(ne.Toast.Style.Animated,"Collecting data...");try{let r=Fd(),n=Vd(),[o,s,i,a]=await Promise.all([...Q==="macos"?[tt("uname -m"),tt("sw_vers -productVersion"),tt("sw_vers -buildVersion")]:[tt("(Get-CimInstance Win32_OperatingSystem).OSArchitecture"),tt("(Get-CimInstance Win32_OperatingSystem).Caption"),tt("(Get-CimInstance Win32_OperatingSystem).Version")],tt(`${n.path} --version`)]),c={raycast:{version:ne.environment.raycastVersion},system:{arch:o,version:s,buildVersion:i},node:{arch:process.arch,version:process.version},cli:{type:n.type,version:a},preferences:r};if(Q==="macos"){let l=await Hd();c.homebrew={arch:l.arch,version:l.version}}await ne.Clipboard.copy(JSON.stringify(c,null,2)),e.style=ne.Toast.Style.Success,e.title="Data copied to clipboard"}catch(r){e.style=ne.Toast.Style.Failure,e.title="Failed to collect bug report data",A("Failed to collect bug report data",r)}};return(0,Pc.jsx)(ne.Action,{title:"Collect Bug Report Data",icon:ne.Icon.Bug,onAction:t})}var mr=Gd;var kc=require("@raycast/api"),Lc=require("react/jsx-runtime"),Ro="https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...";function zd(){return(0,Lc.jsx)(kc.Action.OpenInBrowser,{title:"Open Bug Report",url:Ro})}var gr=zd;var ie=require("@raycast/api");var Rc=require("react/jsx-runtime");function Wd(){return(0,Rc.jsx)(ie.Action,{onAction:async()=>{let e=Rt.toString();if(e.length===0)return(0,ie.showToast)(ie.Toast.Style.Success,"No errors to copy");await ie.Clipboard.copy(e),await(0,ie.showToast)(ie.Toast.Style.Success,"Errors copied to clipboard"),await(0,ie.confirmAlert)({title:"Be careful with this information",message:"Please be mindful of where you share this error log, as it may contain sensitive information. Always analyze it before sharing.",primaryAction:{title:"Got it",style:ie.Alert.ActionStyle.Default}})},title:"Copy Last Errors",icon:ie.Icon.CopyClipboard,style:ie.Action.Style.Regular})}var $o=Wd;var Oc=require("@raycast/api");var $c=require("react");var jd=()=>{let t=ce.get(fe.CLI_VERSION);return t?parseFloat(t):-1},_c=()=>{let[t,e]=(0,$c.useState)(jd);return Pe(()=>{ce.subscribe((r,n)=>{n&&r===fe.CLI_VERSION&&e(parseFloat(n)||-1)})}),t};var zt=require("react/jsx-runtime");function dr(){let t=_c();return(0,zt.jsxs)(Oc.ActionPanel.Section,{title:`Debugging & Bug Reporting (CLI v${t})`,children:[(0,zt.jsx)($o,{}),(0,zt.jsx)(gr,{}),(0,zt.jsx)(mr,{})]})}var X=require("@raycast/api");var De=require("@raycast/api"),nt=require("react");var Ne=require("react");var Mc=require("react/jsx-runtime"),Oo=(0,Ne.createContext)(null),Kd=({children:t})=>{let e=(0,Ne.useRef)(new Map),r=s=>{s instanceof pt?e.current.forEach(i=>i(s)):e.current.forEach((i,a)=>{let c=s.find(l=>l.id===a);c&&i(c)})},n=(s,i)=>(e.current.set(s,i),()=>{e.current.delete(s)}),o=(0,Ne.useMemo)(()=>({listeners:e,publishItems:r,subscribeItem:n}),[]);return(0,Mc.jsx)(Oo.Provider,{value:o,children:t})},Nc=()=>{let t=(0,Ne.useContext)(Oo);if(t==null)throw new Error("useVaultItemPublisher must be used within a VaultListenersProvider");return t.publishItems},Dc=()=>{let t=(0,Ne.useContext)(Oo);if(t==null)throw new Error("useVaultItemSubscriber must be used within a VaultListenersProvider");return e=>{let r;return new Promise((n,o)=>{let s=t.subscribeItem(e,i=>{try{if(s(),i instanceof pt)throw i;n(i),clearTimeout(r)}catch(a){o(a)}});r=setTimeout(()=>{s(),o(new _o)},15e3)})}},_o=class extends Error{constructor(){super("Timed out waiting for item"),this.name="SubscriberTimeoutError"}},Uc=Kd;var Wc=require("@raycast/api");function Bc(t){return t.map(e=>({object:e.object,id:e.id,organizationId:e.organizationId,folderId:e.folderId,type:e.type,name:e.name,revisionDate:e.revisionDate,creationDate:e.creationDate,deletedDate:e.deletedDate,favorite:e.favorite,reprompt:e.reprompt,collectionIds:e.collectionIds,secureNote:e.secureNote?{type:e.secureNote.type}:void 0,fields:Xd(e.fields),login:qd(e.login),identity:Yd(e.identity),card:Zd(e.card),passwordHistory:Jd(e.passwordHistory),notes:U(e.notes),sshKey:Qd(e.sshKey)}))}function Fc(t){return t.map(e=>({object:e.object,id:e.id,name:e.name}))}function Xd(t){return t?.map(e=>({name:e.name,value:U(e.value),type:e.type,linkedId:e.linkedId}))}function qd(t){if(t)return{username:t.username,uris:t.uris,password:U(t.password),passwordRevisionDate:U(t.passwordRevisionDate),totp:U(t.totp)}}function Yd(t){if(t)return{title:U(t.title),firstName:U(t.firstName),middleName:U(t.middleName),lastName:U(t.lastName),address1:U(t.address1),address2:U(t.address2),address3:U(t.address3),city:U(t.city),state:U(t.state),postalCode:U(t.postalCode),country:U(t.country),company:U(t.company),email:U(t.email),phone:U(t.phone),ssn:U(t.ssn),username:U(t.username),passportNumber:U(t.passportNumber),licenseNumber:U(t.licenseNumber)}}function Zd(t){if(t)return{brand:t.brand,cardholderName:U(t.cardholderName),number:U(t.number),expMonth:U(t.expMonth),expYear:U(t.expYear),code:U(t.code)}}function Jd(t){return t?.map(e=>({password:U(e.password),lastUsedDate:U(e.lastUsedDate)}))}function Qd(t){if(t)return{publicKey:t.publicKey,keyFingerprint:t.keyFingerprint,privateKey:U(t.privateKey)}}function U(t){return t&&bt}var Hc=require("@raycast/api"),rt=require("crypto"),Gc=require("react"),Vc="aes-256-cbc";function zc(){let{clientSecret:t}=(0,Hc.getPreferenceValues)(),e=(0,Gc.useMemo)(()=>eh(t.trim()),[t]);return{encrypt:o=>{let s=(0,rt.randomBytes)(16),i=(0,rt.createCipheriv)(Vc,e,s),a=Buffer.concat([i.update(o),i.final()]);return{iv:s.toString("hex"),content:a.toString("hex")}},decrypt:(o,s)=>{let i=(0,rt.createDecipheriv)(Vc,e,Buffer.from(s,"hex"));return Buffer.concat([i.update(Buffer.from(o,"hex")),i.final()]).toString()}}}function eh(t){return Buffer.from((0,rt.createHash)("sha256").update(t).digest("base64").slice(0,32))}function th(){let{encrypt:t,decrypt:e}=zc(),r=(0,Wc.getPreferenceValues)().shouldCacheVaultItems;return Pe(()=>{ce.isEmpty||ce.clear()},!r),{getCachedVault:()=>{try{if(!r)throw new vt;let s=ce.get(fe.IV),i=ce.get(fe.VAULT);if(!s||!i)throw new vt;let a=e(i,s);return JSON.parse(a)}catch(s){return s instanceof vt||A("Failed to decrypt cached vault",s),{items:[],folders:[]}}},cacheVault:(s,i)=>{try{if(!r)throw new vt;let a=JSON.stringify({items:Bc(s),folders:Fc(i)}),c=t(a);ce.set(fe.VAULT,c.content),ce.set(fe.IV,c.iv)}catch(a){a instanceof vt||A("Failed to cache vault",a)}}}}var vt=class extends Error{},jc=th;var qc=require("react/jsx-runtime"),Kc=(0,nt.createContext)(null);function rh(){return{items:[],folders:[],isLoading:!0}}var{syncOnLaunch:nh}=(0,De.getPreferenceValues)();function Xc(t){let{children:e}=t,r=gn(),n=ye(),o=Nc(),{getCachedVault:s,cacheVault:i}=jc(),[a,c]=os(fe.CURRENT_FOLDER_ID,null),[l,d]=(0,nt.useReducer)((b,C)=>({...b,...C}),{...rh(),...s()});Pe(()=>{nh?m({isInitial:!0}):f()},r.active&&r.token);async function f(){try{d({isLoading:!0});let b=[],C=[];try{let[S,I]=await Promise.all([n.listItems(),n.listFolders()]);if(S.error)throw S.error;if(I.error)throw I.error;b=S.result,C=I.result,b.sort(sh)}catch(S){throw o(new pt),S}d({items:b,folders:C}),o(b),i(b,C)}catch(b){await(0,De.showToast)(De.Toast.Style.Failure,"Failed to load vault items",Gn(b)),A("Failed to load vault items",b)}finally{d({isLoading:!1})}}async function m(b){let{isInitial:C=!1}=b??{},S=await(0,De.showToast)({title:"Syncing vault...",message:C?"Background task":void 0,style:De.Toast.Style.Animated});try{await n.sync(),await f(),await S.hide()}catch(I){await n.logout(),S.style=De.Toast.Style.Failure,S.title="Failed to sync vault",S.message=Gn(I)}}function v(b){c(typeof b=="string"?b:b?.id)}function T(b){let C=typeof b=="function"?b(l):b;d(C),i(C.items,C.folders)}let x=(0,nt.useMemo)(()=>({...l,items:oh(l.items,a),isEmpty:l.items.length==0,isLoading:l.isLoading||r.isLoading,currentFolderId:a,syncItems:m,loadItems:f,setCurrentFolder:v,updateState:T}),[l,r.isLoading,a,m,f,v,T]);return(0,qc.jsx)(Kc.Provider,{value:x,children:e})}function oh(t,e){return!e||e===wt.ALL?t:e===wt.NO_FOLDER?t.filter(r=>r.folderId===null):t.filter(r=>r.folderId===e)}function sh(t,e){return t.favorite&&e.favorite?0:t.favorite?-1:1}var Wt=()=>{let t=(0,nt.useContext)(Kc);if(t==null)throw new Error("useVault must be used within a VaultProvider");return t};var jt=require("react/jsx-runtime");function No(){let t=Wt(),e=ye(),r=async()=>{let o=await(0,X.showToast)({title:"Locking vault...",message:"Please wait",style:X.Toast.Style.Animated});try{await e.lock({reason:yt.MANUAL}),o.style=X.Toast.Style.Success,o.title="Vault Locked",o.message=void 0}catch{o.style=X.Toast.Style.Failure,o.title="Failed to lock vault",o.message=void 0}},n=async()=>{let o=await(0,X.showToast)({title:"Logging out...",message:"Please wait",style:X.Toast.Style.Animated});try{await e.logout(),o.style=X.Toast.Style.Success,o.title="Logged Out",o.message=void 0}catch{o.style=X.Toast.Style.Failure,o.title="Failed to logout",o.message=void 0}};return(0,jt.jsxs)(X.ActionPanel.Section,{title:"Vault Actions",children:[(0,jt.jsx)(X.Action,{title:"Sync Vault",shortcut:{macOS:{key:"r",modifiers:["opt"]},Windows:{key:"r",modifiers:["alt"]}},icon:X.Icon.ArrowClockwise,onAction:t.syncItems}),(0,jt.jsx)(X.Action,{icon:{source:"sf_symbols_lock.svg",tintColor:X.Color.PrimaryText},title:"Lock Vault",shortcut:{macOS:{key:"l",modifiers:["opt","shift"]},Windows:{key:"l",modifiers:["alt","shift"]}},onAction:r}),(0,jt.jsx)(X.Action,{style:X.Action.Style.Destructive,title:"Logout",icon:X.Icon.Logout,onAction:n})]})}var ot=require("react/jsx-runtime"),ih=`

`,Do="https://bitwarden.com/help/cli/#download-and-install",ah=t=>`\`\`\`
${t}
\`\`\``,ch=({error:t})=>{let e=zr(t),r=(0,Se.getPreferenceValues)().cliPath,n=t instanceof mt,o=r||t instanceof Ge,s=[];if(o&&!n?s.push("# \u26A0\uFE0F Bitwarden CLI not found"):s.push("# \u{1F4A5} Whoops! Something went wrong"),n)s.push(`We couldn't download the [Bitwarden CLI](${Do}), you can always install it on your machine.`);else if(o){let i=r?` (${r})`:"";s.push(`We couldn't find the [Bitwarden CLI](${Do}) installed on your machine${i}.`)}else s.push(`The \`${Se.environment.commandName}\` command crashed when we were not expecting it to.`);if(s.push("> Please read the `Setup` section in the [extension's description](https://www.raycast.com/jomifepe/bitwarden) to ensure that everything is properly configured."),s.push(`**Try restarting the command. If the issue persists, consider [reporting a bug on GitHub](${Ro}) to help us fix it.**`),e){let i=/incompatible architecture/gi.test(e);s.push(">## Technical details \u{1F913}",i&&`\u26A0\uFE0F We suspect that your Bitwarden CLI was installed using a version of NodeJS that's incompatible with your system architecture (e.g. x64 NodeJS on a M1/Apple Silicon Mac). Please make sure your have the correct versions of your software installed (e.g., ${Q==="macos"?"Homebrew, ":""}NodeJS, and Bitwarden CLI).`,ah(e))}return(0,ot.jsx)(Se.Detail,{markdown:s.filter(Boolean).join(ih),actions:(0,ot.jsxs)(Se.ActionPanel,{children:[(0,ot.jsxs)(Se.ActionPanel.Section,{title:"Bug Report",children:[(0,ot.jsx)(gr,{}),(0,ot.jsx)(mr,{})]}),o&&(0,ot.jsx)(Se.Action.OpenInBrowser,{title:"Open Installation Guide",url:Do})]})})},ur=ch;var Uo=require("react/jsx-runtime"),br=class extends Yc.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}async componentDidCatch(e,r){e instanceof Te?(this.setState(n=>({...n,hasError:!0,error:e.message})),await(0,Kt.showToast)(Kt.Toast.Style.Failure,e.message)):(Kt.environment.isDevelopment&&this.setState(n=>({...n,hasError:!0,error:e.message})),console.error("Error:",e,r))}render(){try{return this.state.hasError?(0,Uo.jsx)(ur,{error:this.state.error}):this.props.children}catch{return(0,Uo.jsx)(ur,{})}}};var wn=require("@raycast/api"),Ml=require("react");var x1=Object.keys(_a);var Ue="https://vault.bitwarden.com/images",lh={[Ce.VISA]:`${Ue}/visa-light.png`,[Ce.MASTERCARD]:`${Ue}/mastercard-light.png`,[Ce.AMEX]:`${Ue}/amex-light.png`,[Ce.DISCOVER]:`${Ue}/discover-light.png`,[Ce.DINERS_CLUB]:`${Ue}/diners_club-light.png`,[Ce.JCB]:`${Ue}/jcb-light.png`,[Ce.MAESTRO]:`${Ue}/maestro-light.png`,[Ce.UNION_PAY]:`${Ue}/union_pay-light.png`,[Ce.RU_PAY]:`${Ue}/ru_pay-light.png`};function Zc(t){return lh[t]}var Ol=require("@raycast/api");var Cl=te(vl(),1),Hh=t=>t.normalize("NFKD").split(""),Il=/^\s+$/,Tl=/^[`~!@#$%^&*()\-=_+{}[\]\|\\;':",./<>?]+$/,Yo={insertOrder:"insertOrder",bestMatch:"bestMatch"},Gh={keySelector:t=>t,threshold:.6,ignoreCase:!0,ignoreSymbols:!0,normalizeWhitespace:!0,returnMatchData:!1,useDamerau:!0,useSellers:!0,useSeparatedUnicode:!1,sortBy:Yo.bestMatch},zh=()=>{},Wh=t=>t instanceof Array?t:[t];function Pl(t,e){let r=e.ignoreCase?t.toLocaleLowerCase():t,n=[],o=[],s=!0,i=0,a=e.useSeparatedUnicode?Hh(r):(0,Cl.default)(r);for(let c of a)Il.lastIndex=0,Tl.lastIndex=0,e.normalizeWhitespace&&Il.test(c)?s||(n.push(" "),o.push(i),s=!0):e.ignoreSymbols&&Tl.test(c)||(e.useSeparatedUnicode?n.push(c):n.push(c.normalize()),o.push(i),s=!1),i+=c.length;for(o.push(t.length);n[n.length-1]===" ";)n.pop(),o.pop();return{original:t,normal:n,map:o}}function jh(t,e){return{index:e[t.start],length:e[t.end+1]-e[t.start]}}function kl(t,e){if(e===0)return{index:0,length:0};let r=e;for(let n=t.length-2;n>0&&r>1;n--){let o=t[n];r=o[r]<o[r-1]?r:r-1}return{start:r-1,end:e-1}}function Kh(){return{start:0,end:0}}var Xh=()=>!0,qh=(t,e)=>t<e;function Yh(t,e){let r=new Array(t);for(let n=0;n<t;n++)r[n]=new Array(e),r[n][0]=n;for(let n=0;n<e;n++)r[0][n]=n;return r}function Zh(t,e){let r=new Array(t);r[0]=new Array(e).fill(0);for(let n=1;n<t;n++)r[n]=new Array(e),r[n][0]=n;return r}function Ll(t,e,r,n,o){let s=r[n],i=r[n+1],a=t[n]===e[o]?0:1,c,l=i[o]+1;(c=s[o+1]+1)<l&&(l=c),(c=s[o]+a)<l&&(l=c),i[o+1]=l}function Rl(t,e,r,n){for(let o=0;o<t.length;o++)Ll(t,e,r,o,n)}function Jh(t,e,r,n){if(n===0){Rl(t,e,r,n);return}t.length>0&&Ll(t,e,r,0,n);for(let o=1;o<t.length;o++){let s=r[o-1],i=r[o],a=r[o+1],c=t[o]===e[n]?0:1,l,d=a[n]+1;(l=i[n+1]+1)<d&&(d=l),(l=i[n]+c)<d&&(d=l),t[o]===e[n-1]&&t[o-1]===e[n]&&(l=s[n-1]+c)<d&&(d=l),a[n+1]=d}}function Qh(t,e,r){let n=t;for(let o=0;o<e.length;o++){let s=e[o];n.children[s]==null&&(n.children[s]={children:{},candidates:[],depth:0}),n.depth=Math.max(n.depth,e.length-o),n=n.children[s]}n.candidates.push(r)}function Al(t,e,r,n){for(let o of r){let s=Wh(n.keySelector(o)).map((i,a)=>({index:e,keyIndex:a,item:o,normalized:Pl(i,n)}));e++;for(let i of s)Qh(t,i.normalized.normal,i)}}function ep(t,e){let r=e.score-t.score;if(r!==0)return r;let n=t.match.start-e.match.start;if(n!==0)return n;let o=t.keyIndex-e.keyIndex;if(o!==0)return o;let s=t.lengthDiff-e.lengthDiff;return s!==0?s:$l(t,e)}function $l(t,e){return t.index-e.index}function tp(t){switch(t){case Yo.bestMatch:return ep;case Yo.insertOrder:return $l;default:throw new Error(`unknown sortBy method ${t}`)}}function _l(t,e,r,n,o,s,i){let a={item:r.item,normalized:r.normalized,score:n,match:o,index:r.index,keyIndex:r.keyIndex,lengthDiff:s};e[r.index]==null?(e[r.index]=t.length,t.push(a)):i(a,t[e[r.index]])<0&&(t[e[r.index]]=a)}var rp=Math.max,np=t=>t;function op(t,e,r,n,o){let s=e+o,i=Math.min(r.length,e+t.depth+1),a=Math.ceil((s+i)/2);return 1-(a-i)/a>=n}function sp(t,e,r,n,o,s){return 1-Math.min(o,s-(t.depth+1))/r.length>=n}function ip(t,e,r,n,o,s,i){let a=[];for(let l in t.children){let d=t.children[l];a.push([d,1,l,0,e.length])}let c=new Array(t.depth);for(;a.length!==0;){let[l,d,f,m,v]=a.pop();c[d-1]=f,r.score(e,c,n,d-1);let T=d,x=n[n.length-1][T],b=m,C=v;if(r.shouldUpdateScore(x,v)&&(b=T,C=x),l.candidates.length>0){let S=r.getLength(e.length,d),I=1-C/S;if(I>=i.threshold){let P=kl(n,b),R=Math.abs(d-e.length);for(let z of l.candidates)_l(o,s,z,I,P,R,r.compareItems)}}for(let S in l.children){let I=l.children[S];r.shouldContinue(I,d,e,i.threshold,C,x)&&a.push([I,d+1,S,b,C])}}}function ap(t,e,r){let n=r.useSellers?Zh:Yh,o={score:r.useDamerau?Jh:Rl,getLength:r.useSellers?np:rp,shouldUpdateScore:r.useSellers?qh:Xh,shouldContinue:r.useSellers?sp:op,walkBack:r.useSellers?kl:Kh,compareItems:tp(r.sortBy)},s={},i=[],a=n(t.length+1,e.depth+1);if(r.threshold<=0||t.length===0)for(let l of e.candidates)_l(i,s,l,0,{index:0,length:0},t.length,o.compareItems);ip(e,t,o,a,i,s,r);let c=i.sort(o.compareItems);if(r.returnMatchData){let l=r.useSellers?jh:zh;return c.map(d=>({item:d.item,original:d.normalized.original,key:d.normalized.normal.join(""),score:d.score,match:l(d.match,d.normalized.map)}))}return c.map(l=>l.item)}var yn=class{constructor(e,r){this.options=Object.assign({},Gh,r),this.trie={children:{},candidates:[],depth:0},Al(this.trie,0,e,this.options),this.count=e.length}add(...e){Al(this.trie,this.count,e,this.options),this.count+=e.length}search(e,r){return r=Object.assign({},this.options,r),ap(Pl(e,this.options).normal,this.trie,r)}};var wr=require("react"),Nl=require("url");function Dl(t){try{return`https://icons.bitwarden.net/${new Nl.URL(t).hostname}/icon.png`}catch{return Ol.Icon.Globe}}function Ul(t){let[e,r]=(0,wr.useState)(""),n=(0,wr.useMemo)(()=>new yn(t,{ignoreSymbols:!1,threshold:.7,keySelector:s=>{let{login:i,card:a}=s;return[s.name,Oa[s.type],i?.username,i?.uris?.map(({uri:c})=>c),a?.brand,a?.number].flat().filter(c=>!!c)}}),[t]),o=(0,wr.useMemo)(()=>e?n.search(e):t,[n,e]);return{setSearchText:r,filteredItems:o}}var{fetchFavicons:cp}=(0,wn.getPreferenceValues)(),lp={1:t=>{let e=t.login?.uris?.[0]?.uri;return cp&&e?Dl(e):_t[1]},3:t=>{let{brand:e}=t.card??{};if(e){let r=Zc(e);if(r)return r}return _t[3]},4:()=>_t[4],2:()=>_t[2],5:()=>_t[5]};function Bl(t){return(0,Ml.useMemo)(()=>{let e=lp[t.type]?.(t);return e||wn.Icon.QuestionMark},[t.type,t.card?.brand,t.login?.uris?.[0]?.uri])}var xn=require("@raycast/api");function up(){let t=ye(),e=Dc();async function r(o){let s=await t.getItem(o);if(s.error)throw s.error;return s.result}async function n(o,s=(a=>a),i){let a=s(o);if(!fp(a))return a;let c=i?await(0,xn.showToast)(xn.Toast.Style.Animated,i):void 0,l=s(await Promise.race([e(o.id),r(o.id)]));return await c?.hide(),l}return n}function fp(t){try{return typeof t=="object"?JSON.stringify(t).includes(bt):typeof t=="string"?t===bt:!1}catch{return!1}}var Fl=up;var ve=require("@raycast/api");var Vl=(t,e=!1)=>{let r=t.charAt(0).toUpperCase(),n=e?t.slice(1).toLowerCase():t.slice(1);return r+n};async function Hl(t,e){let r=(0,ve.getPreferenceValues)().windowActionOnCopy,n=Vl(t,!0);r==="keepOpen"?await(0,ve.showToast)({title:n,message:e,style:ve.Toast.Style.Success}):r==="closeAndPopToRoot"?(await(0,ve.showHUD)(n),await(0,ve.popToRoot)()):await(0,ve.showHUD)(n)}var Gl=require("@raycast/api"),En=require("react");function Zo(){let[t,e]=(0,En.useState)(void 0);return(0,En.useEffect)(()=>{(0,Gl.getFrontmostApplication)().then(r=>e(r.name)).catch(()=>e(void 0))},[]),t}var Tt=require("@raycast/api");var xr=require("react/jsx-runtime");function Jo(){let{folders:t,currentFolderId:e,setCurrentFolder:r}=Wt();return t.length===0?null:(0,xr.jsxs)(Tt.List.Dropdown,{tooltip:"Select a folder",placeholder:"Search folders",defaultValue:e??wt.ALL,onChange:r,throttle:!0,children:[(0,xr.jsx)(Tt.List.Dropdown.Item,{value:wt.ALL,title:"All",icon:Tt.Icon.Folder}),t.map(n=>{let o=n.id||wt.NO_FOLDER;return(0,xr.jsx)(Tt.List.Dropdown.Item,{value:o,title:n.name,icon:Tt.Icon.Folder},o)})]})}var zl=require("react"),Sn=require("react/jsx-runtime"),dp=t=>{let e=zl.Children.toArray(t.children);return t.reverse&&e.reverse(),(0,Sn.jsx)(Sn.Fragment,{children:e})},Wl=dp;var vn=require("react");function jl(t,e){let[r,n]=(0,vn.useState)(t);return(0,vn.useEffect)(()=>{n(t)},e),[r,n]}var $=require("react/jsx-runtime"),hp=()=>(0,$.jsx)(br,{children:(0,$.jsx)(rc,{loadingFallback:(0,$.jsx)(_.List,{searchBarPlaceholder:"Search items",isLoading:!0}),children:(0,$.jsx)(Po,{unlock:!0,children:(0,$.jsx)(Uc,{children:(0,$.jsx)(Xc,{children:(0,$.jsx)(pp,{})})})})})});function pp(){let t=Wt(),{data:e,isLoading:r}=yp(),n=t.items.filter(l=>l.login?.totp),{setSearchText:o,filteredItems:s}=Ul(n),i=(0,st.useMemo)(()=>e?s.reduce((l,d)=>(d.login?.uris?.some(({uri:m})=>m?.includes(e.url.hostname))?l.tabItems.push(d):l.items.push(d),l),{items:[],tabItems:[]}):{items:s,tabItems:[]},[s,e]),a=i.items.length===0&&i.tabItems.length===0,c=i.items.map(l=>(0,$.jsx)(Kl,{item:l},l.id));return(0,$.jsxs)(_.List,{filtering:!1,onSearchTextChange:o,searchBarPlaceholder:"Search items",isLoading:t.isLoading||r,searchBarAccessory:(0,$.jsx)(Jo,{}),actions:(0,$.jsx)(_.ActionPanel,{children:(0,$.jsx)(ql,{})}),children:[e&&i.tabItems.length>0?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(_.List.Section,{title:`Active Tab (${e.url.hostname})`,children:i.tabItems.map(l=>(0,$.jsx)(Kl,{item:l},l.id))}),(0,$.jsx)(_.List.Section,{title:"Others",children:c})]}):c,(0,$.jsx)(_.List.EmptyView,{icon:{source:"bitwarden-64.png"},title:a?"No authenticator keys found":"No matching items found",description:"Hit the sync button to sync your vault"})]})}function Kl({item:t}){let e=Bl(t),r=(0,_.getPreferenceValues)(),[n,o]=(0,st.useState)(!t.reprompt),{code:s,time:i,error:a,isLoading:c}=wp({item:t,canGenerate:n});function l(){if(!n)return[{text:{value:"Needs confirmation",color:_.Color.Yellow},tooltip:"Needs master password confirmation"}];if(!c){if(a)return[{text:{value:a.message,color:_.Color.Red}}];if(s&&i)return[{text:s},{tag:{value:String(i),color:i<=7?_.Color.Red:_.Color.Blue},tooltip:`${i} seconds remaining`}]}return[{text:"Loading..."}]}return(0,$.jsx)(qs.Provider,{value:t,children:(0,$.jsx)(_.List.Item,{title:t.name,subtitle:t.login?.username??void 0,icon:e,actions:(0,$.jsxs)(_.ActionPanel,{children:[n?(0,$.jsxs)(Wl,{reverse:r.primaryAction==="paste",children:[(0,$.jsx)(gp,{}),(0,$.jsx)(bp,{})]}):(0,$.jsx)(mp,{onConfirm:()=>o(!0)}),(0,$.jsx)(ql,{})]}),accessories:l()})})}function ql(){return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(No,{}),(0,$.jsx)(dr,{})]})}function mp({onConfirm:t}){let e=or();return(0,$.jsx)(ko,{title:"Confirm Password",onAction:t,icon:_.Icon.Lock,repromptDescription:`Generating an authentication code for <${e.name}>`})}function gp(){let t=Yl("copy");return(0,$.jsx)(_.Action,{title:"Copy Code",onAction:async()=>{let r=await t();r&&(await _.Clipboard.copy(r,{transient:Na("other")}),await Hl("Copied code to clipboard"))},icon:_.Icon.Clipboard})}function bp(){let t=Zo(),e=Yl("paste"),r=async()=>{let n=await e();n&&await _.Clipboard.paste(n)};return(0,$.jsx)(_.Action,{title:t?`Paste Code into ${t}`:"Paste Code",onAction:r,icon:_.Icon.Window})}function Yl(t){let e=or(),r=Fl();return async()=>{try{let n=await r(e,i=>i.login?.totp,"Getting code...");if(!n)throw new Error("Failed to get totp");let[o,s]=jn(n);if(s)throw s;return o.generate()}catch(n){await(0,_.showToast)(_.Toast.Style.Failure,"Failed to get code"),A(`Failed to ${t} code`,n);return}}}function yp(){return Tr(async()=>{if(!_.environment.canAccess(_.BrowserExtension))return;let[t,e]=await Lt(_.BrowserExtension.getTabs());if(e)return;let r=t.find(n=>n.active);return r?{...r,url:new URL(r.url)}:void 0})}function wp(t){let{item:e,canGenerate:r}=t,[[n,o,s=!1],i]=jl(()=>{let{totp:f}=e.login??{};return r?f===bt?Xl(new Error("Loading...")):f?jn(f):Ae(new Error("No TOTP found")):Xl(new Error("Needs confirmation..."))},[e,r]),[a,c]=(0,st.useState)(null),[l,d]=(0,st.useState)(null);return(0,st.useEffect)(()=>{if(o)return;let f,m,v=()=>{clearTimeout(m),clearInterval(f)},T=()=>{try{let x=Math.ceil(n.remaining()/1e3);d(x),x===n.period&&c(n.generate())}catch(x){i(Ae(new Error("Failed to regenerate"))),v(),A("Failed to regenerate",x)}};try{m=setTimeout(()=>{T(),f=setInterval(T,1e3)},n.remaining()%1e3),c(n.generate())}catch(x){i(Ae(new Error("Failed to generate"))),v(),A("Failed to generate",x)}return v},[e,n]),{code:a,time:l,error:o,isLoading:s}}function Xl(t){return[null,t,!0]}var xp=hp;
/*! Bundled license information:

node-stream-zip/node_stream_zip.js:
  (**
   * @license node-stream-zip | (c) 2020 Antelle | https://github.com/antelle/node-stream-zip/blob/master/LICENSE
   * Portions copyright https://github.com/cthackers/adm-zip | https://raw.githubusercontent.com/cthackers/adm-zip/master/LICENSE
   *)

@scure/base/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
